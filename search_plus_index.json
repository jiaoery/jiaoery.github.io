{"./":{"url":"./","title":"Introduction","keywords":"","body":" Hey, I'm jiaoery! I'm glad to see you ,my Vistor Let me introduce myself: âœ recent activities ğŸŒ Coding Time the projects I'm working on ğŸ† Github Profile Trophy Watch my contribution graph get eaten by the snake ğŸ Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-05-11 16:14:46 "},"Head-First-è®¾è®¡æ¨¡å¼1-----ç­–ç•¥æ¨¡å¼.html":{"url":"Head-First-è®¾è®¡æ¨¡å¼1-----ç­–ç•¥æ¨¡å¼.html","title":"Head-First-è®¾è®¡æ¨¡å¼1-----ç­–ç•¥æ¨¡å¼","keywords":"","body":"æœ¬æ–‡å‚ç…§ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ å¯¹äºæ•´ä¸ªç³»åˆ—ï¼Œæˆ‘ä»¬æŒ‰ç…§è¿™æœ¬ä¹¦çš„è®¾è®¡é€»è¾‘ï¼Œä½¿ç”¨æƒ…æ™¯åˆ†æçš„æ–¹å¼æ¥æè¿°ï¼Œå¹¶ä¸”ç©¿æ’ä½¿ç”¨ä¸€äº›é—®é¢˜ï¼Œæ€»ç»“çš„æ–¹å¼æ¥è®²è¿°ã€‚å¹¶ä¸”æ‰€æœ‰çš„å¼€å‘æºç ï¼Œéƒ½ä¼šæ‰˜ç®¡åˆ°githubä¸Šã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jixiang52002/HFDesignPattern 1.å¼•æ–‡ Joeçš„å…¬å¸æ˜¯åšæ¨¡æ‹Ÿé¸­å­æ´»åŠ¨çš„æ¸¸æˆè€Œå‡ºåï¼Œè¿™æ¬¾æ¸¸æˆå–åä¸ºSimUDuckï¼Œè¿™æ¬¾æ¸¸æˆå…·æœ‰éå¸¸å¤šçš„é¸­å­ï¼Œä¸€è¾¹æ¸¸æ³³ä¸€è¾¹å‘±å‘±å«ã€‚è¿™é‡Œçš„è®¾è®¡é‡‡ç”¨äº†æ ‡å‡†çš„OOï¼ˆObject Orientedï¼Œé¢å‘å¯¹è±¡ï¼‰çš„æ–¹å¼ç¼–å†™ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªé¸­å­çš„è¶…ç±»ï¼ˆSuperClassï¼‰ï¼Œåç»­æ‰€æœ‰çš„é¸­å­éƒ½å¿…é¡»ç»§æ‰¿è¿™ä¸ªè¶…ç±»ã€‚ OOé¢å‘å¯¹è±¡æ¨¡å‹ ç»§æ‰¿ è¿™æ—¶ï¼Œå…¬å¸çš„é«˜å±‚ä»¬æƒ³è¦é€šè¿‡æ¨¡æ‹Ÿä¼šé£çš„é¸­å­æ¥è¿½æ±‚è¡Œä¸šçš„é¢†å…ˆã€‚ç„¶åJoeçš„é¡¹ç›®ç»ç†æ‹ç€èƒ¸è„¯å‘Šè¯‰ä¸»ç®¡ï¼ŒJoeå¾ˆå¿«å°±å¯ä»¥æå®šï¼Œâ€œæœ‰äº†OOä»€ä¹ˆéƒ½ä¸æ€•â€ Joeæ¥æ”¶åˆ°ä»»åŠ¡åï¼Œæƒ³å‡ºäº†ä¸€ä¸ªåŠæ³•ï¼šâ€œæˆ‘ä»…éœ€è¦åœ¨Duckè¿™ä¸ªè¶…ç±»ä¸­åŠ ä¸ŠFly()çš„æ–¹æ³•ï¼Œç„¶åæ‰€æœ‰çš„é¸­å­éƒ½å¯ä»¥é£äº†â€ã€‚ç„¶åä»–çš„è®¾è®¡æ¨¡å‹å°±æ”¹æˆä»¥ä¸‹çš„æ ·å­ è¿™æ ·çœ‹èµ·æ¥è²Œä¼¼æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ï¼Œç„¶åå¯æ€•çš„é—®é¢˜å‘ç”Ÿäº†ã€‚ã€‚ã€‚ã€‚ ç”¨æˆ·åé¦ˆï¼Œè‡ªå·±çš„æ©¡çš®é¸­å’Œæœ¨é¸­å±…ç„¶ä¹Ÿå¯ä»¥é£èµ·æ¥ï¼ï¼ï¼ é‚£ä¹ˆï¼Œåˆ°åº•æ˜¯ä¸ºä½•å¯¼è‡´äº†è¿™ä¸ªå¯æ€•çš„é—®é¢˜ï¼Ÿ æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼šç”±äºJoeåœ¨Duckè¶…ç±»ä¸­åŠ ä¸Šflyæ–¹æ³•ï¼Œå¯¼è‡´æ‰€æœ‰çš„å­ç±»éƒ½ä¼šç»§æ‰¿è¯¥æ–¹æ³•ï¼Œè¿™å°±å¯¼è‡´äº†åŸæœ¬ä¸ä¼šé£çš„æ©¡çš®é¸­å’Œæœ¨é¸­ä¹Ÿå…·æœ‰é£è¡Œèƒ½åŠ›ï¼Œæ˜¾ç„¶ä¸ºäº†æé«˜å¤ç”¨æ€§ä½¿ç”¨çš„ç»§æ‰¿æ–¹å¼ï¼Œå¹¶æœªè¾¾åˆ°å®Œç¾å¾—ç»“æœã€‚ ç»§æ‰¿+è¦†ç›– Joeåœ¨æ€è€ƒåï¼Œåˆå¾—å‡ºä¸€ä¸ªæ–¹æ¡ˆï¼Œé‚£å°±æ˜¯åœ¨æ©¡çš®é¸­ä¸­å°†flyæ–¹æ³•è¦†ç›–æ‰ï¼Œä¸åšä»»ä½•æ“ä½œï¼Œè¿™æ ·åŸæœ‰çš„RubberDuckç±»ä¸­æ¶æ„å°±å˜æˆå¦‚ä¸‹ï¼š ç„¶åï¼Œä¸šåŠ¡çš„éœ€æ±‚åˆéœ€è¦åŠ å…¥æœ¨é¸­ï¼ˆDecoyDuckï¼‰ï¼Œå®ƒä¸ä¼šå«ä¹Ÿä¸ä¼šé£ã€‚è‹¦é€¼çš„Joeåˆè¦æŠŠæœ¨é¸­ï¼ˆDecoyDuck)ä¸­quarkæ–¹æ³•è¦†ç›–ï¼Œè¿™æ ·DecoyDuckä¸­çš„ç±»ç»“æ„å°±å˜æˆå¦‚ä¸‹ï¼š ä½†æ˜¯æˆ‘ä»¬ä¼šå‘è§‰ï¼Œå¦‚æœä»¥åæœ‰æ–°çš„ä¸šåŠ¡ï¼Œç”šè‡³äºflyæ–¹æ³•ä¸­å‡ºç°ä¸€ä¸ªbugï¼Œæˆ–è€…éœ€è¦åˆ é™¤flyç›¸å…³çš„ä¸šåŠ¡ï¼Œæ‰€æœ‰ç›¸å…³ä»£ç éƒ½éœ€è¦ä¿®æ”¹ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œè¿™éƒ½å¯¼è‡´éå¸¸å¯æ€•çš„ç»´æŠ¤é—®é¢˜ã€‚é‚£ä¹ˆï¼Œåˆ°åº•è¯¥æ€ä¹ˆåŠ æ¥å£ â€œè¿™ä¸å°±ç›¸å½“äºè®©æˆ‘æ ¹æ®ç”¨æˆ·æ‰‹æœºå£³é¢œè‰²æ¢ä¸»é¢˜å—ï¼Ÿâ€ï¼Œå¯æ€œçš„Joeåœ¨å¿«è¢«æƒ³è¦å†²ä¸Šå»æ‰“äº§å“ç»ç†çš„æ—¶å€™ï¼ˆçš®ä¸€ä¸‹ã€‚ã€‚ã€‚ï¼‰ã€‚è„‘å­çªç„¶æƒ³èµ·ä¸€ä»¶ç¥å™¨ï¼Œä»–å†³å®šè¯•è¯•ã€‚ä»–çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨æ¥å£ï¼ˆInterfaceï¼‰ï¼Œå°†flyåˆ†ç¦»å‡ºæ¥ï¼Œæ”¾è¿›ä¸€ä¸ªFlyableæ¥å£ä¸­ã€‚é’ˆå¯¹äºquarkæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è¿™æ ·åˆ†ç¦»è¿›Quarkableæ¥å£ä¸­ï¼Œ è™½ç„¶è¿™æ ·çœ‹èµ·æ¥æ»¡è¶³äº†æˆ‘ä»¬ä¹‹å‰æ‰€æåˆ°çš„æ‰€æœ‰éœ€æ±‚ï¼Œä½†æ˜¯è¿™æ ·ä¸€æ¥é‡å¤ä»£ç é‡ä¼šéå¸¸å¯æ€•ï¼Œå¦‚æœæœ‰ä¸Šä¸‡ä¸ªDuckå­ç±»ï¼ŒJoeä¸€å®šä¼šå‘ç–¯çš„ã€‚æ‰€æœ‰ï¼Œè¿™ä¸ªæ–¹æ³•è™½ç„¶çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†æ˜¯ä¸€æ—¦æŸä¸ªæ–¹æ³•æˆ–è€…è¡Œä¸ºå‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬éœ€è¦å®šä½åˆ°æ‰€æœ‰å®ç°è¯¥æ–¹æ³•çš„ç±»ä¸­å»ä¿®æ”¹å¯¹åº”çš„ä»£ç ï¼Œè¿™å¾ˆå®¹æ˜“å¯¼è‡´bugçš„å‘ç”Ÿã€‚ é‚£ä¹ˆï¼Œåˆ°åº•æœ‰æ²¡æœ‰ä¸€ç§èƒ½å¤Ÿå»ºç«‹è½¯ä»¶çš„æœ‰æ•ˆæ–¹æ³•ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬å¯ä»¥å¯¹æ—¢æœ‰çš„é¡¹ç›®åœ¨å½±å“æœ€å°çš„æƒ…å†µä¸‹ä¿®æ”¹ä»–çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿™æ ·æˆ‘ä»¬èƒ½å¤ŸèŠ±å¾ˆå°‘çš„æ—¶é—´å»ä¿®æ”¹ä»£ç ã€‚ 2.ç­–ç•¥æ¨¡å¼ ç¬¬ä¸€è®¾è®¡åŸåˆ™ æ‰¾å‡ºåº”ç”¨ä¸­å¯èƒ½éœ€è¦å˜åŒ–ä¹‹å¤„ï¼ŒæŠŠå®ƒä»¬ç‹¬ç«‹å‡ºæ¥ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦å˜åŒ–çš„ä»£ç æ··åˆåœ¨ä¸€èµ·ã€‚ æŒ‰ç…§ä»¥ä¸Šçš„åŸåˆ™è¿›è¡Œè®¾è®¡ï¼Œä»£ç å‘ç”Ÿå˜åŒ–å¼•èµ·çš„åæœä¼šéå¸¸å°ï¼Œæ•´ä¸ªé¡¹ç›®ä¼šç‰¹åˆ«å…·æœ‰å¼¹æ€§ã€‚ è¿™ä¸ªåŸåˆ™ä¸ä»…ä»…é€‚ç”¨äºç­–ç•¥æ¨¡å¼ï¼Œå¯¹äºä¹‹åè®²è§£çš„æ¨¡å¼åŒæ ·ä¹Ÿæ˜¯æ ¸å¿ƒçš„æŒ‡å¯¼æ–¹å‘ã€‚é‚£ä¹ˆæˆ‘ä»¬ç»§ç»­Joeæ‰€é‡åˆ°çš„Ducké—®é¢˜ã€‚ 2.1åˆ†å¼€å˜åŒ–çš„å’Œä¸ä¼šå˜åŒ–çš„ æˆ‘ä»¬å¾ˆæ¸…æ¥šï¼ŒDuckç±»å†…éƒ¨çš„fly()å’Œquark()ä¼´éšç€é¸­å­çš„ä¸åŒä¼šå‘ç”Ÿæ”¹å˜ï¼Œå…¶ä»–æ¨¡å—æ˜¯ä¸å˜çš„ã€‚ä¸ºäº†è¦æŠŠè¿™ä¸¤ä¸ªå˜åŒ–çš„è¡Œä¸ºä»Duckç±»ä¸­åˆ†å¼€ï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬ä»Duckç±»ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œå»ºè®®ä¸€ç»„æ–°ç±»ç”¨æ¥ä»£è¡¨æ¯ä¸€ä¸ªè¡Œä¸ºã€‚ é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ã€‚å¦‚ä½•è®¾è®¡é‚£ç»„å®ç°é£è¡Œè¡Œä¸ºå’Œå‘±å‘±å«è¡Œä¸ºçš„ä¸€ç»„ç±»å‘¢ï¼Ÿ è¿™é‡Œå°±éœ€è¦æåŠç¬¬äºŒè®¾è®¡åŸåˆ™ ç¬¬äºŒè®¾è®¡åŸåˆ™ é’ˆå¯¹äºæ¥å£ç¼–ç¨‹ï¼Œä¸é’ˆå¯¹å®ç°ç¼–ç¨‹ è¿™é‡Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯åœ¨åˆ›å»ºå…·ä½“çš„Duckç±»çš„æ—¶å€™ï¼Œå¯ä»¥åŠ¨æ€çš„ç”Ÿæˆå¯¹åº”çš„è¡Œä¸ºã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œæˆ‘ä»¬æƒ³è¦äº§ç”Ÿä¸€ä¸ªæ–°çš„ç»¿å¤´é¸­ï¼Œå°†åˆ¶å®šç±»å‹çš„é£è¡Œè¡Œä¸ºèµ‹äºˆç»™å®ƒã€‚è¿™å°±è¯´æ˜ï¼Œåœ¨Duckç±»ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åŒ…å«å®šä¹‰Duckè¡Œä¸ºçš„æ–¹æ³•ï¼Œè¿™æ ·åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŠ¨æ€å»æ”¹å˜ç»¿å¤´é¸­çš„è¡Œä¸ºã€‚ æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªæ¥å£æ¥ä»£è¡¨ä¸¤ä¸ªè¡Œä¸ºï¼Œè¿™é‡Œå®šä¹‰ä¸º FlyBehaviorå’ŒQuarkBehaviorï¼Œè¡Œä¸ºçš„æ¯æ¬¡å®ç°ï¼Œéƒ½å°†å®ç°å¯¹åº”çš„æ¥å£ã€‚ ä½†æ˜¯æ¥å£ç±»æ˜¯æ²¡æœ‰æ–¹æ³•ä½“çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç»„ç±»å®ç°å¯¹åº”çš„è¡Œä¸ºï¼Œè¿™äº›ä¸“ç”¨æ¥å®ç°ç±»ä¼¼FlyBehaviorå’ŒQuarkBehaviorçš„ä¸€ç»„ç±»ï¼Œæˆ‘ä»¬ç§°ä¸ºè¡Œä¸ºç±»ã€‚ è¿™é‡Œæåˆ°çš„æ¥å£ç±»å¹¶éä¸¥æ ¼æ„ä¹‰ä¸ŠJavaä¸­çš„æ¥å£ï¼ˆInterfaceï¼‰ï¼Œå¯ä»¥ç†è§£ä¸ºæŠ½è±¡ç±»æˆ–æ¥å£ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼š \"é’ˆå¯¹æ¥å£ç¼–ç¨‹\"çœŸæ­£çš„æ„æ€æ˜¯â€œé’ˆå¯¹è¶…ç±»å‹ï¼ˆsupertypeï¼‰ç¼–ç¨‹â€ è¿™é‡Œè®²å¾—æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œæˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹é’ˆå¯¹å®ç°ç¼–ç¨‹å’Œé’ˆå¯¹æ¥å£ç¼–ç¨‹çš„åŒºåˆ«ï¼š //é’ˆå¯¹å®ç°ç¼–ç¨‹ Dog dog=new Dog(); dog.bark(); //é’ˆå¯¹æ¥å£ç¼–ç¨‹ Animal animal=new Dog(); animal.makeSoud(); 2.2å®ç°é¸­å­çš„è¡Œä¸ºï¼ˆä»£ç ï¼‰ ä»ä¸Šé¢çš„è®²è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£å¯å˜éƒ¨åˆ†æ˜¯flyå’Œquackä¸¤ç§æ–¹æ³•ã€‚ä¸å¯å˜ä¸ºDuckç±»ã€‚é‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸¤ä¸ªæ¥å£FlyBehaviorå’ŒQuackBehaviorï¼Œè¿˜æœ‰ä¸€äº›åˆ—ä»–ä»¬å¯¹åº”çš„è¡Œä¸ºç±»ï¼Œå…·ä½“çš„ç»“æ„é€»è¾‘å¦‚ä¸‹å›¾ï¼š è¿™è®¾è®¡æœ‰ä¸¤ä¸ªå¾ˆæ˜æ˜¾çš„ä¼˜åŠ¿ï¼š å¯ä»¥è®©é£è¡Œå’Œå‘±å‘±çš„å«çš„åŠ¨ä½œå¯ä»¥è¢«å…¶ä»–å¯¹è±¡å¤ç”¨ï¼Œå› ä¸ºè¿™äº›è¡Œä¸ºå·²ç»ä¸é¸­å­ç±»æ— å…³ã€‚ä¹Ÿå°±æ˜¯è§£è€¦ æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸å½±å“åŸæœ‰çš„è¡Œä¸ºç±»çš„æƒ…å†µä¸‹æ–°å¢ä¸€äº›è¡Œä¸ºã€‚ä¹Ÿå°±æ˜¯å…·å¤‡äº†å¼¹æ€§å’Œå¯æ‹“å±•æ€§ æ‹“å±•å‡ ä¸ªæ¦‚å¿µï¼š è€¦åˆæŒ‡çš„å°±æ˜¯ä¸¤ä¸ªç±»ä¹‹é—´çš„è”ç³»çš„ç´§å¯†ç¨‹åº¦ è§£è€¦æŒ‡çš„æ˜¯è§£é™¤ç±»ä¹‹é—´çš„ç›´æ¥å…³ç³»ï¼Œå°†ç›´æ¥å…³ç³»è½¬æ¢æˆé—´æ¥å…³ç³» æƒ³è¦äº†è§£çš„å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šhttps://blog.csdn.net/qq_24499615/article/details/77821896 æ¥ä¸‹æ¥åˆ†åˆ«å°†FlyBehavior,FlyWithWings,FlyNoWayåˆ†åˆ«è´´ä¸‹ ``` public interface FlyBehavior { //é£è¡Œ public void fly(); } public class FlyWithWings implements FlyBehavior{ public void fly() { System.out.println(\"I am flying!\"); } } ``` public class FlyNoWay implements FlyBehavior { public void fly() { System.out.println(\"I can't fly!\"); } } æ¥ä¸‹æ¥å°†QuackBehaviorï¼ŒQuackï¼ŒMuteQuackï¼ŒSqueakç±»çš„ä»£ç åˆ†åˆ«è´´ä¸‹ï¼š public interface QuackBehavior { //å‘±å‘±å« public void quack(); } public class Quack implements QuackBehavior { public void quack() { System.out.println(\"Quack\"); } } public class MuteQuack implements QuackBehavior { public void quack() { System.out.println(\">\"); } } public class Squeak implements QuackBehavior { public void quack() { System.out.println(\"Squeak\"); } } åˆ°è¿™é‡Œå°†flyå’Œquackçš„æ¥å£ç±»å’Œè¡Œä¸ºç±»å®Œæˆã€‚ 2.3ç»„åˆé¸­å­è¡Œä¸º åœ¨å‰é¢2.2æˆ‘ä»¬å°†é£è¡Œï¼ˆflyï¼‰å’Œå‘±å‘±å«ï¼ˆquackï¼‰çš„åŠ¨ä½œ\"å§”æ‰˜\"ï¼ˆdelegateï¼‰ç»™å…¶ä»–æ¥å£ç±»å¤„ç†ï¼Œè€Œå¹¶éåœ¨Duckç±»ï¼ˆæˆ–è€…å­ç±»ï¼‰ä¸­å®šäºflyå’Œquackæ–¹æ³•ã€‚é‚£ä¹ˆåˆ°åº•è¯¥æ€ä¹ˆæŠŠè¡Œä¸ºç»„åˆè¿›Duckä¸­ï¼Ÿ 1.é¦–å…ˆåœ¨Duckç±»ä¸­å¢åŠ ä¸¤ä¸ªâ€œå®ä¾‹å˜é‡â€ï¼Œåˆ†åˆ«ä¸ºflyBehaviorå’ŒquackBehaviorï¼Œå£°æ˜ä¸ºæ¥å£ç±»å‹ï¼ˆæ³¨æ„ä¸æ˜¯å…·ä½“ç±»çš„å®ç°ç±»å‹ï¼‰ï¼Œæ¯ä¸ªDuckï¼ˆæˆ–å…¶å­ç±»ï¼‰ä¼šåŠ¨æ€çš„è®¾ç½®è¿™äº›å˜é‡ä»¥åœ¨è¿è¡Œæ—¶å¼•ç”¨æ­£ç¡®çš„è¡Œä¸ºç±»å‹ï¼ˆå¦‚FlyWithWingsï¼ŒSqueakç­‰ï¼‰ã€‚Duckç±»çš„ç±»ç»“æ„å¦‚ä¸‹ 2.é‚£ä¹ˆï¼Œå°±å¼€å§‹å®ç°Duckç±» public abstract class Duck { //ä¸ºè¡Œä¸ºæ¥å£ç±»å‹å£°æ˜ä¸¤ä¸ªå¼•ç”¨å˜é‡ï¼Œæ‰€æœ‰çš„é¸­å­ï¼ˆæˆ–å­ç±»ï¼‰éƒ½ç»§æ‰¿å®ƒä»¬ FlyBehavior flyBehavior; QuackBehavior quackBehavior; public Duck(){ } public abstract void display(); public void performQuck(){ //å§”æ‰˜ç»™è¡Œä¸ºå¤„ç† quackBehavior.quack(); } public void performFly(){ //å§”æ‰˜ç»™è¡Œä¸ºå¤„ç† flyBehavior.fly(); } public void swim(){ System.out.println(\"All ducks float\"); } } ç„¶åæˆ‘ä»¬å®ç°ä¸€ä¸ªMallardDuckç±»æ¥å®ç°ç»„åˆï¼Œ public class MallardDuck extends Duck{ public MallardDuck(){ //ä½¿ç”¨FlyWithWingsä½œä¸ºå…¶FlyBehaviorç±»å‹ flyBehavior=new FlyWithWings(); //ç»¿å¤´é¸­ä½¿ç”¨Quckç±»å¤„ç†å‘±å‘±å«ï¼Œ //æ‰€ä»¥å½“performQuackè¢«è°ƒç”¨æ—¶ï¼Œå«è¿™ä¸ªè¡Œä¸ºè¢«å§”æ‰˜ç»™Quckå¯¹è±¡ quackBehavior=new Quack(); } /* * å› ä¸ºMallardDuckç»§æ‰¿è‡ªDuckç±» * ï¼Œæ‰€ä»¥å…·å¤‡flyBehaviorä¸quackBehaviorå®ä¾‹å˜é‡ */ public void display() { // TODO Auto-generated method stub } } å½“ç„¶æ„é€ å™¨å†…è¿˜æ˜¯éœ€è¦å®ç°å…·ä½“è¡Œä¸ºç±»ï¼Œè¿™åœ¨ä¹‹åçš„æ¨¡å¼ä¸­ä¼šæä¾›ç›¸åº”çš„è§£å†³æ–¹æ¡ˆï¼Œä¹‹åæˆ‘ä»¬ä¼šå›å½’åˆ°è¿™ä¸ªé—®é¢˜ç»§ç»­è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ åˆ°è¿™é‡Œï¼Œç»„åˆé¸­å­ç±»å·²ç»å®ç°ã€‚ 3.æµ‹è¯•æ•ˆæœ è¿™é‡Œæˆ‘ä»¬ç¼–è¯‘æµ‹è¯•ç±» ``` public class MiniDuckSimilator { public static void main(String[] args) { Duck mallerdDuck=new MallardDuck(); //ä¸€ä¸‹ä»£ç æ˜¯å°†å…·ä½“çš„è¡Œä¸ºå§”æ‰˜ç»™å¯¹åº”çš„è¡Œä¸ºç±»å¤„ç†è¡Œä¸º mallerdDuck.performQuck(); mallerdDuck.performFly(); } } ![è¿è¡Œç»“æœ](https://upload-images.jianshu.io/upload_images/2326194-d4b68c3aeb1df28f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) #2.4 åŠ¨æ€è¡Œä¸ºè®¾å®š åœ¨ä¹‹å‰çš„å®ç°ä¸­æˆ‘ä»¬æ˜¯åœ¨Duckçš„å…·ä½“å­ç±»ä¸­å®ç°FlyBehaviorå’ŒQuackBehaviorçš„è¡Œä¸ºï¼Œä½†æ˜¯Duckå¤±å»äº†åŠ¨æ€è®¾å®šçš„åŠŸèƒ½ï¼Œå¯¹äºè¿½æ±‚å®Œç¾çš„ç¨‹åºå‘˜æ¥è¯´æ˜¯ä¸å¯é¥¶æ•çš„ã€‚æ‰€ä»¥æ€¥åˆ‡éœ€è¦é€šè¿‡ä¸€ä¸ªæ–¹æ³•åŠ¨æ€è®¾å®šè¡Œä¸ºï¼Œè€Œå¹¶éæ˜¯åœ¨é¸­å­ï¼ˆDuckï¼‰çš„æ„é€ å™¨ä¸­å»å®ä¾‹åŒ–ã€‚è¿™é‡Œæ¨èä¸€ä¸ªæ–¹æ³•-----**è®¾å®šæ–¹æ³•ï¼ˆsetter methodï¼‰** * 1. åœ¨Duckç±»ä¸­å¢åŠ ä¸¤ä¸ªæ–°æ–¹æ³• setFlyBehavior()å’ŒsetQuckBehavior().å¯¹äºDuckçš„ç±»ç»“æ„ä¿®æ”¹å¦‚ä¸‹ ![image.png](https://upload-images.jianshu.io/upload_images/2326194-7d5c581118a4372b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) å…·ä½“ä¿®æ”¹å¦‚ä¸‹ public abstract class Duck { //ä¸ºè¡Œä¸ºæ¥å£ç±»å‹å£°æ˜ä¸¤ä¸ªå¼•ç”¨å˜é‡ï¼Œæ‰€æœ‰çš„é¸­å­ï¼ˆæˆ–å­ç±»ï¼‰éƒ½ç»§æ‰¿å®ƒä»¬ FlyBehavior flyBehavior; QuackBehavior quackBehavior; public Duck(){ } public abstract void display(); public void performQuck(){ //å§”æ‰˜ç»™è¡Œä¸ºå¤„ç† quackBehavior.quack(); } public void performFly(){ //å§”æ‰˜ç»™è¡Œä¸ºå¤„ç† flyBehavior.fly(); } public void setFlyBehavior(FlyBehavior flyBehavior){ this.flyBehavior=flyBehavior; } public void setQuackBehavior(QuackBehavior quackBehavior){ this.quackBehavior=quackBehavior; } public void swim(){ System.out.println(\"All ducks float\"); } } * 2.åˆ›å»ºä¸€ä¸ªæ–°çš„é¸­å­æ¨¡å‹ï¼šæ¨¡å‹é¸­ï¼ˆModelDuckï¼‰ public class ModelDuck extends Duck{ public ModelDuck(){ flyBehavior=new FlyNoWay(); quackBehavior=new Quack(); } public void display() { System.out.println(\"I'm a model duck\"); } } * 3.æ–°å»ºç«‹ä¸€ä¸ªæ–°çš„FlyBehaviorç±»å‹ FlyRocketPowered public class FlyRocketPowered implements FlyBehavior{ public void fly() { System.out.println(\"I'm flying with a rocket!\"); } } * 4.ä¿®æ”¹æµ‹è¯•ç±»MiniDuckSimulatorï¼ŒåŠ ä¸Šæ¨¡å‹é¸­ï¼Œå¹¶ä»¤æ¨¡å‹é¸­å…·å¤‡ç«ç®­åŠ¨åŠ› public class MiniDuckSimilator { public static void main(String[] args) { Duck mallerdDuck=new MallardDuck(); //ä¸€ä¸‹ä»£ç æ˜¯å°†å…·ä½“çš„è¡Œä¸ºå§”æ‰˜ç»™å¯¹åº”çš„è¡Œä¸ºç±»å¤„ç†è¡Œä¸º mallerdDuck.performQuck(); mallerdDuck.performFly(); Duck modelDuck=new ModelDuck(); //ç¬¬ä¸€æ¬¡ä¼šä½¿ç”¨æ„é€ å‚æ•°é‡Œçš„é£è¡Œæ¨¡å¼ modelDuck.performFly(); modelDuck.setFlyBehavior(new FlyRocketPowered()); //æ¨¡å‹é¸­å…·å¤‡ç«ç®­é£è¡Œèƒ½åŠ› modelDuck.performFly(); } } ``` è¿è¡Œç»“æœï¼š åˆ°è¿™é‡Œæˆ‘ä»¬å‘ç°é¸­å­æ¨¡å‹ä¸­æˆ‘ä»¬ä½¿ç”¨åˆ°ç±»çš„ç»„åˆä½¿ç”¨ï¼Œè€Œè¿™é‡Œæˆ‘ä»¬æ¶‰åŠåˆ°ç¬¬ä¸‰ä¸ªè®¾è®¡åŸåˆ™ï¼š ç¬¬ä¸‰ä¸ªè®¾è®¡åŸåˆ™ å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿ æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œç»„åˆæ‰€å»ºç«‹çš„ç³»ç»Ÿå…·å¤‡æå¤§çš„å¼¹æ€§ï¼Œä¸ä»…ä»…å¯ä»¥å°†è¡Œä¸ºå°è£…ä¸ºä¸€ç³»åˆ—çš„è¡Œä¸ºç±»ï¼Œæ›´å¯ä»¥åŠ¨æ€æ”¹å˜è¡Œä¸ºï¼Œåªéœ€è¦ç»„åˆçš„è¡Œä¸ºå¯¹è±¡æ˜¯ç¬¦åˆæ­£ç¡®çš„è¡Œä¸ºæ¥å£æ ‡å‡†çš„ã€‚ 3.ç­–ç•¥æ¨¡å¼è®²è§£ æ€»ç»“ä¹‹å‰çš„ä¸‰ä¸ªè®¾è®¡åŸåˆ™ï¼š ç¬¬ä¸€è®¾è®¡åŸåˆ™ æ‰¾å‡ºåº”ç”¨ä¸­å¯èƒ½éœ€è¦å˜åŒ–ä¹‹å¤„ï¼ŒæŠŠå®ƒä»¬ç‹¬ç«‹å‡ºæ¥ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦å˜åŒ–çš„ä»£ç æ··åˆåœ¨ä¸€èµ·ã€‚ ç¬¬äºŒè®¾è®¡åŸåˆ™ é’ˆå¯¹äºæ¥å£ç¼–ç¨‹ï¼Œä¸é’ˆå¯¹å®ç°ç¼–ç¨‹ ç¬¬ä¸‰è®¾è®¡åŸåˆ™ å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿ æ€»ç»“è¿™ä¸‰æ¡åŸåˆ™ç»“åˆèµ·æ¥å°±æ˜¯æˆ‘ä»¬å­¦ä¹ çš„ç¬¬ä¸€ä¸ªæ¨¡å¼ï¼š ç­–ç•¥æ¨¡å¼ å®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚ Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-04-12 15:58:12 "},"Head-First-è®¾è®¡æ¨¡å¼2---è§‚å¯Ÿè€…ï¼ˆObserverï¼‰æ¨¡å¼.html":{"url":"Head-First-è®¾è®¡æ¨¡å¼2---è§‚å¯Ÿè€…ï¼ˆObserverï¼‰æ¨¡å¼.html","title":"Head-First-è®¾è®¡æ¨¡å¼2---è§‚å¯Ÿè€…ï¼ˆObserverï¼‰æ¨¡å¼","keywords":"","body":"æœ¬æ–‡å‚ç…§ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ å¯¹äºæ•´ä¸ªç³»åˆ—ï¼Œæˆ‘ä»¬æŒ‰ç…§è¿™æœ¬ä¹¦çš„è®¾è®¡é€»è¾‘ï¼Œä½¿ç”¨æƒ…æ™¯åˆ†æçš„æ–¹å¼æ¥æè¿°ï¼Œå¹¶ä¸”ç©¿æ’ä½¿ç”¨ä¸€äº›é—®é¢˜ï¼Œæ€»ç»“çš„æ–¹å¼æ¥è®²è¿°ã€‚å¹¶ä¸”æ‰€æœ‰çš„å¼€å‘æºç ï¼Œéƒ½ä¼šæ‰˜ç®¡åˆ°githubä¸Šã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jixiang52002/HFDesignPattern å‰ä¸€ç« ä¸»è¦è®²è§£äº†è®¾è®¡æ¨¡å¼å…¥é—¨å’Œæœ€å¸¸ç”¨çš„ä¸€ä¸ªæ¨¡å¼-----ç­–ç•¥æ¨¡å¼ï¼Œå¹¶ç»“åˆJoeçš„é¸­å­æ¨¡å‹è¿›è¡Œåˆ†æï¼Œæƒ³è¦äº†è§£çš„æœ‹å‹å¯ä»¥å›å»å›çœ‹ä¸€ä¸‹ã€‚ è¿™é‡Œæˆ‘ä»¬å°†ç»§ç»­ä»‹ç»ä¸€ç§å¯ä»¥å¸®åŠ©å¯¹è±¡çŸ¥æ‚‰ç°çŠ¶ï¼Œä¸ä¼šé”™è¿‡è¯¥å¯¹è±¡æ„Ÿå…´è¶£çš„äº‹ã€‚ç”šè‡³å¯¹è±¡å¯ä»¥è‡ªå·±å†³å®šæ˜¯éƒ½è¦ç»§ç»­æ¥å—é€šçŸ¥ã€‚æœ‰è¿‡è®¾è®¡æ¨¡å¼å­¦ä¹ ç»éªŒçš„äººä¼šè„±å£è€Œå‡º-----è§‚å¯Ÿè€…æ¨¡å¼ã€‚å¯¹çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†äº†è§£ä¸€ä¸ªæ–°çš„è®¾è®¡æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ã€‚ 1.å¼•è¨€ æœ€è¿‘ä½ çš„å›¢é˜Ÿè·å–äº†ä¸€ä¸ªæ–°çš„åˆçº¦ï¼Œéœ€è¦è´Ÿè´£å»ºç«‹ä¸€ä¸ªWeather-O-Ramaå…¬å¸çš„ä¸‹ä¸€ä»£æ°”è±¡ç«™----Internetæ°”è±¡è§‚æµ‹ç«™ã€‚ åˆçº¦å†…å®¹å¦‚ä¸‹ï¼š æ­å–œè´µå…¬å¸è·é€‰ä¸ºæ•å…¬å¸å»ºç«‹ä¸‹ä¸€ä»£Internetæ°”è±¡è§‚æµ‹ç«™ï¼è¯¥æ°”è±¡ç«™å¿…é¡»å»ºç«‹åœ¨æˆ‘ä»¬ä¸“åˆ©ç”³è¯·çš„WeatherDataå¯¹è±¡ä¸Šï¼Œç”±WeatherDataå¯¹è±¡è´Ÿè´£è¿½è¸ªç›®å‰çš„å¤©æ°”çŠ¶å†µï¼ˆæ¸©åº¦ã€æ¹¿åº¦ã€æ°”å‹ï¼‰ã€‚æˆ‘ä»¬å¸Œæœ›è´µå…¬å¸èƒ½å»ºç«‹ä¸€ä¸ªåº”ç”¨ï¼Œæœ‰ä¸‰ç§å¸ƒå‘Šæ¿ï¼Œåˆ†åˆ«æ˜¾ç¤ºç›®å‰çš„çŠ¶å†µã€æ°”è±¡ç»Ÿè®¡åŠç®€å•çš„é¢„æŠ¥ã€‚å½“WeatherDataå¯¹è±¡è·å–åˆ°æœ€æ–°çš„æµ‹é‡æ•°æ®æ—¶ï¼Œä¸‰ç§å¸ƒå‘Šæ¿å¿…é¡»å®æ—¶æ›´æ–°ã€‚ è€Œä¸”ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥æ‹“å±•çš„æ°”è±¡ç«™ï¼ŒWeather-O-Ramaæ°”è±¡ç«™å¸Œæœ›å…¬å¸ƒä¸€ç»„APIï¼Œè®©å…¶ä»–å¼€å‘äººå‘˜å¯ä»¥å†™å‡ºè‡ªå·±çš„æ°”è±¡å¸ƒå‘Šæ¿ï¼Œå¹¶æ’å…¥æ­¤åº”ç”¨ä¸­æˆ‘ä»¬å¸Œæœ›è´µå…¬å¸å¯ä»¥æä¾›è¿™æ ·çš„APIã€‚ Weather-O-Ramaæ°”è±¡ç«™æœ‰å¾ˆå¥½çš„å•†ä¸šè¿è¥æ¨¡å¼ï¼šä¸€æ—¦å®¢æˆ·ä¸Šé’©ï¼Œä»–ä»¬ä½¿ç”¨æ¯ä¸ªå¸ƒå‘Šæ¿éƒ½è¦ä»˜é’±æœ€å¥½çš„éƒ¨åˆ†å°±æ˜¯ï¼Œä¸ºäº†æ„Ÿè°¢è´µå…¬å¸å»ºç«‹æ­¤ç³»ç»Ÿï¼Œæˆ‘ä»¬å°†ä»¥å…¬å¸çš„è®¤è‚¡æƒæ”¯ä»˜ä½ ã€‚ æˆ‘ä»¬æœŸå¾…çœ‹åˆ°ä½ çš„è®¾è®¡å’Œåº”ç”¨çš„alphaç‰ˆæœ¬ã€‚ é™„æ³¨ï¼šæˆ‘ä»¬æ­£åœ¨é€šå®µæ•´ç†WeatherDataæºæ–‡ä»¶ç»™ä½ ä»¬ã€‚ 1.1éœ€æ±‚åˆ†æ æ ¹æ®å¼€å‘çš„ç»éªŒï¼Œæˆ‘ä»¬é¦–å…ˆåˆ†æWeather-O-Ramaå…¬å¸çš„éœ€æ±‚ï¼š æ­¤ç³»ç»Ÿæœ‰ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šæ°”è±¡ç«™ï¼ˆè·å–å®é™…çš„æ°”è±¡æ•°æ®çš„ç‰©ç†ç»„æˆï¼‰ï¼ŒWeatherDataå¯¹è±¡ï¼ˆè¿½è¸ªæ¥è‡ªæ°”è±¡ç«™çš„æ•°æ®ï¼Œå¹¶æ›´æ–°å¸ƒå‘Šæ¿ï¼‰å’Œå¸ƒå‘Šæ¿ï¼ˆæ˜¾ç¤ºç›®å‰å¤©æ°”çŠ¶å†µå±•ç¤ºç»™ç”¨æˆ·ï¼‰ é¡¹ç›®åº”ç”¨ä¸­ï¼Œå¼€å‘è€…éœ€è¦åˆ©ç”¨WeatherDataå»å®æ—¶è·å–æ°”è±¡æ•°æ®ï¼Œå¹¶ä¸”æ›´æ–°ä¸‰ä¸ªå¸ƒå‘Šæ¿ï¼šç›®å‰æ°”è±¡ï¼Œæ°”è±¡ç»Ÿè®¡å’Œå¤©æ°”é¢„æŠ¥ã€‚ ç³»ç»Ÿå¿…é¡»å…·å¤‡å¾ˆé«˜çš„å¯æ‹“å±•æ€§ï¼Œè®©å…¶ä»–çš„å¼€å‘äººå‘˜å¯ä»¥å»ºç«‹å®šåˆ¶çš„å¸ƒå‘Šæ¿ï¼Œç”¨æˆ·å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°æ·»åŠ æˆ–åˆ é™¤ä»»ä½•å¸ƒå‘Šæ¿ã€‚ æˆ‘ä»¬åˆå§‹è®¾è®¡ç»“æ„å¦‚ä¸‹ï¼š 1.2WeatherDataç±» ç¬¬äºŒå¤©ï¼ŒWeather-O-Ramaå…¬å¸å‘é€è¿‡æ¥WeatherDataçš„æºç ï¼Œå…¶ç»“æ„å¦‚ä¸‹å›¾ å…¶ä¸­measurementsChangedï¼ˆï¼‰æ–¹æ³•åœ¨æ°”è±¡æµ‹è¯•æ›´æ–°æ—¶ï¼Œè¢«è°ƒç”¨ã€‚ 1.3é”™è¯¯çš„ç¼–ç æ–¹å¼ é¦–å…ˆï¼Œæˆ‘ä»¬ä»å¤§éƒ¨åˆ†ä¸æ‡‚è®¾è®¡æ¨¡å¼çš„å¼€å‘è€…å¸¸ç”¨çš„è®¾è®¡æ–¹å¼å¼€å§‹ã€‚ æ ¹æ®Weather-O-Ramaæ°”è±¡ç«™å¼€å‘äººå‘˜çš„éœ€æ±‚æš—ç¤ºï¼Œåœ¨measurementsChanged()æ–¹æ³•ä¸­æ·»åŠ ç›¸å…³çš„ä»£ç ï¼š public class WeatherData { private float temperature;//æ¸©åº¦ private float humidity;//æ¹¿åº¦ private float pressure;//æ°”å‹ private CurrentConditionsDisplay currentConditionsDisplay;//ç›®å‰çŠ¶æ€å¸ƒå‘Šæ¿ private StatisticsDisplay statisticsDisplay;//ç»Ÿè®¡å¸ƒå‘Šæ¿ private ForecastDisplay forecastDisplay;//é¢„æµ‹å¸ƒå‘Šæ¿ public WeatherData(CurrentConditionsDisplay currentConditionsDisplay ,StatisticsDisplay statisticsDisplay ,ForecastDisplay forecastDisplay){ this.currentConditionsDisplay=currentConditionsDisplay; this.statisticsDisplay=statisticsDisplay; this.forecastDisplay=forecastDisplay; } public float getTemperature() { return temperature; } public float getHumidity(){ return humidity; } public float getPressure(){ return pressure; } //å®ä¾‹å˜é‡å£°æ˜ public void measurementsChanged(){ //è°ƒç”¨WeatherDataçš„ä¸‰ä¸ªgetteræ–¹æ³•è·å–æœ€è¿‘çš„æµ‹é‡å€¼ float temp=getTemperature(); float humidity=getHumidity(); float pressure=getPressure(); currentConditionsDisplay.update(temp,humidity,pressure); statisticsDisplay.update(temp,humidity,pressure); forecastDisplay.update(temp,humidity,pressure); } //é€šçŸ¥å‘ç”Ÿå˜åŒ– public void setMeasurements(float temperature,float humidity,float pressure){ this.temperature=temperature; this.humidity=humidity; this.pressure=pressure; measurementsChanged(); } } å›é¡¾ç¬¬ä¸€ç« çš„ä¸‰ä¸ªè®¾è®¡åŸåˆ™ï¼Œæˆ‘ä»¬å‘ç°è¿™é‡Œè¿åäº†å‡ ä¸ªåŸåˆ™ ç¬¬ä¸€è®¾è®¡åŸåˆ™ æ‰¾å‡ºåº”ç”¨ä¸­å¯èƒ½éœ€è¦å˜åŒ–ä¹‹å¤„ï¼ŒæŠŠå®ƒä»¬ç‹¬ç«‹å‡ºæ¥ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦å˜åŒ–çš„ä»£ç æ··åˆåœ¨ä¸€èµ·ã€‚ ç¬¬äºŒè®¾è®¡åŸåˆ™ é’ˆå¯¹äºæ¥å£ç¼–ç¨‹ï¼Œä¸é’ˆå¯¹å®ç°ç¼–ç¨‹ ç¬¬ä¸‰è®¾è®¡åŸåˆ™ å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿ åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†é’ˆå¯¹å®ç°ç¼–ç¨‹ï¼Œå¹¶ä¸”æ²¡æœ‰å°†å˜åŒ–éƒ¨åˆ†ç‹¬ç«‹å‡ºæ¥ï¼Œè¿™æ ·ä¼šå¯¼è‡´æˆ‘ä»¬ä»¥ååœ¨å¢åŠ æˆ–åˆ é™¤å¸ƒå‘Šæ¿æ—¶å¿…é¡»ä¿®æ”¹åº”ç”¨ç¨‹åºã€‚è€Œä¸”ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬ç‰ºç‰²äº†å¯æ‹“å±•æ€§ã€‚ æ—¢ç„¶è¿™é‡Œæˆ‘ä»¬æåˆ°äº†è¦ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥è§£å†³é—®é¢˜ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•ä¸‹æ‰‹ã€‚å¹¶ä¸”ï¼Œä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ 2.è§‚å¯Ÿè€…æ¨¡å¼ 2.1è®¤è¯†è§‚å¯Ÿè€…æ¨¡å¼ ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬ä»æ—¥å¸¸ç”Ÿæ´»ä¸­å¸¸é‡åˆ°çš„æƒ…å½¢æ¥ç†è§£è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç”Ÿæ´»å¸¸è§çš„æŠ¥çº¸å’Œæ‚å¿—è®¢é˜…ä¸šåŠ¡é€»è¾‘æ¥ç†è§£ï¼š æŠ¥ç¤¾çš„ä¸šåŠ¡åœ¨äºå‡ºç‰ˆæŠ¥çº¸ è®¢é˜…æŠ¥çº¸çš„ç”¨æˆ·ï¼Œåªè¦å¯¹åº”æŠ¥ç¤¾æœ‰æ–°çš„æŠ¥çº¸å‡ºç‰ˆï¼Œå°±ä¼šç»™ä½ é€æ¥ å½“ç”¨æˆ·ä¸æƒ³ç»§ç»­è®¢é˜…æŠ¥çº¸ï¼Œå¯ä»¥ç›´æ¥å–æ¶ˆè®¢é˜…ã€‚é‚£ä¹ˆä¹‹åå°±ç®—æœ‰æ–°çš„æŠ¥çº¸å‡ºç‰ˆï¼Œä¹Ÿä¸ä¼šé€ç»™å¯¹åº”ç”¨æˆ·äº†ã€‚ åªè¦æŠ¥ç¤¾ä¸€ç›´å­˜åœ¨ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥è‡ªç”±è®¢é˜…æˆ–å–æ¶ˆè®¢é˜…æŠ¥çº¸ ä»ä¸Šé¢çš„é€»è¾‘æˆ‘ä»¬åˆ†æå‡ºï¼Œè¿™é‡Œç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼ŒæŠ¥ç¤¾ï¼Œç”¨æˆ·ï¼Œè®¢é˜…ã€‚å°†å…¶æŠ½è±¡å‡ºæ¥å°±iæ˜¯ï¼šå‡ºç‰ˆè€…ï¼Œè®¢é˜…è€…ï¼Œè®¢é˜…ã€‚è¿™é‡Œè§‚å¯Ÿè€…æ¨¡å¼çš„é›å½¢å·²ç»å‡ºæ¥äº†ã€‚ å‡ºç‰ˆè€…+è®¢é˜…è€…=è§‚å¯Ÿè€…æ¨¡å¼ å¦‚æœä¸Šé¢å·²ç»ç†è§£äº†æŠ¥ç¤¾æŠ¥çº¸è®¢é˜…çš„é€»è¾‘ï¼Œä¹Ÿå¯ä»¥å¾ˆå¿«çŸ¥é“è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä»€ä¹ˆã€‚åªæ˜¯åœ¨å…¶ä¸­åç§°ä¼šæœ‰å·®å¼‚ï¼Œå‰é¢æåˆ°çš„â€œå‡ºç‰ˆè€…â€æˆ‘ä»¬å¯ä»¥ç§°ä¸ºâ€œä¸»é¢˜ï¼ˆSubjectï¼‰â€æˆ–â€œè¢«è§‚å¯Ÿè€…ï¼ˆObservableï¼‰â€ï¼ˆåä¸€ä¸ªæ›´åŠ å¸¸ç”¨ï¼‰ï¼Œâ€œè®¢é˜…è€…â€æˆ‘ä»¬ç§°ä¸ºâ€œè§‚å¯Ÿè€…ï¼ˆObserverï¼‰â€ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ç±»UMLçš„ç»“æ„å›¾æ¥è§£é‡Šï¼š 2.2 è§‚å¯Ÿè€…æ¨¡å¼æ³¨å†Œ/å–æ¶ˆæ³¨å†Œ åœºæ™¯1ï¼š æŸä¸€å¤©ï¼Œé¸­å­å¯¹è±¡è§‰å¾—è‡ªå·±çš„æœ‹å‹éƒ½è®¢é˜…äº†ä¸»é¢˜ï¼Œè‡ªå·±ä¹Ÿæƒ³ç§°ä¸ºä¸€ä¸ªè§‚å¯Ÿè€…ã€‚äºæ˜¯å‘Šè¯‰ä¸»é¢˜ï¼Œå®ƒæƒ³å½“ä¸€ä¸ªè§‚å¯Ÿè€…ã€‚å®Œæˆè®¢é˜…åï¼Œé¸­å­ä¹Ÿæˆä¸ºä¸€ä¸ªè§‚å¯Ÿè€…äº†ã€‚ è¿™æ ·å½“ä¸»é¢˜æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé¸­å­å¯¹è±¡ä¹Ÿå¯ä»¥å¾—åˆ°é€šçŸ¥äº†ï¼ï¼ åœºæ™¯2ï¼š è€é¼ å¯¹è±¡åŒçƒ¦äº†æ¯å¤©éƒ½è¢«ä¸»é¢˜çƒ¦ï¼Œå†³å®šä»è§‚å¯Ÿè€…åºåˆ—ç¦»å¼€ï¼Œäºæ˜¯å®ƒå‘Šè¯‰ä¸»é¢˜å®ƒæƒ³ç¦»å¼€è§‚å¯Ÿè€…è¡Œåˆ—ï¼Œä¸»é¢˜å°†å®ƒä»è§‚å¯Ÿè€…ä¸­é™¤åã€‚ ä¹‹åä¸»é¢˜æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸ä¼šå†é€šçŸ¥è€é¼ å¯¹è±¡ã€‚ ä¸Šé¢çš„ä¸¤ä¸ªæƒ…å½¢åˆ†åˆ«å¯¹åº”äº†æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œï¼Œè¿™ä¹Ÿæ˜¯è§‚å¯Ÿè€…æ¨¡å¼æœ€é‡è¦çš„ä¸¤ä¸ªæ¦‚å¿µã€‚æ³¨å†Œåçš„å¯¹è±¡æˆ‘ä»¬æ‰å¯ä»¥ç§°ä¸ºè§‚å¯Ÿè€…ã€‚è§‚å¯Ÿè€…å–æ¶ˆæ³¨å†Œåä¹Ÿä¸èƒ½ç§°ä¸ºè§‚å¯Ÿè€…ã€‚ 2.3 è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰ é€šè¿‡æŠ¥çº¸ä¸šåŠ¡å’Œå¯¹è±¡è®¢é˜…çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥å‹¾å‹’å‡ºè§‚å¯Ÿè€…æ¨¡å¼çš„åŸºæœ¬æ¦‚å¿µã€‚ è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šçš„ä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œå®ƒæ‰€æœ‰çš„ä¾èµ–è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚ ä¸»é¢˜/è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…ä¹‹é—´å®šä¹‰äº†ä¸€å¯¹å¤šçš„å…³ç³»ã€‚è§‚å¯Ÿè€…ä¾èµ–äºä¸»é¢˜/è¢«è§‚å¯Ÿè€…ã€‚ä¸€æ—¦ä¸»é¢˜/è¢«è§‚å¯Ÿè€…æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œè§‚å¯Ÿè€…å°±ä¼šæ”¶åˆ°é€šçŸ¥ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•å®ç°è§‚å¯Ÿè€…å’Œä¸»é¢˜/è¢«è§‚å¯Ÿè€…å‘¢ï¼Ÿ 2.4 è§‚å¯Ÿè€…æ¨¡å¼å®ç° ç”±äºç½‘ç»œä¸Šçš„å®ç°è§‚å¯Ÿè€…çš„æ–¹å¼éå¸¸å¤šï¼Œæˆ‘ä»¬è¿™é‡Œé‡‡å–æ¯”è¾ƒå®¹æ˜“ç†è§£çš„æ–¹å¼Subjectå’ŒObserverã€‚å¯¹äºæ›´é«˜çº§çš„ä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥ç™¾åº¦ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹åŸºäºSubjectå’ŒObserverçš„ç±»å›¾ç»“æ„ï¼š 3. è®¾è®¡æ°”è±¡ç«™ åˆ°è¿™é‡Œæˆ‘ä»¬å†å›åˆ°å½“åˆçš„é—®é¢˜ï¼Œæ°”è±¡ç«™ä¸­ç»“æ„æ¨¡å‹ä¸ºä¸€å¯¹å¤šæ¨¡å‹ï¼Œå…¶ä¸­WeatherDataä¸ºæ°”è±¡æ¨¡å‹ä¸­çš„â€œä¸€â€ï¼Œè€Œâ€œå¤šâ€ä¹Ÿå°±å¯¹åº”äº†è¿™é‡Œç”¨æ¥å±•ç¤ºå¤©æ°”ç›‘æµ‹æ•°æ®çš„å„ç§å¸ƒå‘Šæ¿ã€‚ç›¸å¯¹äºä¹‹å‰çš„é’ˆå¯¹å®ç°çš„æ–¹å¼ï¼Œä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥è®¾è®¡ä¼šæ›´åŠ ç¬¦åˆéœ€æ±‚ã€‚ä¼˜å…ˆæˆ‘ä»¬ç»™å‡ºæ–°çš„æ°”è±¡ç«™æ¨¡å‹ã€‚ 3.1å®ç°æ°”è±¡ç«™ ä¾ç…§å‰é¢çš„è®¾è®¡ç»“æ„å›¾ï¼Œæœ€ç»ˆæ¥å®ç°å…·ä½“ä»£ç ç»“æ„ 1.Subject public interface Subject { //æ³¨å†Œè§‚å¯Ÿè€… public void registerObserver(Observer o); //åˆ é™¤è§‚å¯Ÿè€… public void removeObserver(Observer o); //å½“ä¸»é¢˜å‘ç”Ÿæ•°æ®å˜åŒ–æ—¶ï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿ public void notifyObservers(); } 2.Observer public interface Observer { /** * * update:å½“æ°”è±¡ç«™çš„è§‚æµ‹æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«è°ƒç”¨ * @param temp æ¸©åº¦ * @param hunmidity æ¹¿åº¦ * @param pressure æ°”å‹ * @since JDK 1.6 */ public void update(float temp,float hunmidity,float pressure); } 3.DisplayElement public interface DisplayElement { //å½“å¸ƒå‘Šæ¿éœ€è¦å±•ç¤ºæ—¶ï¼Œè°ƒç”¨æ­¤æ–¹æ³•æ—¶ public void display(); } 4.æ–°çš„WeatherData1 public class WeatherData1 implements Subject{ private ArrayList observers; private float temperature; private float humiditty; private float pressure; public WeatherData1(){ observers=new ArrayList(); } //æ³¨å†Œ public void registerObserver(Observer o) { observers.add(o); } //åˆ é™¤ public void removeObserver(Observer o) { int i=observers.indexOf(o); if(i>=0){ observers.remove(i); } } //é€šçŸ¥è§‚å¯Ÿè€…æ•°æ®å˜åŒ– public void notifyObservers() { for(int i=0;i5.CurrentConditionsDisplay public class CurrentConditionsDisplay implements Observer,DisplayElement{ private float temperature; private float humidity; private float pressure; private Subject weatherData; public CurrentConditionsDisplay(Subject weatherData){ this.weatherData=weatherData; weatherData.registerObserver(this); } /** * * update:æ›´æ–°å¸ƒå‘Šæ¿å†…å®¹ * @author å‰ç¥¥ * @param temperature * @param humidity * @param pressure * @since JDK 1.6 */ public void update(float temperature,float humidity,float pressure){ this.temperature=temperature; this.humidity=humidity; this.pressure=pressure; display(); } /** * * display:å±•ç¤ºå¸ƒå‘Šæ¿å†…å®¹ * @author å‰ç¥¥ * @since JDK 1.6 */ public void display(){ System.out.println(\"Current conditons:\"+temperature +\"F degrees and \"+humidity+\"% humidity\"); } } 6.ForecastDisplay public class ForecastDisplay implements Observer,DisplayElement{ private float temperature; private float humidity; private float pressure; private Subject weatherData; public ForecastDisplay(Subject weatherData){ this.weatherData=weatherData; weatherData.registerObserver(this); } /** * * update:æ›´æ–°å¸ƒå‘Šæ¿å†…å®¹ * @author å‰ç¥¥ * @param temperature * @param humidity * @param pressure * @since JDK 1.6 */ public void update(float temperature,float humidity,float pressure){ this.temperature=temperature; this.humidity=humidity; this.pressure=pressure; display(); } /** * * display:å±•ç¤ºå¸ƒå‘Šæ¿å†…å®¹ * @author å‰ç¥¥ * @since JDK 1.6 */ public void display(){ System.out.println(\"Forecast: More of the same\"); } } 7.StatisticsDisplay public class StatisticsDisplay implements Observer,DisplayElement{ private float temperature; private float humidity; private float pressure; private Subject weatherData; public StatisticsDisplay(SubjectweatherData){ this.weatherData=weatherData; weatherData.registerObserver(this); } /** * * update:æ›´æ–°å¸ƒå‘Šæ¿å†…å®¹ * @author å‰ç¥¥ * @param temperature * @param humidity * @param pressure * @since JDK 1.6 */ public void update(float temperature,float humidity,float pressure){ this.temperature=temperature; this.humidity=humidity; this.pressure=pressure; display(); } /** * * display:å±•ç¤ºå¸ƒå‘Šæ¿å†…å®¹ * @author å‰ç¥¥ * @since JDK 1.6 */ public void display(){ System.out.println(\"Avg/Max/Min temperature= \"+temperature +\"/\"+temperature+\"/\"+temperature); } } ps:è¿™é‡Œåœ¨Observerä¸­ä½¿ç”¨SubjectåŸå› åœ¨äºæ–¹ä¾¿ä»¥åçš„å–æ¶ˆæ³¨å†Œã€‚ æœ€åæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªæµ‹è¯•ç±»WeatherStationæ¥è¿›è¡Œæµ‹è¯• public class WeatherStation { public static void main(String[] args){ WeatherData1 weatherData=new WeatherData1(); CurrentConditionsDisplay currentConditionsDisplay=new CurrentConditionsDisplay(weatherData); StatisticsDisplay statisticsDisplay=new StatisticsDisplay(weatherData); ForecastDisplay forecastDisplay=new ForecastDisplay(weatherData); weatherData.setMeasurements(80, 65, 30.4f); weatherData.setMeasurements(82, 70, 29.2f); weatherData.setMeasurements(78, 90, 29.2f); } } æœ€ç»ˆç»“æœå¦‚ä¸‹ åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»è®²è§£å®Œè§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§å®ç°æ–¹å¼ã€‚ä½†æ˜¯è¿™æˆ‘ä»¬ä¹Ÿæå‡ºä¸€ä¸ªé—®é¢˜ï¼Œç”¨æ¥å‘æ•£ã€‚ æ˜¯å¦èƒ½å¤Ÿåœ¨ä¸»é¢˜ä¸­æä¾›å‘å¤–çš„å¯ä»¥è®©è§‚å¯Ÿè€…è‡ªå·±è·å–è‡ªå·±æƒ³è¦æ•°æ®ï¼Œè€Œå¹¶éå°†æ‰€æœ‰çš„æ•°æ®éƒ½æ¨é€ç»™è§‚å¯Ÿè€…ï¼Ÿä¹Ÿå°±æ˜¯åœ¨Pushï¼ˆæ¨ï¼‰çš„åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥pullï¼ˆæ‹‰ï¼‰ã€‚ 4.Javaå†…ç½®çš„è§‚å¯Ÿè€…æ¨¡å¼ åˆšæ‰çš„é—®é¢˜ï¼Œå…¶å®ç†Ÿæ‚‰Javaè¯­è¨€çš„å¼€å‘è€…ä¼šå‘ç°ï¼Œåœ¨Javaä¸­å·²ç»æœ‰ç›¸åº”çš„æ¨¡å¼ï¼Œå¦‚æœç†Ÿæ‚‰çš„å¯ä»¥ç›´æ¥è·³è¿‡æœ¬ç« ã€‚ åœ¨java.utilåŒ…ä¸‹æœ‰Observerå’ŒObservableç±»ï¼Œè¿™ä¸¤ä¸ªç±»çš„ç»“æ„è·Ÿæˆ‘ä»¬é‡åˆ°çš„Subjectå’ŒObserveræ¨¡å‹æœ‰äº›ç±»ä¼¼ã€‚ç”šè‡³å¯æ˜¯éšæ„ä½¿ç”¨pushï¼ˆæ¨ï¼‰æˆ–è€…pullï¼ˆæ‹‰ï¼‰ è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åœ¨çº¿çš„Java APIç½‘ç«™åœ¨çº¿Java APIæ–‡æ¡£ é¦–å…ˆæŸ¥è¯¢Observerçš„API è¿™ä¸ªä¸æˆ‘ä»¬æ‰€å†™çš„Observerç»“æ„å‡ ä¹ç›¸åŒï¼Œåªæ˜¯åœ¨æ¨é€æ˜¯æŠŠObservableç±»ä¸€èµ·æ¨é€ï¼Œè¿™æ ·ç”¨æˆ·æ—¢å¯ä»¥pushä¹Ÿå¯ä»¥ä½¿ç”¨pullçš„æ–¹å¼ã€‚é‚£ä¹ˆObservableçš„ç»“æ„å‘¢ æˆ‘ä»¬å‘ç°è¿™é‡ŒObservableæ˜¯ç±»ä¸æˆ‘ä»¬ä¹‹å‰Subjectä½œä¸ºæ¥å£çš„æ–¹å¼ç¨å¾®æœ‰åŒºåˆ«ï¼›å¹¶ä¸”Observableç±»å…¶ä»–æ–¹æ³•æ›´å…¨ã€‚é‚£ä¹ˆä½¿ç”¨ç±»çš„æ–¹å¼å’Œä½¿ç”¨æ¥å£çš„å½±å“æˆ‘ä»¬åœ¨åé¢ä¼šç»§ç»­è®²ã€‚å¹¶ä¸”è¿™é‡Œæˆ‘ä»¬å…³æ³¨setChangedï¼ˆï¼‰æ–¹æ³•å‘Šè¯‰è¢«è§‚å¯Ÿè€…çš„æ•°æ®å‘ç”Ÿæ”¹å˜ é‚£ä¹ˆï¼Œå¦‚æœè¦ä½¿ç”¨Javaä¸­è‡ªå¸¦çš„è§‚å¯Ÿè€…æ¨¡å¼æ¥ä¿®æ”¹åŸæœ‰æ°”è±¡ç«™ä¸šåŠ¡ä¼šå¦‚ä½•ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æ¥åˆ†ææ›´æ”¹åæ°”è±¡ç«™çš„æ¨¡å‹ï¼š 4.1Javaå†…ç½®è§‚å¯Ÿè€…æ¨¡å¼è¿ä½œæ¨¡å¼ ç›¸å¯¹äºäºä¹‹å‰Subjectå’ŒObserverçš„æ¨¡å¼ï¼ŒJavaå†…ç½®è‡ªå¸¦çš„è§‚å¯Ÿè€…æ¨¡å¼è¿è¡Œç¨å¾®æœ‰äº›å·®å¼‚ã€‚ å°†å¯¹è±¡å˜æˆè§‚å¯Ÿè€…åªéœ€è¦å®ç°Observerï¼ˆjava.util.Observerï¼‰æ¥å£ï¼Œç„¶åè°ƒç”¨ä»»ä½•Observableçš„addObserver()æ–¹æ³•å³å¯ã€‚å¦‚æœè¦åˆ é™¤è§‚å¯Ÿè€…ï¼Œè°ƒç”¨deleteObserver()å³å¯ã€‚ è¢«è§‚å¯Ÿè€…è‹¥è¦æ¨é€é€šçŸ¥ï¼Œéœ€è¦å¯¹è±¡ç»§æ‰¿Observableï¼ˆjava.util.Observableï¼‰ç±»ï¼Œå¹¶å…ˆè°ƒç”¨setChanged(),é¦–å…ˆæ ‡è®°çŠ¶æ€å·²ç»æ”¹å˜ã€‚ç„¶åè°ƒç”¨notifyObservers()æ–¹æ³•ä¸­çš„ä¸€ä¸ªï¼šnotifyObservers()(é€šçŸ¥è§‚å¯Ÿè€…pullæ•°æ®)æˆ–notifyObserers(Object object)(é€šçŸ¥è§‚å¯Ÿè€…pushæ•°æ®) é‚£ä¹ˆä½œä¸ºè§‚å¯Ÿè€…å¦‚ä½•å¤„ç†è¢«è§‚å¯Ÿè€…æ¨é€å‡ºçš„æ•°æ®å‘¢ã€‚ è¿™é‡Œé€»è¾‘å¦‚ä¸‹ï¼š è§‚å¯Ÿè€…ï¼ˆObserverï¼‰å¿…é¡»åœ¨updateï¼ˆObservable o,Object objectï¼‰.å‰ä¸€ä¸ªå‚æ•°ç”¨æ¥è®©è§‚å¯Ÿè€…çŸ¥é“æ˜¯å“ªä¸ªè¢«è§‚å¯Ÿè€…æ¨é€æ•°æ®ã€‚åä¸€ä¸ªobjectä¸ºæ¨é€æ•°æ®ï¼Œå…è®¸ä¸ºnullã€‚ 4.2 setChanged() åœ¨Observableç±»ä¸­setChanged()æ–¹æ³•ä¸€å¼€å§‹æˆ‘ä¹Ÿæœ‰ç–‘æƒ‘ï¼Œä¸ºä½•åœ¨æ¨é€ä¹‹å‰éœ€è¦è°ƒç”¨è¯¥æ–¹æ³•ã€‚åæ¥æŸ¥é˜…èµ„æ–™å’ŒJava APIå‘ç°å®ƒå¾ˆå¥½çš„ä¸€ä¸ªç”¨å¤„ã€‚æˆ‘ä»¬å…ˆæ¥æŸ¥çœ‹javaçš„æºç  è¿™é‡Œå¿…é¡»æ ‡è®°ä¸ºtrueæ‰ä¼šæ¨é€æ¶ˆæ¯ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ°åº•æœ‰ä½•å¥½å¤„ï¼Œæˆ‘ä»¬æ‹¿æ°”è±¡ç«™æ¨¡å‹æ¥åˆ†æã€‚ å¦‚æœæ²¡æœ‰setChangedæ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¹‹å‰çš„Subjectå’ŒObserveræ¨¡å‹é‡Œï¼Œä¸€æ—¦æ•°æ®å‘ç”Ÿç»†å¾®çš„å˜åŒ–ï¼Œæˆ‘ä»¬éƒ½ä¼šå¯¹æ‰€æœ‰çš„è§‚å¯Ÿè€…è¿›è¡Œæ¨é€ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨æ¸©åº¦å˜åŒ–1æ‘„æ°åº¦ä»¥ä¸Šæ‰å‘é€æ¨é€ï¼Œè°ƒç”¨setChangedï¼ˆï¼‰æ–¹æ³•æ›´åŠ æœ‰æ•ˆã€‚å½“ç„¶ï¼Œè¿™ä¸ªåŠŸèƒ½ä½¿ç”¨åœºæ™¯å¾ˆå°‘ï¼Œä½†æ˜¯ä¹Ÿä¸æ’é™¤ä¼šç”¨åˆ°ã€‚å½“ç„¶æ›´æ”¹Objectå’ŒObserveræ¨¡å‹ä¹Ÿæ˜¯å¯ä»¥åšåˆ°è¿™ä¸ªæ•ˆæœçš„ï¼ï¼ï¼ 4.3 Javaå†…ç½®è§‚å¯Ÿè€…æ›´æ”¹æ°”è±¡ç«™ é‚£ä¹ˆåˆ©ç”¨æ°”è±¡ç«™æ¨¡å‹æ¥å®é™…æ“ä½œä¸€ä¸‹ï¼Œä¾ç…§ä¹‹å‰çš„æ¨¡å‹æˆ‘ä»¬ä»£ç åº”è¯¥å¦‚ä¸‹ 1.WeatherData2 public class WeatherData2 extends Observable{ private float temperature; private float humidity; private float pressure; //æ„é€ å™¨ä¸éœ€è¦ä¸ºäº†è®°ä½è§‚å¯Ÿè€…å»ºç«‹æ•°æ®æ¨¡å‹ public WeatherData2(){ } public void measurementsChanged(){ //åœ¨è°ƒç”¨notifyObserver()éœ€è¦æŒ‡ç¤ºçŠ¶æ€å·²ç»æ›´æ”¹äº† setChanged(); //è¿™é‡Œæœªä½¿ç”¨notifyObserver(object),æ‰€ä»¥æ•°æ®é‡‡ç”¨æ‹‰çš„é€»è¾‘ notifyObservers(this); } public void setMeasurements(float temperature,float humidity,float pressure){ this.temperature=temperature; this.humidity=humidity; this.pressure=pressure; measurementsChanged(); } //ä»¥ä¸‹æ–¹æ³•ä¸ºpullæ“ä½œæä¾› public float getTemperature() { return temperature; } public float getHumidity() { return humidity; } public float getPressure() { return pressure; } } 2.CurrentConditionsDisplay1 public class CurrentConditionsDisplay1 implements Observer,DisplayElement{ private Observable observable; private float temperature; private float humidity; private float pressure; //æ„é€ å™¨éœ€è¦ä¼ å…¥Observableå‚æ•°ï¼Œå¹¶ç™»è®°æˆä¸ºè§‚å¯Ÿè€… public CurrentConditionsDisplay1(Observable observable){ this.observable=observable; observable.addObserver(this); } //updateæ–¹æ³•å¢åŠ Observableå’Œæ•°æ®å¯¹è±¡ä½œä¸ºå‚æ•° public void update(Observable o, Object arg) { if(arg instanceof WeatherData2){ WeatherData2 weatherData2=(WeatherData2) arg; this.temperature=weatherData2.getTemperature(); this.humidity=weatherData2.getHumidity(); this.pressure=weatherData2.getPressure(); display(); } } /** * * display:å±•ç¤ºå¸ƒå‘Šæ¿å†…å®¹ * @author å‰ç¥¥ * @since JDK 1.6 */ public void display(){ System.out.println(\"Current conditons:\"+temperature +\"F degrees and \"+humidity+\"% humidity\"); } } 3.ForecastDisplay1 public class ForecastDisplay1 implements Observer,DisplayElement{ private float temperature; private float humidity; private float pressure; private Observable observable; public ForecastDisplay1(Observable observable){ this.observable=observable; observable.addObserver(this); } public void update(Observable o,Object arg){ if(arg instanceof WeatherData2){ WeatherData2 weatherData2=(WeatherData2) arg; this.temperature=weatherData2.getTemperature(); this.humidity=weatherData2.getHumidity(); this.pressure=weatherData2.getPressure(); display(); } } /** * * display:å±•ç¤ºå¸ƒå‘Šæ¿å†…å®¹ * @author å‰ç¥¥ * @since JDK 1.6 */ public void display(){ System.out.println(\"Forecast: More of the same\"); } } 4.StatisticsDisplay1 public class StatisticsDisplay1 implements Observer,DisplayElement{ private float temperature; private float humidity; private float pressure; private Observable observable; public StatisticsDisplay1(Observable observable){ this.observable=observable; observable.addObserver(this); } public void update(Observable o,Object arg){ if(arg instanceof WeatherData2){ WeatherData2 weatherData2=(WeatherData2) arg; this.temperature=weatherData2.getTemperature(); this.humidity=weatherData2.getHumidity(); this.pressure=weatherData2.getPressure(); display(); } } /** * * display:å±•ç¤ºå¸ƒå‘Šæ¿å†…å®¹ * @author å‰ç¥¥ * @since JDK 1.6 */ public void display(){ System.out.println(\"Avg/Max/Min temperature= \"+temperature +\"/\"+temperature+\"/\"+temperature); } } æœ€åè¿›è¡Œæµ‹è¯•ï¼š WeatherStation1 public class WeatherStation1 { public static void main(String[] args){ WeatherData2 weatherData=new WeatherData2(); CurrentConditionsDisplay1 currentConditionsDisplay=new CurrentConditionsDisplay1(weatherData); StatisticsDisplay1 statisticsDisplay=new StatisticsDisplay1(weatherData); ForecastDisplay1 forecastDisplay=new ForecastDisplay1(weatherData); weatherData.setMeasurements(80, 65, 30.4f); weatherData.setMeasurements(82, 70, 29.2f); weatherData.setMeasurements(78, 90, 29.2f); } } ç»“æœæœ€ç»ˆå¦‚ä¸‹ï¼š æˆ‘ä»¬å¯¹æ¯”ä¹‹å‰Subjectå’ŒObserverçš„è§‚å¯Ÿè€…æ¨¡å¼ä¼šå‘ç°ä¸¤è€…è¾“å‡ºé¡ºåºä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ å…¶å®java.util.Observableä¸ä¾èµ–äºè§‚å¯Ÿè€…è¢«é€šçŸ¥çš„é¡ºåºçš„ï¼Œå¹¶ä¸”å®ç°äº†ä»–çš„notifyObserver()æ–¹æ³•ï¼Œè¿™ä¼šå¯¼è‡´é€šçŸ¥è§‚å¯Ÿè€…çš„é¡ºåºä¸åŒäºSubjectå’ŒObserveræ¨¡å‹åœ¨å…·ä½“ç±»å®ç°notifyObserver()æ–¹æ³•ã€‚å…¶å®ä¸¤è€…éƒ½æ²¡æœ‰ä»»ä½•çš„ä»£ç è¯¯å·®ï¼Œåªæ˜¯å®ç°çš„æ–¹å¼ä¸åŒå¯¼è‡´ä¸åŒçš„ç»“æœã€‚ ä½†æ˜¯java.util.Observableç±»å´è¿èƒŒäº†ä¹‹å‰ç¬¬ä¸€ç« ä¸­é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œéé’ˆå¯¹å®ç°ç¼–ç¨‹ã€‚ææ€–çš„æ˜¯ï¼Œå®ƒä¹Ÿæ²¡æœ‰æ¥å£å®ç°ï¼Œè¿™å°±å¯¼è‡´å®ƒçš„ä½¿ç”¨å…·æœ‰å¾ˆé«˜çš„å±€é™æ€§å’Œä½å¤ç”¨æ€§ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸ä»…ä»…æ˜¯è¢«è§‚å¯Ÿè€…ï¼ŒåŒæ—¶è¿˜æ˜¯å¦ä¸€ä¸ªè¶…ç±»çš„å­ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨å¤šç»§æ‰¿çš„æ–¹å¼æ¥å®ç°ã€‚æˆ‘ä»¬å¦‚æœè‡ªè¡Œæ‹“å±•çš„è¯ï¼Œä½ ä¼šå‘ç°setChanged()æ–¹æ³•æ˜¯protectedæ–¹æ³•ï¼Œè¿™å°±è¡¨ç¤ºåªæœ‰java.util.Observableè‡ªèº«å’Œå…¶å­ç±»æ‰å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚è¿™å°±è¿åäº†ç¬¬äºŒä¸ªè®¾è®¡åŸåˆ™---------\"å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿\"ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä¸€èˆ¬ä¸ä¼šä½¿ç”¨Javaè‡ªå¸¦çš„è®¾è®¡è€…æ¨¡å¼çš„åŸå› ã€‚ ç°åœ¨æ¯”è¾ƒæµè¡Œçš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯RxJavaï¼Œä½†æ˜¯ç”±äºè¿™ä¸ªæ¡†æ¶æ¶‰åŠä¸ä»…ä»…æœ‰è§‚å¯Ÿè¿™æ¨¡å¼ï¼Œåœ¨ä¹‹åæ•´ä¸ªè®¾è®¡æ¨¡å¼æ•´ç†ç©ä¸åï¼Œæˆ‘ä¼šé›†ä¸­å†è®²ã€‚ 5.æ€»ç»“ åˆ°æ­¤ï¼Œè§‚å¯Ÿè€…æ¨¡å¼çš„è®²è§£å·²ç»å…¨éƒ¨è®²è§£å®Œæˆã€‚æ€»ç»“ä¸€ä¸‹ã€‚ ç¬¬å››è®¾è®¡åŸåˆ™ ä¸ºäº¤äº’å¯¹è±¡ä¹‹é—´çš„æ¾è€¦åˆæ¶‰åŠè€ŒåŠªåŠ› è§‚å¯Ÿè€…æ¨¡å¼ åœ¨å¯¹è±¡ä¹‹é—´å®šä¹‰ä¸€å¯¹å¤šçš„ä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ã€‚ ç›¸åº”çš„èµ„æ–™å’Œä»£ç æ‰˜ç®¡åœ°å€https://github.com/jixiang52002/HFDesignPattern Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-04-12 15:58:12 "},"Head-First-è®¾è®¡æ¨¡å¼3----è£…é¥°è€…æ¨¡å¼.html":{"url":"Head-First-è®¾è®¡æ¨¡å¼3----è£…é¥°è€…æ¨¡å¼.html","title":"Head-First-è®¾è®¡æ¨¡å¼3----è£…é¥°è€…æ¨¡å¼","keywords":"","body":"æœ¬æ–‡å‚ç…§ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ å¯¹äºæ•´ä¸ªç³»åˆ—ï¼Œæˆ‘ä»¬æŒ‰ç…§è¿™æœ¬ä¹¦çš„è®¾è®¡é€»è¾‘ï¼Œä½¿ç”¨æƒ…æ™¯åˆ†æçš„æ–¹å¼æ¥æè¿°ï¼Œå¹¶ä¸”ç©¿æ’ä½¿ç”¨ä¸€äº›é—®é¢˜ï¼Œæ€»ç»“çš„æ–¹å¼æ¥è®²è¿°ã€‚å¹¶ä¸”æ‰€æœ‰çš„å¼€å‘æºç ï¼Œéƒ½ä¼šæ‰˜ç®¡åˆ°githubä¸Šã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jixiang52002/HFDesignPattern å›é¡¾ä¸Šä¸€ç¯‡æ–‡ç« è®²è§£äº†è®¾è®¡æ¨¡å¼ä¸­å¸¸ç”¨çš„ä¸€ç§æ¨¡å¼------è§‚å¯Ÿè€…æ¨¡å¼ã€‚å¹¶ç»“åˆæ°”è±¡ç«™è®¾è®¡è¿›è¡Œå®æˆ˜è§£æï¼Œå¹¶ä¸”ä»è‡ªå·±è®¾è®¡åˆ°JAVAè‡ªå¸¦è®¾è®¡æ¨¡å¼åšäº†è®²è§£ã€‚æƒ³è¦äº†è§£çš„æœ‹å‹å¯ä»¥å›å»å›çœ‹ä¸€ä¸‹ã€‚ æœ¬ç« æˆ‘ä»¬ä¼šç»§ç»­å‰é¢çš„è¯é¢˜ï¼Œæœ‰å…³å…¸å‹çš„ç»§æ‰¿æ»¥ç”¨é—®é¢˜ã€‚è¿™ä¸€ç« ä¼šè®²è§£å¦‚ä½•ä½¿ç”¨å¯¹è±¡ç»„åˆçš„æ–¹å¼ï¼Œå¦‚ä½•åœ¨è¿è¡Œæ—¶å€™åšè£…é¥°ç±»ã€‚åœ¨ç†Ÿæ‚‰è£…é¥°æŠ€å·§åï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨åŸæœ¬ä¸ä¿®æ”¹ä»»ä½•åº•å±‚çš„ä»£ç ï¼Œå´å¯ä»¥ç»™åŸæœ‰å¯¹è±¡èµ‹äºˆæ–°çš„èŒèƒ½ã€‚ä½ ä¼šè¯´ï¼Œè¿™ä¸å°±æ˜¯â€œè£…é¥°è€…æ¨¡å¼â€ã€‚æ²¡é”™ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è£…é¥°è€…æ¨¡å¼çš„ShowTimeæ—¶é—´ã€‚ å‰è¨€ æ¬¢è¿æ¥åˆ°æ˜Ÿå·´å…¹å’–å•¡ï¼Œè¯¥å…¬å¸æ˜¯ä¸–ç•Œä¸Šä»¥æ‰©å¼ é€Ÿåº¦æœ€å¿«è€Œé—»åçš„å’–å•¡è¿é”åº—ã€‚ä½†æ˜¯æœ€è¿‘è¿™å®¶è‘—åçš„å’–å•¡å…¬å¸é‡åˆ°ä¸€ä¸ªå·¨å¤§çš„é—®é¢˜ï¼Œå› ä¸ºæ‰©å±•é€Ÿåº¦å¤ªå¿«äº†ï¼Œä»–ä»¬å‡†å¤‡æ›´æ–°è®¢å•ç³»ç»Ÿï¼Œä»¥åˆä¹ä»–ä»¬çš„é¥®æ–™ä¾›åº”éœ€æ±‚ã€‚ ä»–ä»¬æœ¬æ¥çš„è®¾è®¡æ–¹å¼å¦‚ä¸‹ï¼š ç„¶åå®¢æˆ·è´­ä¹°å’–å•¡æ—¶ï¼Œå¯ä»¥è¦æ±‚åœ¨å…¶ä¸­åŠ å…¥ä»»ä½•è°ƒæ–™ï¼Œä¾‹å¦‚ï¼šå¥¶èŒ¶ï¼Œç‰›å¥¶ï¼Œè±†æµ†ã€‚æ˜Ÿå·´å…¹æ ¹æ®ä¸šåŠ¡éœ€æ±‚ä¼šè®¡ç®—ç›¸åº”çš„è´¹ç”¨ã€‚è¿™å°±è¦æ±‚è®¢å•ç³»ç»Ÿå¿…é¡»è€ƒè™‘åˆ°è¿™äº›è°ƒæ–™çš„éƒ¨åˆ†ã€‚ ç„¶åæˆ‘ä»¬å°±çœ‹åˆ°ä»–ä»¬çš„ç¬¬ä¸€ä¸ªå°è¯•è®¾è®¡ï¼š æ˜¯ä¸æ˜¯æœ‰ä¸€ç§çŠ¯äº†å¯†é›†ææƒ§ç—‡çš„æ„Ÿè§‰ï¼Œæ•´å®Œå…¨å°±æ˜¯â€œç±»çˆ†ç‚¸â€ã€‚ é‚£ä¹ˆæˆ‘ä»¬åˆ†æä¸€ä¸‹ï¼Œè¿™ç§è®¾è®¡æ–¹å¼è¿åäº†ä»€ä¹ˆè®¾è®¡åŸåˆ™?æ²¡é”™ï¼Œè¿åäº†ä»¥ä¸‹ä¸¤ä¸ªåŸåˆ™: ç¬¬äºŒè®¾è®¡åŸåˆ™ é’ˆå¯¹äºæ¥å£ç¼–ç¨‹ï¼Œä¸é’ˆå¯¹å®ç°ç¼–ç¨‹ ç¬¬ä¸‰è®¾è®¡åŸåˆ™ å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿ é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆä¿®æ”¹è¿™ä¸ªè®¾è®¡å‘¢ï¼Ÿ åˆ©ç”¨ç»§æ‰¿å¯¹Beverageç±»è¿›è¡Œæ”¹é€  é¦–å…ˆï¼Œæˆ‘ä»¬è€ƒè™‘å¯¹åŸºç±»Beverageç±»è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬æ ¹æ®å‰é¢â€œç±»çˆ†ç‚¸â€è¿›è¡Œåˆ†æã€‚ä¸»è¦é¥®æ–™åŒ…å«å„ç§è°ƒæ–™ï¼ˆç‰›å¥¶ï¼Œè±†æµ†ï¼Œæ‘©å¡ï¼Œå¥¶æ³¡ã€‚ã€‚ã€‚ã€‚ï¼‰ã€‚ æ‰€ä»¥ä¿®æ”¹åçš„Beverageç±»çš„ç»“æ„å¦‚ä¸‹ï¼š Beverageç±»å…·ä½“å®ç°å¦‚ä¸‹ï¼š public class Beverage { protected String description;//é¥®æ–™ç®€ä»‹ protected boolean milk=false;//æ˜¯å¦æœ‰ç‰›å¥¶ protected boolean soy=false;//æ˜¯å¦æœ‰è±†æµ† protected boolean cocha=false;//æ˜¯å¦æœ‰æ‘©å¡ protected boolean whip=false;//æ˜¯å¦æœ‰å¥¶æ³¡ protected double milkCost=1.01;//ç‰›å¥¶ä»·æ ¼ protected double soyCost=1.03;//è±†æµ†ä»·æ ¼ protected double cochaCost=2.23;//æ‘©å¡ä»·æ ¼ protected double whipCost=0.89;//å¥¶æ³¡ä»·æ ¼ public String getDescription() { return description; } public void setDescription(String description) { this.description = description; } public boolean hasMilk() { return milk; } public void setMilk(boolean milk) { this.milk = milk; } public boolean hasSoy() { return soy; } public void setSoy(boolean soy) { this.soy = soy; } public boolean hasCocha() { return cocha; } public void setCocha(boolean cocha) { this.cocha = cocha; } public boolean hasWhip() { return whip; } public void setWhip(boolean whip) { this.whip = whip; } public double getCochaCost() { return cochaCost; } public void setCochaCost(double cochaCost) { this.cochaCost = cochaCost; } public double getWhipCost() { return whipCost; } public void setWhipCost(double whipCost) { this.whipCost = whipCost; } public double cost(){ double condiments=0.0; if(hasMilk()){//æ˜¯å¦éœ€è¦ç‰›å¥¶ condiments+=milkCost; } if(hasSoy()){//æ˜¯å¦éœ€è¦è±†æµ† condiments+=soyCost; } if(hasCocha()){//æ˜¯å¦éœ€è¦æ‘©å¡ condiments+=cochaCost; } if(hasWhip()){//æ˜¯å¦éœ€è¦å¥¶æ³¡ condiments+=whipCost; } return condiments; } } å®ç°å…¶ä¸­ä¸€ä¸ªå­ç±»DarkRoastï¼š public class DarkRoast extends Beverage{ public DarkRoast(){ description=\"Most Excellent Dark Roast!\"; } public double cost(){ return 1.99+super.cost(); } } çœ‹èµ·æ¥å¾ˆå®Œç¾ï¼Œä¹Ÿèƒ½æ»¡è¶³ç°æœ‰çš„ä¸šåŠ¡éœ€æ±‚ï¼Œä½†æ˜¯ä»”ç»†æ€è€ƒä¸€ä¸‹ï¼ŒçœŸçš„è¿™æ ·è®¾è®¡ä¸ä¼šå‡ºé”™ï¼Ÿ å›ç­”è‚¯å®šæ˜¯ä¼šå‡ºé”™ã€‚ ç¬¬ä¸€ï¼Œä¸€æ—¦è°ƒæ–™çš„ä»·æ ¼å‘ç”Ÿå˜åŒ–ï¼Œä¼šå¯¼è‡´æˆ‘ä»¬é˜ŸåŸæœ‰ä»£ç è¿›è¡Œå¤§æ”¹ã€‚ ç¬¬äºŒï¼Œä¸€æ—¦å‡ºç°æ–°çš„è°ƒæ–™ï¼Œæˆ‘ä»¬å°±éœ€è¦åŠ ä¸Šæ–°çš„æ–¹æ³•ï¼Œå¹¶éœ€è¦æ”¹å˜è¶…ç±»Beverageç±»ä¸­costï¼ˆï¼‰æ–¹æ³•ã€‚ ç¬¬ä¸‰ï¼Œå¦‚æœæ˜Ÿå·´å…¹å’–å•¡ç ”å‘æ–°çš„é¥®æ–™ã€‚å¯¹äºè¿™äº›é¥®æ–™è€Œè¨€ï¼ŒæŸäº›è°ƒæ–™å¯èƒ½å¹¶ä¸åˆé€‚ï¼Œä½†æ˜¯å­ç±»ä»ç„¶ä¼šç»§æ‰¿é‚£äº›æœ¬å°±ä¸åˆé€‚çš„æ–¹æ³•ï¼Œä¾‹å¦‚æˆ‘å°±æƒ³è¦ä¸€æ¯æ°´ï¼ŒåŠ å¥¶æ³¡ï¼ˆhasWhipï¼‰å°±ä¸åˆé€‚ã€‚ ç¬¬å››ï¼Œå¦‚æœç”¨æˆ·éœ€è¦åŒå€çš„æ‘©å¡å’–å•¡ï¼Œåˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ å¼€æ”¾-å…³é—­åŸåˆ™ åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡ºæœ€é‡è¦çš„è®¾è®¡åŸåˆ™ä¹‹ä¸€ï¼š ç¬¬äº”è®¾è®¡åŸåˆ™ ç±»åº”è¯¥å¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ é‚£ä¹ˆä»€ä¹ˆæ˜¯å¼€æ”¾ï¼Œä»€ä¹ˆåˆæ˜¯å…³é—­ï¼Ÿå¼€æ”¾å°±æ˜¯å…è®¸ä½ ä½¿ç”¨ä»»ä½•è¡Œä¸ºæ¥æ‹“å±•ç±»ï¼Œå¦‚æœéœ€æ±‚æ›´æ”¹ï¼ˆè¿™æ˜¯æ— æ³•é¿å…çš„ï¼‰ï¼Œå°±å¯ä»¥è¿›è¡Œæ‹“å±•ï¼å…³é—­åœ¨äºæˆ‘ä»¬èŠ±è´¹å¾ˆå¤šæ—¶é—´å®Œæˆå¼€å‘ï¼Œå¹¶ä¸”å·²ç»æµ‹è¯•å‘å¸ƒï¼Œé’ˆå¯¹åç»­æ›´æ”¹ï¼Œæˆ‘ä»¬å¿…é¡»å…³é—­åŸæœ‰ä»£ç é˜²æ­¢è¢«ä¿®æ”¹ï¼Œé¿å…é€ æˆå·²ç»æµ‹è¯•å‘å¸ƒçš„æºç äº§ç”Ÿæ–°çš„bugã€‚ ç»¼åˆä¸Šè¿°è¯´æ³•ï¼Œæˆ‘ä»¬çš„ç›®æ ‡åœ¨äºå…è®¸ç±»æ‹“å±•ï¼Œå¹¶ä¸”åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥æ­é…æ–°çš„è¡Œä¸ºã€‚å¦‚æœèƒ½å®ç°è¿™æ ·çš„ç›®æ ‡ï¼Œå¸¦æ¥çš„å¥½å¤„å°†ç›¸å½“å¯è§‚ã€‚åœ¨äºä»£ç ä¼šå…·å¤‡å¼¹æ€§æ¥åº”å¯¹éœ€æ±‚æ”¹å˜ï¼Œå¯ä»¥æ¥å—å¢åŠ æ–°çš„åŠŸèƒ½ç”¨æ¥å®ç°æ”¹å˜çš„éœ€æ±‚ã€‚æ²¡é”™ï¼Œè¿™å°±æ˜¯æ‹“å±•å¼€æ”¾ï¼Œä¿®æ”¹å…³é—­ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰å¯ä»¥å‚ç…§çš„å®ä¾‹å¯ä»¥åˆ†æå‘¢ï¼Ÿæœ‰ï¼Œå°±åœ¨ç¬¬äºŒç¯‡æˆ‘ä»¬ä»‹ç»è§‚å¯Ÿè€…æ¨¡å¼æ—¶ï¼Œæˆ‘ä»¬ä»‹ç»åˆ°å¯ä»¥é€šè¿‡å¢åŠ æ–°çš„è§‚å¯Ÿè€…ç”¨æ¥æ‹“å±•ä¸»é¢˜ï¼Œå¹¶ä¸”æ— éœ€å‘åŸä¸»é¢˜è¿›è¡Œä¿®æ”¹ã€‚ æˆ‘ä»¬æ˜¯å¦éœ€è¦æ¯ä¸ªæ¨¡å—éƒ½è®¾è®¡æˆå¼€æ”¾--å…³é—­åŸåˆ™ï¼Ÿä¸ç”¨ï¼Œä¹Ÿå¾ˆéš¾åŠåˆ°ï¼ˆè¿™æ ·çš„äººæˆ‘ä»¬ç§°ä¸ºâ€œä¸ç”¨è®¾è®¡æ¨¡å¼ä¼šæ­»ç—…â€ï¼‰ã€‚å› ä¸ºæƒ³è¦å®Œå…¨ç¬¦åˆå¼€æ”¾-å…³é—­åŸåˆ™ï¼Œä¼šå¼•å…¥å¤§é‡çš„æŠ½è±¡å±‚ï¼Œå¢åŠ åŸæœ‰ä»£ç çš„å¤æ‚åº¦ã€‚æˆ‘ä»¬åº”è¯¥åŒºåˆ†è®¾è®¡ä¸­å¯èƒ½æ”¹å˜çš„éƒ¨åˆ†å’Œä¸æ”¹å˜çš„éƒ¨åˆ†ï¼ˆç¬¬ä¸€è®¾è®¡åŸåˆ™ï¼‰ï¼Œé’ˆå¯¹æ”¹å˜éƒ¨åˆ†ä½¿ç”¨å¼€æ”¾--å…³é—­åŸåˆ™ã€‚ è£…é¥°æ¨¡å¼ è¿™é‡Œï¼Œå°±åˆ°äº†å¼€æ”¾--å…³é—­åŸåˆ™çš„è¿ç”¨æ¨¡å¼-----è£…é¥°è€…æ¨¡å¼ã€‚é¦–å…ˆæˆ‘ä»¬è¿˜æ˜¯ä»æ˜Ÿå·´å…¹å’–å•¡çš„æ¡ˆä¾‹æ¥åšä¸€ä¸ªç®€å•çš„åˆ†æã€‚ åˆ†æä¹‹å‰ä¸¤ä¸ªç‰ˆæœ¬ï¼ˆç±»çˆ†ç‚¸å’Œç»§æ‰¿å¤§æ³•ï¼‰çš„å®ç°æ–¹å¼ï¼Œå¹¶ä¸èƒ½é€‚ç”¨äºæ‰€æœ‰çš„å­ç±»ã€‚ è¿™å°±éœ€è¦ä¸€ä¸ªæ–°çš„è®¾è®¡æ€è·¯ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä»¥é¥®æ–™ä¸ºä¸»ï¼Œç„¶åè¿è¡Œçš„æ—¶å€™ä»¥é¥®æ–™æ¥â€œè£…é¥°â€é¥®æ–™ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚æœå½±è™éœ€è¦æ‘©å¡å’Œå¥¶æ³¡æ·±ç„™å’–å•¡ï¼Œé‚£ä¹ˆè¦åšçš„æ˜¯ï¼š æ‹¿ä¸€ä¸ªæ·±ç„™å’–å•¡ï¼ˆDarkRosatï¼‰å¯¹è±¡ ä»¥æ‘©å¡ï¼ˆMochaï¼‰å¯¹è±¡è£…é¥°å®ƒ ä»¥å¥¶æ³¡ï¼ˆWhipï¼‰å¯¹è±¡è£…é¥°å®ƒ è°ƒç”¨costï¼ˆï¼‰æ–¹æ³•ï¼Œå¹¶ä¾èµ–å§”æ‰˜ï¼ˆdelegateï¼‰å°†è°ƒæ–™çš„ä»·é’±åŠ ä¸Šå»ã€‚ å…·ä½“çš„å®ç°æˆ‘ä»¬ç”¨ä¸€å¼ å›¾æ¥å±•ç¤º é¦–å…ˆæˆ‘ä»¬æ„å»ºDarkRoastå¯¹è±¡ å‡å¦‚é¡¾å®¢éœ€è¦æ‘©å¡ï¼ˆMochaï¼‰ï¼Œå†å»ºç«‹ä¸€ä¸ªMochaå¯¹è±¡ï¼Œå¹¶ç”¨DarkRoastå¯¹è±¡åŒ…èµ·æ¥ã€‚ å¦‚æœé¡¾å®¢ä¹Ÿæƒ³è¦å¥¶æ³¡ï¼ˆWhipï¼‰,å°±å»ºç«‹ä¸€ä¸ªWhipè£…é¥°è€…ï¼Œå¹¶å°†å®ƒç”¨Mochaå¯¹è±¡åŒ…èµ·æ¥ã€‚ æœ€åè¿ç®—å®¢æˆ·çš„è´¦å•çš„æ—¶å€™ï¼Œé€šè¿‡æœ€å¤–å±‚çš„è£…é¥°è€…Whipçš„costï¼ˆï¼‰å°±å¯ä»¥åŠå¾—åˆ°ã€‚Whipçš„costï¼ˆï¼‰ä¼šå§”æ‰˜ä»–çš„è£…é¥°å¯¹è±¡ï¼ˆMochaï¼‰è®¡ç®—å‡ºä»·æ ¼ï¼Œå†åŠ ä¸Šå¥¶æ³¡ï¼ˆWhipï¼‰çš„ä»·æ ¼ã€‚ é€šè¿‡å¯¹æ˜Ÿå·´å…¹å’–å•¡çš„è®¾è®¡æ–¹æ¡ˆåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ‰€æœ‰çš„è£…é¥°ç±»éƒ½å…·å¤‡ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š è£…é¥°è€…å’Œè¢«è£…é¥°å¯¹è±¡æœ‰ç›¸åŒçš„è¶…ç±»å‹ã€‚ ä½ å¯ä»¥ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªè£…é¥°è€…åŒ…è£…ä¸€ä¸ªå¯¹è±¡ã€‚ æ—¢ç„¶è£…é¥°è€…å’Œè¢«è£…é¥°å¯¹è±¡æœ‰ç›¸åŒçš„è¶…ç±»å‹ï¼Œæ‰€ä»¥åœ¨ä»»ä½•éœ€è¦åŸå§‹å¯¹è±¡ï¼ˆè¢«åŒ…è£…çš„ï¼‰çš„åœºåˆï¼Œå¯ä»¥ç”¨è£…é¥°è¿‡çš„å¯¹è±¡ä»£æ›¿å®ƒã€‚ è£…é¥°è€…å¯ä»¥åœ¨æ‰€å§”æ‰˜è¢«è£…é¥°è€…çš„è¡Œä¸ºä¹‹å‰ä¸/æˆ–ä¹‹åï¼ŒåŠ ä¸Šè‡ªå·±çš„è¡Œä¸ºï¼Œä»¥è¾¾åˆ°ç‰¹å®šçš„ç›®çš„ã€‚ å¯¹è±¡å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¢«è£…é¥°ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ã€ä¸é™é‡åœ°ç”¨ä½ å–œæ¬¢çš„è£…é¥°è€…æ¥è£…é¥°å¯¹è±¡ ä»€ä¹ˆæ˜¯è£…é¥°æ¨¡å¼å‘¢ï¼Ÿæˆ‘ä»¬é¦–å…ˆæ¥çœ‹çœ‹è£…é¥°æ¨¡å¼çš„å®šä¹‰ï¼š è£…é¥°è€…æ¨¡å¼åŠ¨æ€åœ°å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šã€‚ è‹¥è¦æ‰©å±•åŠŸèƒ½ï¼Œè£…é¥°è€…æä¾›äº†æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§ çš„æ›¿ä»£æ–¹æ¡ˆã€‚ å®šä¹‰è™½ç„¶å·²ç»å®šä¹‰äº†è£…é¥°è€…æ¨¡å¼çš„â€œè§’è‰²â€ï¼Œä½†æ˜¯æœªè¯´æ˜æ€ä¹ˆåœ¨æˆ‘ä»¬çš„å®ç°ä¸­å¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚æˆ‘ä»¬ç»§ç»­åœ¨æ˜Ÿå·´å…¹å’–å•¡ä¸­æ¥ç†Ÿæ‚‰ç›¸å…³çš„æ“ä½œã€‚ å…¶ä¸­è£…é¥°è€…å±‚çº§å¯ä»¥æ— é™å‘å±•ä¸‹å»ï¼Œä¸æ˜¯å¦‚å›¾ä¸­ä¸€èˆ¬ä¸¤å±‚å…³ç³»ã€‚å¹¶ä¸”ç»„ä»¶ä¹Ÿå¹¶éåªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥å­˜åœ¨å¤šä¸ªã€‚ ç°åœ¨æˆ‘ä»¬å°±åœ¨æ˜Ÿå·´å…¹å’–å•¡é‡Œè¿ç”¨è£…é¥°è€…æ¨¡å¼ï¼š åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬é˜Ÿè£…é¥°è€…æ¨¡å¼å·²ç»æœ‰äº†ä¸€ä¸ªåŸºæœ¬çš„è®¤è¯†ã€‚é‚£ä¹ˆæˆ‘ä»¬å·²ç»è§£å†³äº†ä¸Šé¢æåˆ°çš„å››ä¸ªé—®é¢˜ï¼š ç¬¬ä¸€ï¼Œä¸€æ—¦è°ƒæ–™çš„ä»·æ ¼å‘ç”Ÿå˜åŒ–ï¼Œä¼šå¯¼è‡´æˆ‘ä»¬é˜ŸåŸæœ‰ä»£ç è¿›è¡Œå¤§æ”¹ã€‚ ç¬¬äºŒï¼Œä¸€æ—¦å‡ºç°æ–°çš„è°ƒæ–™ï¼Œæˆ‘ä»¬å°±éœ€è¦åŠ ä¸Šæ–°çš„æ–¹æ³•ï¼Œå¹¶éœ€è¦æ”¹å˜è¶…ç±»Beverageç±»ä¸­costï¼ˆï¼‰æ–¹æ³•ã€‚ ç¬¬ä¸‰ï¼Œå¦‚æœæ˜Ÿå·´å…¹å’–å•¡ç ”å‘æ–°çš„é¥®æ–™ã€‚å¯¹äºè¿™äº›é¥®æ–™è€Œè¨€ï¼ŒæŸäº›è°ƒæ–™å¯èƒ½å¹¶ä¸åˆé€‚ï¼Œä½†æ˜¯å­ç±»ä»ç„¶ä¼šç»§æ‰¿é‚£äº›æœ¬å°±ä¸åˆé€‚çš„æ–¹æ³•ï¼Œä¾‹å¦‚æˆ‘å°±æƒ³è¦ä¸€æ¯æ°´ï¼ŒåŠ å¥¶æ³¡ï¼ˆhasWhipï¼‰å°±ä¸åˆé€‚ã€‚ ç¬¬å››ï¼Œå¦‚æœç”¨æˆ·éœ€è¦åŒå€çš„æ‘©å¡å’–å•¡ï¼Œåˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ é‚£ä¹ˆæ ¹æ®ç¬¬å››ä¸ªé—®é¢˜ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦åŒå€æ‘©å¡è±†æµ†å¥¶æ³¡æ‹¿é“å’–å•¡æ—¶ï¼Œè¯¥å¦‚ä½•å»è¿ç®—è´¦å•å‘¢ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæŠŠå‰é¢çš„æ·±åº¦çƒ˜ç„™æ‘©å¡å’–å•¡çš„è®¾è®¡å›¾æ”¾åœ¨è¿™é‡Œã€‚ ç„¶åæˆ‘ä»¬åªéœ€è¦å°†Mochaçš„è£…é¥°è€…åŠ ä¸€ï¼Œå³å¯ å®ç°æ˜Ÿå·´å…¹å’–å•¡ä»£ç  å‰é¢å·²ç»æŠŠè®¾è®¡æ€æƒ³éƒ½è®¾è®¡å‡ºæ¥äº†ï¼Œæ¥ä¸‹æ¥æ˜¯å°†å…¶å…·ä½“å®ç°äº†ã€‚é¦–å…ˆä»Beverageç±»ä¸‹æ‰‹ public abstract class Beverage1 { String description=\"Unknown Beverage\"; public String getDescription(){ return description; } public abstract double cost(); } Beverageç±»éå¸¸ç®€å•ï¼Œç„¶åå†å®ç°Condimentï¼ˆè°ƒæ–™ç±»ï¼‰ï¼Œè¯¥ç±»ä¸ºæŠ½è±¡ç±»ï¼Œä¹Ÿä¸ºè£…é¥°è€…ç±» public abstract class CondimentDecorator extends Beverage1{ //æ‰€æœ‰çš„è°ƒæ–™è£…é¥°è€…éƒ½å¿…é¡»é‡æ–°å®ç° getDescription()æ–¹æ³•ã€‚ public abstract String getDescription(); } å‰é¢å·²ç»æœ‰äº†é¥®æ–™çš„åŸºç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥å®ç°ä¸€äº›å…·ä½“çš„é¥®æ–™ç±»ã€‚é¦–å…ˆä»æµ“ç¼©å’–å•¡ï¼ˆEspressoï¼‰ï¼‰å¼€å§‹ï¼Œè¿™é‡Œéœ€è¦é‡å†™cost()æ–¹æ³•å’ŒgetDescriptionï¼ˆï¼‰æ–¹æ³• public class Espresso extends Beverage1{ public Espresso(){ //ä¸ºäº†è¦è®¾ç½®é¥®æ–™çš„æè¿°ï¼Œæˆ‘ ä»¬å†™äº†ä¸€ä¸ªæ„é€ å™¨ã€‚è®°ä½ï¼Œ descriptionå®ä¾‹å˜é‡ç»§æ‰¿è‡ªBeverage1 description=\"Espresso\"; } public double cost() { //æœ€åï¼Œéœ€è¦è®¡ç®—Espressoçš„ä»·é’±ï¼Œç°åœ¨ä¸éœ€è¦ç®¡è°ƒæ–™çš„ä»·é’±ï¼Œç›´æ¥æŠŠEspressoçš„ä»·æ ¼$1.99è¿”å›å³å¯ã€‚ return 1.99; } } å†å®ç°ä¸€ä¸ªç±»ä¼¼çš„é¥®æ–™HouseBlendç±»ã€‚ public class HouseBlend extends Beverage1{ public HouseBlend(){ description=\"HouseBlend\"; } public double cost() { return 0.89; } } é‡æ–°è®¾è®¡DarkRoast1 public class DarkRoast1 extends Beverage1{ public DarkRoast1(){ description=\"DarkRoast1\"; } public double cost() { return 0.99; } } æ¥ä¸‹æ¥å°±æ˜¯è°ƒæ–™çš„ä»£ç ï¼Œæˆ‘ä»¬ä¸€å¼€å§‹å·²ç»å®ç°äº†æŠ½è±¡ç»„ä»¶ç±»ï¼ˆBeverageï¼‰ï¼Œæœ‰äº†å…·ä½“çš„ç»„ä»¶ï¼ˆHouseBlendï¼‰ï¼Œä¹Ÿæœ‰äº†å·²ç»å®ŒæˆæŠ½è±¡è£…é¥°è€…ï¼ˆCondimentDecoratorï¼‰ã€‚ç°åœ¨åªéœ€è¦å®ç°å…·ä½“çš„è£…é¥°è€…ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆå®Œæˆæ‘©å¡ï¼ˆMochaï¼‰ public class Mocha extends CondimentDecorator{ /** * è¦è®©Mochaèƒ½å¤Ÿå¼•ç”¨ä¸€ä¸ªBeverageï¼Œé‡‡ç”¨ä»¥ä¸‹åšæ³• * 1.ç”¨ä¸€ä¸ªå®ä¾‹è®°å½•é¥®æ–™ï¼Œä¹Ÿå°±æ˜¯è¢«è£…é¥°è€… * 2.æƒ³åŠæ³•è®©è¢«è£…é¥°è€…ï¼ˆé¥®æ–™ï¼‰è¢«è®°å½•åœ¨å®ä¾‹å˜é‡ä¸­ã€‚è¿™é‡Œçš„åšæ³•æ˜¯ï¼š * æŠŠé¥®æ–™å½“ä½œæ„é€ å™¨çš„å‚æ•°ï¼Œå†ç”±æ„é€ å™¨å°†æ­¤é¥®æ–™è®°å½•åœ¨å®ä¾‹å˜é‡ä¸­ */ Beverage1 beverage; public Mocha(Beverage1 beverage) { this.beverage=beverage; } public String getDescription() { //è¿™é‡Œå°†è°ƒæ–™ä¹Ÿä½“ç°åœ¨ç›¸å…³å‚æ•°ä¸­ return beverage.getDescription()+\",Mocha\"; } /** * æƒ³è¦è®¡ç®—å¸¦æ‘©å¡çš„é¥®æ–™çš„ä»·æ ¼ï¼Œéœ€è¦è°ƒç”¨å§”æ‰˜ç»™è¢«è£…é¥°è€…ï¼Œä»¥è®¡ç®—ä»·æ ¼ï¼Œ * ç„¶ååŠ ä¸ŠMochaçš„ä»·æ ¼ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚ */ public double cost() { return 0.21+beverage.cost(); } } è¿˜æœ‰å¥¶æ³¡ï¼ˆWhipï¼‰ç±» public class Whip extends CondimentDecorator{ /** * è¦è®©Whipèƒ½å¤Ÿå¼•ç”¨ä¸€ä¸ªBeverageï¼Œé‡‡ç”¨ä»¥ä¸‹åšæ³• * 1.ç”¨ä¸€ä¸ªå®ä¾‹è®°å½•é¥®æ–™ï¼Œä¹Ÿå°±æ˜¯è¢«è£…é¥°è€… * 2.æƒ³åŠæ³•è®©è¢«è£…é¥°è€…ï¼ˆé¥®æ–™ï¼‰è¢«è®°å½•åœ¨å®ä¾‹å˜é‡ä¸­ã€‚è¿™é‡Œçš„åšæ³•æ˜¯ï¼š * æŠŠé¥®æ–™å½“ä½œæ„é€ å™¨çš„å‚æ•°ï¼Œå†ç”±æ„é€ å™¨å°†æ­¤é¥®æ–™è®°å½•åœ¨å®ä¾‹å˜é‡ä¸­ */ Beverage1 beverage; public Whip(Beverage1 beverage) { this.beverage=beverage; } public String getDescription() { //è¿™é‡Œå°†è°ƒæ–™ä¹Ÿä½“ç°åœ¨ç›¸å…³å‚æ•°ä¸­ return beverage.getDescription()+\",Whip\"; } /** * æƒ³è¦è®¡ç®—å¸¦å¥¶æ³¡çš„é¥®æ–™çš„ä»·æ ¼ï¼Œéœ€è¦è°ƒç”¨å§”æ‰˜ç»™è¢«è£…é¥°è€…ï¼Œä»¥è®¡ç®—ä»·æ ¼ï¼Œ * ç„¶ååŠ ä¸ŠWhipçš„ä»·æ ¼ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚ */ public double cost() { return 0.22+beverage.cost(); } } è±†æµ†Soyç±» public class Soy extends CondimentDecorator{ /** * è¦è®©Soyèƒ½å¤Ÿå¼•ç”¨ä¸€ä¸ªBeverageï¼Œé‡‡ç”¨ä»¥ä¸‹åšæ³• * 1.ç”¨ä¸€ä¸ªå®ä¾‹è®°å½•é¥®æ–™ï¼Œä¹Ÿå°±æ˜¯è¢«è£…é¥°è€… * 2.æƒ³åŠæ³•è®©è¢«è£…é¥°è€…ï¼ˆé¥®æ–™ï¼‰è¢«è®°å½•åœ¨å®ä¾‹å˜é‡ä¸­ã€‚è¿™é‡Œçš„åšæ³•æ˜¯ï¼š * æŠŠé¥®æ–™å½“ä½œæ„é€ å™¨çš„å‚æ•°ï¼Œå†ç”±æ„é€ å™¨å°†æ­¤é¥®æ–™è®°å½•åœ¨å®ä¾‹å˜é‡ä¸­ */ Beverage1 beverage; public Soy(Beverage1 beverage) { this.beverage=beverage; } public String getDescription() { //è¿™é‡Œå°†è°ƒæ–™ä¹Ÿä½“ç°åœ¨ç›¸å…³å‚æ•°ä¸­ return beverage.getDescription()+\",Soy\"; } /** * æƒ³è¦è®¡ç®—å¸¦è±†æµ†çš„é¥®æ–™çš„ä»·æ ¼ï¼Œéœ€è¦è°ƒç”¨å§”æ‰˜ç»™è¢«è£…é¥°è€…ï¼Œä»¥è®¡ç®—ä»·æ ¼ï¼Œ * ç„¶ååŠ ä¸ŠSoyçš„ä»·æ ¼ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚ */ public double cost() { return 0.21+beverage.cost(); } } æ¥ä¸‹æ¥å°±æ˜¯è°ƒç”¨æµ‹è¯•ç±»ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š public class StarbuzzCoffe { public static void main(String[] args) { //è®¢è´­ä¸€æ¯Espressoï¼Œä¸éœ€è¦è°ƒæ–™ï¼Œæ‰“å°ä»–çš„ä»·æ ¼å’Œæè¿° Beverage1 beverage=new Espresso(); System.out.println(beverage.getDescription()+\"$\" +beverage.cost()); //å¼€å§‹è£…é¥°åŒå€æ‘©å¡+å¥¶æ³¡å’–å•¡ Beverage1 beverage2=new DarkRoast1(); beverage2=new Mocha(beverage2); beverage2=new Mocha(beverage2); beverage2=new Whip(beverage2); System.out.println(beverage2.getDescription()+\"$\" +beverage2.cost()); // Beverage1 beverage3=new HouseBlend(); beverage3=new Soy(beverage3); beverage3=new Mocha(beverage3); beverage3=new Whip(beverage3); System.out.println(beverage3.getDescription()+\"$\" +beverage3.cost()); } } è¿è¡Œç»“æœï¼š åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å®Œæˆè£…é¥°è€…æ¨¡å¼å¯¹äºæ˜Ÿå·´å…¹å’–å•¡çš„æ”¹é€ ã€‚ Javaä¸­çš„çœŸå®è£…é¥°è€… å‰é¢å·²ç»ç ”ç©¶äº†è£…é¥°è€…æ¨¡å¼çš„åŸç†å’Œå®ç°æ–¹å¼ï¼Œé‚£ä¹ˆåœ¨JAVAè¯­è¨€æœ¬èº«æ˜¯å¦æœ‰è£…é¥°è€…æ¨¡å¼çš„ä½¿ç”¨èŒƒä¾‹å‘¢ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šæœ‰çš„ï¼Œé‚£å°±æ˜¯I/Oæµã€‚ ç¬¬ä¸€æ¬¡æŸ¥é˜…I/Oæºç ï¼Œéƒ½ä¼šè§‰å¾—ç±»çœŸå¤š,è€Œä¸”ä¸€ç¯åµŒä¸€ç¯ï¼Œé˜…è¯»èµ·æ¥ä¼šéå¸¸éº»çƒ¦ã€‚ä½†æ˜¯åªè¦æ¸…æ¥šI/Oæ˜¯æ ¹æ®è£…é¥°è€…æ¨¡å¼è®¾è®¡ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¸€ä¸ªèŒƒä¾‹ï¼š åˆ†æä¸€ä¸‹,å…¶ä¸­BufferedInputStreamåŠLineNumberInputStreaméƒ½æ‰©å±•è‡ª FilterInputStreamï¼Œè€ŒFilterInputStreamæ˜¯ä¸€ä¸ªæŠ½è±¡çš„è£…é¥°ç±»ã€‚è¿™æ ·çœ‹æœ‰äº›æŠ½è±¡ï¼Œæˆ‘ä»¬å°†å…¶ä¸­çš„ç±»æŒ‰ç…§è£…é¥°è€…æ¨¡å¼è¿›è¡Œç»“æ„åŒ–ï¼Œæ–¹ä¾¿ç†è§£ã€‚ æˆ‘ä»¬å‘ç°ï¼Œå’Œæ˜Ÿå·´å…¹çš„è®¾è®¡ç›¸æ¯”ï¼Œjava.ioå…¶å®å¹¶æ²¡æœ‰å¤šå¤§çš„å·®å¼‚ã€‚ä½†æ˜¯ä»java.ioæµæˆ‘ä»¬ä¹Ÿä¼šå‘ç°è£…é¥°è€…æ¨¡å¼ä¸€ä¸ªéå¸¸ä¸¥é‡çš„\"ç¼ºç‚¹\"ï¼šä½¿ç”¨è£…é¥°è€…æ¨¡å¼ï¼Œå¸¸å¸¸ä¼šé€ æˆè®¾è®¡ä¸­æœ‰å¤§é‡çš„å°ç±»ï¼Œæ•°é‡è¿˜éå¸¸å¤šï¼Œè¿™å¯¹äºå­¦ä¹ APIçš„ç¨‹åºå‘˜æ¥è¯´å°±å¢åŠ äº†å­¦ä¹ éš¾åº¦å’Œå­¦ä¹ æˆæœ¬ã€‚ä½†æ˜¯ï¼Œæ‡‚å¾—è£…é¥°è€…æ¨¡å¼ä»¥åä¼šéå¸¸å®¹æ˜“ç†è§£å’Œè®¾è®¡ç›¸å…³çš„ç±»ã€‚ è®¾è®¡è‡ªå·±çš„IOç±» åœ¨ç†è§£è£…é¥°è€…æ¨¡å¼å’Œjava.ioçš„è®¾è®¡åï¼Œæˆ‘ä»¬å°†ç£¨ç‚¼ä¸‹è‡ªå·±çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œæ²¡é”™ï¼Œå°±æ˜¯è‡ªå·±è®¾è®¡ä¸€ä¸ªJava I/Oè£…é¥°è€…ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼š ç¼–å†™ä¸€ä¸ªè£…é¥°è€…ï¼ŒæŠŠè¾“å…¥æµå†…çš„æ‰€æœ‰å¤§å†™å­—ç¬¦è½¬æˆå°å†™ã€‚ä¸¾ä¾‹ï¼šå½“è¯» å–â€œ ASDFGHJKLQWERTYUIOPZXCVBNMâ€ï¼Œè£…é¥°è€…ä¼šå°†å®ƒè½¬æˆâ€œ asdghjklqwertyuiopzxcvbnmâ€ã€‚å…·ä½“çš„åŠæ³•åœ¨äºæ‰©å±•FilterInputStreamç±»ï¼Œå¹¶è¦†ç›–read()æ–¹æ³•å°±è¡Œäº†ã€‚ public class LowerCaseInputStream extends FilterInputStream{ public LowerCaseInputStream(InputStream inputStream){ super(inputStream); } public int read() throws IOException { int c=super.read(); //åˆ¤æ–­ç›¸å…³çš„å­—ç¬¦æ˜¯å¦ä¸ºå¤§å†™ï¼Œå¹¶è½¬ä¸ºå°å†™ return (c==-1?c:Character.toLowerCase((char)c)); } /** * *é’ˆå¯¹å­—ç¬¦æ•°ç»„è¿›è¡Œå¤§å†™è½¬å°å†™æ“ä½œ * @see java.io.FilterInputStream#read(byte[], int, int) */ public int read(byte[] b, int off, int len) throws IOException { int result=super.read(b,off,len); for(int i=off;iæ¥ä¸‹æ¥æˆ‘ä»¬æ„å»ºæµ‹è¯•ç±»InputTest public class InputTest { public static void main(String[] args) { int c; try { InputStream inputStream=new LowerCaseInputStream(new BufferedInputStream(new FileInputStream(\"test.txt\"))); while((c=inputStream.read())>=0){ System.out.print((char)c); } } catch (FileNotFoundException e) { // TODO Auto-generated catch block e.printStackTrace(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } å…¶ä¸­test.txtçš„å†…å®¹å¯ä»¥è‡ªè¡Œç¼–è¾‘ï¼Œæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æˆ‘çš„å†…å®¹åŸæ–‡ä¸ºï¼š è¿è¡Œç»“æœä¸ºï¼š 5.æ€»ç»“ è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†è£…é¥°è€…æ¨¡å¼çš„ç›¸å…³çŸ¥è¯†ç‚¹ã€‚æ€»ç»“ä¸€ä¸‹ï¼š ç¬¬äº”è®¾è®¡åŸåˆ™ ç±»åº”è¯¥å¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ è£…é¥°è€…æ¨¡å¼åŠ¨æ€åœ°å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šã€‚ è‹¥è¦æ‰©å±•åŠŸèƒ½ï¼Œè£…é¥°è€…æä¾›äº†æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§ çš„æ›¿ä»£æ–¹æ¡ˆã€‚ ç›¸åº”çš„èµ„æ–™å’Œä»£ç æ‰˜ç®¡åœ°å€https://github.com/jixiang52002/HFDesignPattern Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-04-12 15:58:12 "},"Head-First-è®¾è®¡æ¨¡å¼4------å·¥å‚æ–¹æ³•æ¨¡å¼.html":{"url":"Head-First-è®¾è®¡æ¨¡å¼4------å·¥å‚æ–¹æ³•æ¨¡å¼.html","title":"Head-First-è®¾è®¡æ¨¡å¼4----å·¥å‚æ–¹æ³•æ¨¡å¼","keywords":"","body":"æœ¬æ–‡å‚ç…§ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ å¯¹äºæ•´ä¸ªç³»åˆ—ï¼Œæˆ‘ä»¬æŒ‰ç…§è¿™æœ¬ä¹¦çš„è®¾è®¡é€»è¾‘ï¼Œä½¿ç”¨æƒ…æ™¯åˆ†æçš„æ–¹å¼æ¥æè¿°ï¼Œå¹¶ä¸”ç©¿æ’ä½¿ç”¨ä¸€äº›é—®é¢˜ï¼Œæ€»ç»“çš„æ–¹å¼æ¥è®²è¿°ã€‚å¹¶ä¸”æ‰€æœ‰çš„å¼€å‘æºç ï¼Œéƒ½ä¼šæ‰˜ç®¡åˆ°githubä¸Šã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jixiang52002/HFDesignPattern å›é¡¾ä¸Šä¸€ç¯‡æ–‡ç« è®²è§£äº†è®¾è®¡æ¨¡å¼ä¸­å¸¸ç”¨çš„ä¸€ç§æ¨¡å¼------è£…é¥°è€…æ¨¡å¼ã€‚å¹¶ç»“åˆæ˜Ÿå·´å…¹å’–å•¡è®¾è®¡è¿›è¡Œå®æˆ˜è§£æï¼Œå¹¶ä¸”ä»è‡ªå·±è®¾è®¡åˆ°JAVAè‡ªå¸¦è®¾è®¡æ¨¡å¼åšäº†è®²è§£ã€‚æƒ³è¦äº†è§£çš„æœ‹å‹å¯ä»¥å›å»å›çœ‹ä¸€ä¸‹ã€‚ æœ¬ç« å°†ç€é‡äºåœ¨å¼€å‘ä¸­æœ€å¸¸é‡åˆ°çš„åˆå§‹åŒ–çš„é—®é¢˜ï¼Œè®©ä½ ä¸ä¼šåœ¨newä¸€ä¸ªæ–°çš„å¯¹è±¡ä¸­æ„Ÿè§‰å¤´ç–¼ã€‚è™½ç„¶æœ¬ç« å–åæ˜¯å°†å·¥å‚æ¨¡å¼ï¼Œä½†æ˜¯è¿™é‡Œä¼šè®²è§£ä¸¤ä¸ªè®¾è®¡æ¨¡å¼ï¼Œåˆ†åˆ«ä¸ºå·¥å‚æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚è®¾è®¡æ¨¡å¼ã€‚æœ¬ç« å¯¹äºJAVAä¸­æŠ½è±¡ä¼šå¤§é‡è¿ç”¨åˆ°ï¼Œæœªäº†è§£è¿™æ–¹é¢çš„çŸ¥è¯†çš„æœ‹å‹å¯ä»¥å»æŸ¥é˜…ç›¸å…³çš„èµ„æ–™ã€‚ 1.å‰è¨€ ä½œä¸ºä¸€ä¸ªåˆæ ¼çš„JAVAå¼€å‘ç¨‹åºå‘˜ï¼Œæˆ‘ä»¬çŸ¥é“è¦å®ä¾‹åŒ–ä¸€ä¸ªç±»ä¸ºå¯¹è±¡ï¼Œæˆ‘ä»¬ä¼šåˆ©ç”¨ç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œä½¿ç”¨newè¿™ä¸ªå…³é”®å­—ã€‚æ¯”å¦‚ï¼š Duck duck=new MallardDuck(); è¿™é‡Œä½¿ç”¨æ¥å£çš„æ–¹å¼ä¸ºçš„ä½¿ä»£ç å…·å¤‡å¼¹æ€§ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦æ ¹æ®å±æ€§å€¼å»èµ‹å€¼ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·çš„è¡¨è¾¾ Duck duck; if(picnic) { duck=new MallardDuck(); }else if (hunting) { duck=new DecoyDuck(); }else if (inBathTub) { duck=new RubberDuck(); } è¿™é‡Œå¯¹äºDuckæœ‰ä¸€ç³»åˆ—çš„å®ç°ç±»ã€‚ä½†æ˜¯å…·ä½“ä½¿ç”¨å“ªä¸€ä¸ªç±»ï¼Œå´è¿˜éœ€è¦é€šè¿‡å±æ€§æ¡ä»¶æ¥å†³å®šã€‚ åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥æå‡ºé—®é¢˜ï¼šå¦‚æœè¿™éƒ¨åˆ†å±æ€§å‘ç”Ÿå¾ˆå¤§çš„å˜åŒ–ï¼Œç”šè‡³è¢«å–ä»£æ‰äº†ï¼Œæ˜¯å¦æˆ‘ä»¬å¯¹äºè¿™æ ·å—åˆ°å½±å“çš„ä»£ç ä¸éƒ½è¦åšç›¸å…³çš„æ“ä½œï¼Ÿé‚£è¿™ä¸å°±æ˜¯è¿èƒŒäº†å‰é¢æåˆ°çš„ä¸€ä¸ªæ¦‚å¿µè§£è€¦æ€§ã€‚è¿™æ®µä»£ç çš„è€¦åˆåº¦å°±éå¸¸é«˜ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šä½¿ç”¨â€œnewâ€åˆ°åº•æœ‰ä»€ä¹ˆä¸å¯¹åŠ²ï¼Ÿï¼ˆnewå¤§æ³•ç®€å•ç²—æš´å•Šï¼Œå°å§å§æœ€çˆ±å•Šï¼‰ å›ç­”ï¼šå‰é¢æåˆ°ä¸€ä¸ªæ¦‚å¿µâ€œè®¾è®¡åº”è¯¥å¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­â€ï¼Œnewå¤§æ³•æœ¬èº«æ²¡æœ‰é”™è¯¯ï¼Œæ¯•ç«ŸJAVAæœ€åŸºç¡€çš„ç»„æˆæ¶æ„ã€‚é—®é¢˜å°±æ˜¯ï¼Œè¿™é‡Œçš„æ–¹å¼æ²¡åšåˆ°æ‹“å±•ï¼Œä¹Ÿæ²¡æœ‰åšåˆ°å¯¹ä¿®æ”¹é—­ç¯ã€‚ åœ¨å¼€å§‹è¯´ä¼˜åŒ–çš„æ–¹å¼ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸€ä¸‹æ‹“å±•å’Œä¿®æ”¹ã€‚ åˆ°è¿™é‡Œï¼ŒDuckå°†é€€å‡ºèˆå° æ¥ä¸‹æ¥ï¼Œå°†ç”±PIZZAä¸Šå° çˆ±åƒçš„åƒè´§éƒ½ä¸ä¼šé™Œç”Ÿï¼Œç”Ÿäº§ä¸€ä»½æŠ«è¨éœ€è¦ç»è¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š å‡†å¤‡ï¼ˆprepareï¼‰ çƒ¤åˆ¶ ï¼ˆbakeï¼‰ åˆ‡ç‰‡ ï¼ˆcutï¼‰ è£…ç›˜ ï¼ˆboxï¼‰ ç”¨ä»£ç æ¥è¡¨ç¤ºåº”è¯¥æ˜¯å¦‚ä¸‹æ­¥éª¤ï¼š public Pizza orderPizza() { Pizza pizza=new Pizza(); pizza.prepare(); pizza.bake(); pizza.cut(); pizza.box(); return pizza; } ä½†æ˜¯æˆ‘ä»¬çŸ¥é“PIZZAæœ‰å¾ˆå¤šç§ç±»ï¼Œæ¯”å¦‚æ¦´è²é¦…ï¼Œå¥¥å°”è‰¯é¦…ï¼ŒèŠå£«é¦…ç­‰ï¼Œé‚£ä¸ºäº†èƒ½å¤Ÿé€‚åº”è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬å¯¹äºæºä»£ç éœ€è¦æ›´æ”¹ï¼š public Pizza orderPizza(String type) { Pizza pizza = null; if(type.equals(\"cheese\")) { pizza=new CheesePizza(); }else if (type.equals(\"greek\")) { pizza=new GreekPizza(); }else if (type.equals(\"pepperoni\")) { pizza=new PepperoniPizza(); } pizza.prepare(); pizza.bake(); pizza.cut(); pizza.box(); return pizza; } åˆ°è¿™é‡Œå°±æ˜¯ç†Ÿæ‚‰çš„é…æ–¹ï¼Œç†Ÿæ‚‰çš„newå¤§æ³•ï¼Œå¦‚æœåªæœ‰ä¸¤ä¸‰ä¸ªç±»å‹éƒ½è¿˜å¥½ï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸Šä¸‡ä¸ªç±»å‹é€‰é¡¹å‘¢ï¼Œç”šè‡³å¯èƒ½ç”±äºCheesePizzaå–çš„ä¸æ˜¯å¾ˆå¥½ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶å»æ‰å‘¢ï¼Ÿæ˜¯ä¸æ˜¯æƒ³è¦æ‹“å±•æˆ–è€…ä¿®æ”¹ï¼Œå¯¹äºåŸæœ‰ä¸šåŠ¡çš„ä¿®æ”¹ä¼šéå¸¸æƒŠäººã€‚è¿™æ—¶å€™ï¼Œå°è£…ä¸Šé©¬äº†ã€‚ 2.å°è£… ä»å‰é¢åˆ†æï¼Œæˆ‘ä»¬æ¸…æ¥šéœ€è¦å°†åˆ›å»ºçš„ä»£ç ä»åŸæœ‰çš„ä¸šåŠ¡ä¸­æŠ½ç¦»å‡ºæ¥ã€‚ é¦–å…ˆï¼Œåˆ†æä¸€ä¸‹ï¼Œå…¶ä¸­å‡†å¤‡åˆ°åˆ‡ç‰‡çš„è¿‡ç¨‹æ˜¯ä¸å˜çš„ï¼ˆå›ºå®šæ¨¡å—ï¼‰ï¼Œæ˜¯ç±»å‹typeä¸åŒä¼šå¯¼è‡´ç»“æœä¸åŒï¼ˆæ‹“å±•/ä¿®æ”¹æ¨¡å—ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬å°†typeåˆå§‹åŒ–éƒ¨åˆ†æå–å‡ºæ¥å•ç‹¬ä½œä¸ºä¸€ä¸ªæ¨¡å—ã€‚ public class SimplePizzaFactory { /** * æ‰€æœ‰çš„å®¢æˆ·ä½¿ç”¨è¯¥æ–¹æ³•æ¥å®ä¾‹åŒ–å¯¹è±¡ * @param type ç±»å‹ * @return PIZZA */ public Pizza createPizza(String type) { Pizza pizza=null; if(type.equals(\"cheese\")) { pizza=new CheesePizza(); }else if (type.equals(\"greek\")) { pizza=new GreekPizza(); }else if (type.equals(\"pepperoni\")) { pizza=new PepperoniPizza(); } return pizza; } } è¿™ä¸ªç”¨ä»¥å®ä¾‹åŒ–å¯¹è±¡çš„ç±»ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå·¥å‚ï¼ˆfactoryï¼‰â€ questionï¼šè¿™ä¸å°±æ˜¯æŠŠé—®é¢˜ä»ä¸€ä¸ªåœ°æ–¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªåœ°æ–¹äº†å—ï¼Œé—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚ answer:è™½ç„¶æ˜¯ç§»åŠ¨äº†ï¼Œä½†æ˜¯SimplePizzaFactory å¯ä¸ä»…ä»…åªèƒ½ä¸ºoderPizzaæä¾›å¯¹è±¡åˆå§‹åŒ–æœåŠ¡ï¼Œè¿˜å¯ä»¥ä¸ºå…¶ä»–å¯¹è±¡æœåŠ¡ã€‚è¿™é‡Œåšä¸€ä¸ªæ¯”å–»ï¼šä¸€ä¸ªä¸šåŠ¡éƒ¨é—¨ï¼ˆé˜¿é‡Œæ”¯ä»˜éƒ¨é—¨ï¼‰ä»å…¬å¸åˆ†å‡ºæˆä¸ºåˆ†å…¬å¸ï¼ˆèš‚èšé‡‘æœï¼‰ï¼Œå®ƒæ—¢å¯ä»¥ä¸ºåŸæ¥çš„ä¸šåŠ¡æœåŠ¡ï¼ˆæ·˜å®,å¤©çŒ«ï¼‰ï¼Œä¹Ÿå¯ä»¥ä¸ºæ–°çš„ä¸šåŠ¡æœåŠ¡ï¼ˆç§»åŠ¨æ”¯ä»˜ï¼Œä¼ä¸šæœåŠ¡ï¼‰ã€‚ question:å°†å·¥å‚æ–¹æ³•å®šä¹‰ä¸ºé™æ€æ–¹æ³•æœ‰ä»€ä¹ˆå¥½å¤„å’Œåå¤„ï¼Ÿ answer:åˆ©ç”¨é™æ€æ–¹æ³•å®šä¹‰ä¸€ä¸ªç®€å•çš„å·¥å‚æ¨¡å¼ï¼Œæœ€ä¸ºå¸¸è§ï¼ˆä¸ä¸€å®šæ˜¯Factoryç±»ï¼‰ï¼Œå¸¸ç§°ä¸ºé™æ€å·¥å‚ã€‚ å¥½å¤„ï¼šä¸éœ€è¦å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¸å æ®å¤šå°‘å†…å­˜ åå¤„ï¼šæ— æ³•é€šè¿‡ç»§æ‰¿æ¥æ”¹å˜å†…éƒ¨çš„å®ç°æ–¹æ³• æŒ‰ç…§ç®€å•å·¥å‚æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è‡ªå·±çš„ä»£ç  public class PizzaStore { SimplePizzaFactory factory; public PizzaStore(SimplePizzaFactory factory) { this.factory=factory; } /** * æ ¹æ®ç±»å‹ç”ŸæˆPIZZA * @param type * @return PIZZA */ public Pizza orderPizza(String type) { Pizza pizza; //orderPizzaé€šè¿‡ä¼ å…¥typeç±»å‹ï¼Œä½¿ç”¨å·¥å‚å®Œæˆåˆ›å»º pizza=factory.createPizza(type); pizza.prepare(); pizza.bake(); pizza.cut(); pizza.box(); return pizza; } } 3.ç®€å•å·¥å‚ï¼ˆéè®¾è®¡æ¨¡å¼ï¼‰ ç®€å•å·¥å‚å…¶å®ä¸¥æ ¼æ„ä¹‰ä¸Šä¸æ˜¯è®¾è®¡æ¨¡å¼ï¼Œè€Œæ˜¯ä¸€ç§ç¼–ç¨‹ä¹ æƒ¯ï¼Œè¿˜æ˜¯æœ€å¸¸ç”¨çš„é‚£ç§ã€‚ã€‚ã€‚ã€‚ï¼ˆå“ï¼Œä½ åˆ«åŠ¨æ‰‹ï¼‰ ï¼ˆå±ˆæœäºå¤§ä½¬çš„æ·«å¨ï¼‰ä½†æ˜¯å‘¢ï¼Œå¹¶ä¸èƒ½è¯´å®ƒä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼å°±ä¸é‡è§†å®ƒï¼Œä»å‰é¢çš„PIZZAç±»å›¾åˆ†æï¼š å…¶å®è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å·²ç»æ¥è¿‘äº†è®¾è®¡æ¨¡å¼ã€‚æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œå°±æ˜¯æœ€é‡è¦çš„è®¾è®¡æ¨¡å¼ã€‚ 4.æ–°ä¸šåŠ¡éœ€æ±‚ï¼šåŠ ç›Ÿåº—æ¨¡å¼ ç”±äºç»è¥åˆç†åŠ ä¸Šå£å‘³ç‹¬ç‰¹ï¼ŒPIZZAåº—ç»ˆäºå¤§è·æˆåŠŸã€‚ç°åœ¨æ‰€æœ‰çš„æ¶ˆè´¹è€…å’Œé¤é¥®æŠ•èµ„äººéƒ½å¸Œæœ›åœ¨è‡ªå·±çš„é™„è¿‘èƒ½å¤Ÿæœ‰ä¸€å®¶åŠ ç›Ÿåº—ã€‚ä½œä¸ºç»è¥è€…ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹ä¸¤ç§æ¨¡å¼æ¥é€‰æ‹©åŠ ç›Ÿæ–¹å¼ï¼š æ‰€æœ‰åŠ ç›Ÿåº—ä½¿ç”¨ä¸æ€»åº—ä¸€èµ·ä½¿ç”¨ç›¸åŒçš„é…æ–¹ï¼ˆç›´è¥åº—æ¨¡å¼ï¼‰ æ¯å®¶åŠ ç›Ÿåº—å¯ä»¥æ ¹æ®å½“åœ°é£å‘³çš„ä¸åŒï¼Œè‡ªå·±æ›´æ”¹å…¶ä¸­çš„é…æ–¹å’Œé£å‘³ï¼ˆåŠ ç›Ÿå•†æ¨¡å¼ï¼‰ ä»ç°åœ¨åšçš„æ¯”è¾ƒå¤§çš„å¿…èƒœå®¢ï¼Œè‚¯å¾·åŸºï¼Œéº¦å½“åŠ³çš„ç»è¥æ¨¡å¼æ¥çœ‹ï¼Œåè€…ä¼šè®©ç»è¥æ¨¡å¼æ›´åŠ çµæ´»ã€‚ä½†æ˜¯å‰è€…å¯ä»¥ä¿è¯åŠ ç›Ÿåº—çš„äº§å“è´¨é‡å’Œå£ç¢‘ï¼Œæ¯”å¦‚äº¬ä¸œçº¿ä¸‹åº—ï¼Œè‹å®æ˜“è´­ç­‰ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥çœ‹çœ‹ä¸åŒçš„åŠ ç›Ÿæ¨¡å¼ï¼Œä¼šå¯¹åŸæœ‰çš„ä¸šåŠ¡éœ€æ±‚é€ æˆä»€ä¹ˆå½±å“ã€‚4.1 ç›´è¥åº—æ¨¡å¼ é¦–å…ˆæ˜¯è®¾è®¡ç»“æ„ï¼ŒPizzaStore æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦æ‹“å±•SimplePizzaFactoryï¼Œè¿™é‡Œéœ€è¦ç±»ä¼¼äºNYPizzaFactoryã€ChicagoPizzaFactoryã€ChinaPizzaFactoryï¼ˆç”šè‡³å¯ä»¥å†ç»†åˆ†)ï¼Œé‚£ä¹ˆå‡†å¤‡ä¸€ä»½Pizzaçš„æµç¨‹å°±éœ€è¦æ›´æ”¹ NYPizzaFactory factory=new NYPizzaFactory(); PizzaStore nyStore=new PizzaStore(); nyStore.oderPizza(\"Veggie\"); ç›¸å¯¹æ¥è¯´å°±éå¸¸ç®€å•ã€‚é‚£ä¹ˆå¦‚æœæ˜¯åŠ ç›Ÿå•†æ¨¡å¼å‘¢ 4.2 åŠ ç›Ÿå•†æ¨¡å¼ åœ¨æŸäº›åŠ ç›Ÿå•†é‡Œæœ‰ä¸€äº›ç»éªŒå¾ˆä¸°å¯Œçš„å¨å¸ˆï¼Œä»–ä»¬åœ¨åšPizzaçš„æ—¶å€™ï¼Œä¼šåŠ å…¥è‡ªå·±çš„ä¸€äº›æ€è·¯å’Œæƒ³æ³•ï¼Œæ¯”å¦‚ï¼š è¿‡é‡çš„èŠå£«ï¼Œæœ¬åœ°é£å‘³çš„æ¦´è²ï¼Œç”šè‡³å¯èƒ½å­˜åœ¨åŒæ‹¼çš„æƒ…å†µã€‚ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬åœ¨ä¸€å¼€å§‹æ˜¯å°†è¿™äº›æ“ä½œæ”¾åœ¨SimplePizzaFactoryé‡Œï¼Œè¿™å°±ä½¿å¾—ä»£ç ç»“æ„ä¸å…·å¤‡æ´»æ€§ã€‚å°±æ˜¯å‰é¢æåˆ°çš„ï¼Œæ‹“å±•å’Œä¿®æ”¹æ–¹é¢ä¸æ»¡è¶³éœ€æ±‚ã€‚ é‚£ä¹ˆï¼Œå¦‚ä½•ä¿®æ”¹ç°æœ‰çš„ç»“æ„å¯ä»¥æ»¡è¶³éœ€æ±‚å‘¢ï¼Ÿ æŒ‰ç…§å‰é¢çš„ç»éªŒï¼šå°½é‡æ‹“å±•ï¼Œå°‘ä¿®æ”¹ã€‚æˆ‘ä»¬å‘ç°æœ‰åŒºåˆ«çš„åœ°æ–¹åœ¨äºå„åœ°çš„PizzaStoreä¸åŒï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥åœ¨PizzaStoreè¿™é‡Œåšæ‹“å±•å‘¢ã€‚ è¿™é‡Œå¯ä»¥å°è¯•æŠŠcreatePizzaæ”¾å›PizzaStoreç±»é‡Œé¢ï¼Œä½†æ˜¯ä¸éœ€è¦å…·ä½“æ–¹æ³•ä½“ï¼Œä½¿ç”¨æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•ã€‚è®©å…·ä½“çš„PizzaStoreå»å®ç°å…·ä½“çš„createPizzaæ–¹æ³•ã€‚çœ‹ä¸€ä¸‹ä¿®æ”¹åçš„æ•ˆæœï¼š public abstract class AbstactPizzaStore { /** * æ ¹æ®ç±»å‹ç”ŸæˆPIZZA * @param type * @return PIZZA */ public Pizza orderPizza(String type) { Pizza pizza; //orderPizzaé€šè¿‡ä¼ å…¥typeç±»å‹ï¼Œä½¿ç”¨å·¥å‚å®Œæˆåˆ›å»º pizza=createPizza(type); pizza.prepare(); pizza.bake(); pizza.cut(); pizza.box(); return pizza; } /** * å·¥å‚å¯¹è±¡åŠŸèƒ½ç§»åˆ°è¿™é‡Œ * @param type * @return PIZZA */ abstract Pizza createPizza(String type); } è¿™é‡Œæœ‰äº†è¶…ç±»AbstractPizzaStoreï¼Œå°±å¯ä»¥å®ç°NYPizzaStoreã€ChicagoPizzaStoreã€ChinaPizzaStoreç­‰ã€‚ è¿™é‡Œè¿™äº›å­ç±»å°±å…·å¤‡å†³å®šæƒã€‚ public class NYPizzaStore extends AbstactPizzaStore { @Override public Pizza createPizza(String type) { Pizza pizza=null; if(type.equals(\"cheese\")) { pizza=new NYStyleCheesePizza(); }else if (type.equals(\"greek\")) { pizza=new NYStyleGreekPizza(); }else if (type.equals(\"pepperoni\")) { pizza=new NYStylePepperoniPizza(); } return pizza; } } åˆ†æï¼šä¸ºä½•è¿™æ ·åšä¼šæ›´å¥½ï¼Œå¥½å¤„å°±åœ¨äºï¼ŒPizzaStoreçš„oderPizzaä¸éœ€è¦å…³æ³¨createPizzaçš„Pizzaæ˜¯æ€ä¹ˆæ¥çš„ã€‚å®ƒåªçŸ¥é“createPizzaè¿”å›çš„Pizzaå¯ä»¥åšåç»­æ“ä½œã€‚è¿™ç§å¯¹äºå…¶ä»–ä¸šåŠ¡æœ‰å“ªäº›ç±»å‚ä¸è¿›æ¥çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ç§°ä¸ºè§£è€¦ã€‚ è€Œè¿™ä¸ªæŠ½è±¡æ–¹æ³•æˆ‘ä»¬ç§°ä¸ºå·¥å‚æ–¹æ³•ï¼Œå°±æ˜¯å®ç°äº†å·¥å‚ç±»æ•ˆæœçš„æŠ½è±¡æ–¹æ³•ã€‚ /* å·¥å‚å¯¹è±¡åŠŸèƒ½ç§»åˆ°è¿™é‡Œ * @param type * @return PIZZA */ abstract Pizza createPizza(String type); å·¥å‚æ–¹æ³•å¿…é¡»å…·å¤‡ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š å·¥å‚æ–¹æ³•æ˜¯æŠ½è±¡çš„ï¼Œä¾èµ–å­ç±»æ¥å¤„ç†å…·ä½“é€»è¾‘ å·¥å‚æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªäº§å“å¯¹è±¡ï¼Œé€šå¸¸å®šä¹‰åœ¨è¿”å›å€¼ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨å›è°ƒï¼‰ å·¥å‚æ–¹æ³•éœ€è¦å°†ä¿®æ”¹éƒ¨åˆ†ä»ç¨³å®šéƒ¨åˆ†ä¸­æŠ½ç¦»å‡ºæ¥ã€‚ å·¥å‚æ–¹æ³•ä¸­å¿…é¡»æœ‰åˆ›å»ºè€…ç±»ï¼ˆç¨³å®šéƒ¨åˆ†ï¼‰å’Œäº§å“ç±»ï¼ˆä¿®æ”¹éƒ¨åˆ†ï¼‰ åˆ°è¿™é‡Œï¼Œå°±å®Œæˆäº†åŠ ç›Ÿåº—çš„è®¾è®¡ã€‚ 5.å·¥å‚æ–¹æ³•æ¨¡å¼ ä»å‰é¢æˆ‘ä»¬è®¤è¯†äº†å·¥å‚æ–¹æ³•ï¼Œé‚£ä¹ˆåˆ°è¿™é‡Œå°±å¯ä»¥æ¨å‡ºæˆ‘ä»¬ç¬¬ä¸€ä¸ªå·¥å‚æ¨¡å¼------å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†æ˜¯ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»æ˜¯å“ªä¸€ä¸ªã€‚å·¥å‚æ–¹æ³•è®©ç±»æŠŠå®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»ã€‚ æŠ½è±¡ç»“æ„å¦‚ä¸‹ï¼š Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-04-12 15:58:12 "},"javaweb/å­¦ä¹ è·¯å¾„.html":{"url":"javaweb/å­¦ä¹ è·¯å¾„.html","title":"å­¦ä¹ è·¯å¾„","keywords":"","body":" Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-05-06 19:25:58 "},"javaweb/ç¯å¢ƒé…ç½®.html":{"url":"javaweb/ç¯å¢ƒé…ç½®.html","title":"ç¯å¢ƒæ­å»º","keywords":"","body":"ç¯å¢ƒå˜é‡é…ç½® 1ã€javaç¯å¢ƒå˜é‡é…ç½® 1.1 Windowsç¯å¢ƒä¸‹ ç°åœ¨orcleå®˜ç½‘ä¸‹è½½JDK ç‚¹å‡»è¿™é‡Œï¼Œä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„jdkï¼Œè¿è¡Œåå®Œæˆå®‰è£…ï¼Œæ‰¾åˆ°å®‰è£…è·¯å¾„ï¼š C:\\Program Files\\Java\\jdk1.8.0_201\\bin æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªè·¯å¾„é…ç½®åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­å» é¦–å…ˆæ‰“å¼€ç³»ç»Ÿç¯å¢ƒå˜é‡çš„ç›®å½•ï¼šæˆ‘çš„ç”µè„‘-å±æ€§-é«˜çº§ç³»ç»Ÿè®¾ç½®-ç¯å¢ƒå˜é‡ é…ç½®JAVA_HOME(ideaä¸­ä¼šç”¨åˆ°) é…ç½®pathç¯å¢ƒå˜é‡ å®Œæˆåæ‰“å¼€å‘½ä»¤è¡Œï¼Œä½¿ç”¨java -version è‹¥æ˜¯æœ‰ç‰ˆæœ¬å·å‡ºç°ï¼Œé‚£ä¹ˆJDKç¯å¢ƒé…ç½®æˆåŠŸ 1.2 Macç¯å¢ƒä¸‹ ç°åœ¨orcleå®˜ç½‘ä¸‹è½½JDK ç‚¹å‡»è¿™é‡Œï¼Œä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„jdkï¼Œè¿è¡Œåå®Œæˆå®‰è£… ç”±äºmacåœ¨å®‰è£…å®Œæˆåè‡ªåŠ¨ä¼šé…ç½®ç¯å¢ƒå˜é‡ï¼Œä¸éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚ä½¿ç”¨å‘½ä»¤è¡Œæ£€æµ‹ç¯å¢ƒå˜é‡java -version è‹¥æ˜¯æœ‰ç‰ˆæœ¬å‡ºç°ï¼Œé‚£ä¹ˆJDKç¯å¢ƒé…ç½®æˆåŠŸ Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-04-25 14:52:57 "},"javaweb/maven.html":{"url":"javaweb/maven.html","title":"maven","keywords":"","body":"Maven 1ã€mavenç›¸å…³ä¸»è¦å†…å®¹ mavençš„ç®€ä»‹ mavençš„å®‰è£…é…ç½®å’Œç›®å½•ç»“æ„ ideaç¼–è¾‘å™¨é›†æˆMavenç¯å¢ƒ mavené¡¹ç›®çš„åˆ›å»º mavenä»“åº“çš„åŸºæœ¬æ¦‚å¿µ mavenç¯å¢ƒä¸‹æ„å»ºå¤šæ¨¡å—é¡¹ç›® mavençš„æ‰“åŒ…æ“ä½œ mavenä¾èµ–çš„åŸºæœ¬æ¦‚å¿µ 2.Mavençš„ç®€ä»‹ Mavenæ˜¯ä¸€ä¸ªJavaé¡¹ç›®ç®¡ç†å’Œæ„å»ºå·¥å…·ï¼Œå®ƒå¯ä»¥å®šä¹‰é¡¹ç›®ç»“æ„ã€é¡¹ç›®ä¾èµ–ï¼Œå¹¶ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºï¼Œæ˜¯Javaé¡¹ç›®ä¸å¯ç¼ºå°‘çš„å·¥å…·ã€‚ 2.1é¡¹ç›®æ„å»ºå·¥å…· Antæ„å»º Mavenï¼ˆjavaï¼‰ Gradleï¼šAndroidå¾¡ç”¨çš„ï¼Œç»“åˆäº†antå’ŒMavençš„ç‰¹ç‚¹ï¼Œé‡‡å–äº†DSLæ ¼å¼ 2.2Mavençš„å››å¤§ç‰¹æ€§ ä¾èµ–ç®¡ç†ç³»ç»Ÿ 3.Mavençš„ç»“æ„ç›®å½• a-maven-project â”œâ”€â”€ pom.xml â”œâ”€â”€ src â”‚ â”œâ”€â”€ main â”‚ â”‚ â”œâ”€â”€ java â”‚ â”‚ â””â”€â”€ resources â”‚ â””â”€â”€ test â”‚ â”œâ”€â”€ java â”‚ â””â”€â”€ resources â””â”€â”€ target è§£é‡Šä¸€ä¸‹ï¼ša-maven-projectä¸ºé¡¹ç›®åï¼›pom.xmlä¸ºé¡¹ç›®æè¿°æ–‡ä»¶,ser/main/java ä¸ºæºç ç›®å½•ï¼Œsrc/main/resources ä¸ºèµ„æºç›®å½•ï¼Œsrc/test/javaå­˜æ”¾æµ‹è¯•æºç ç›®å½•ï¼Œsrc/test/resourceså­˜æ”¾æµ‹è¯•èµ„æºï¼Œæœ€ç»ˆæ‰€æœ‰çš„ç¼–è¯‘ã€æ‰“åŒ…ç”Ÿæˆæ–‡ä»¶éƒ½æ”¾åœ¨targetç›®å½•é‡Œã€‚è¿™äº›å°±æ˜¯ä¸€ä¸ªmavené¡¹ç›®æ ‡å‡†çš„ç›®å½•ç»“æ„ porm.xmlæ–‡ä»¶æ ¼å¼ 4.0.0 com.itranswarp.learnjava hello 1.0 jar ... commons-logging commons-logging 1.2 modelversion æŒ‡å®šå½“å‰çš„pomæ¨¡å‹çš„ç‰ˆæœ¬ï¼Œå¯¹äºMaven3æ¥è¯´åªèƒ½æ˜¯4.0.0 groupIdç±»ä¼¼äºJavaçš„åŒ…åï¼Œé€šå¸¸æ˜¯å…¬å¸æˆ–ç»„ç»‡åç§°ï¼ŒæŒ‡å®šäº†é¡¹ç›®å±äºå“ªä¸€ä¸ªç»„ç»‡ artifactIdç±»ä¼¼äºJavaçš„ç±»åï¼Œé€šå¸¸æ˜¯é¡¹ç›®åç§°ï¼Œå®šä¹‰äº†é¡¹ç›®åœ¨ç»„ç»‡ä¸­çš„å”¯ä¸€çš„ID versionæŒ‡å®šå½“å‰åŒ…çš„ç‰ˆæœ¬å·ï¼Œx.x.x-é‡Œç¨‹ç¢‘ï¼›å¦‚1.0.0-SNAPSHOTï¼›å…¶ä¸­ç¬¬ä¸€ä¸ªx ä¸ºå¤§ç‰ˆæœ¬ï¼Œåœ¨æœ‰å¤§å˜åŠ¨æ—¶å‡çº§ï¼›ç¬¬äºŒä¸ªxå°ç‰ˆæœ¬ ä¿®å¤bugï¼Œå¢åŠ åŠŸèƒ½æ—¶ä½¿ç”¨ï¼›ç¬¬ä¸‰ä¸ªx ä¸ºå¼€å‘æ›´æ–°ç‰ˆæœ¬ æ€»ç»“ï¼šä¸€ä¸ªMavenå·¥ç¨‹å°±æ˜¯ç”±groupIdï¼ŒartifactIdå’Œversionä½œä¸ºå”¯ä¸€æ ‡è¯†ã€‚ ä¸€ä¸ªæ ‡å‡†çš„dependencyæ ‡å‡† commons-logging commons-logging 1.2 4.å®‰è£…Maven 4.1 ä¸‹è½½mavenå¹¶å®Œæˆç¯å¢ƒå˜é‡é…ç½® 1.åœ¨å®˜ç½‘ä¸‹è½½å¯¹åº”çš„mavenç‰ˆæœ¬ 2.é…ç½®ç¯å¢ƒå˜é‡ MAVEN_HOME ,path 3.å‘½ä»¤è¡Œæ£€æµ‹æ˜¯å¦é…ç½®æˆåŠŸ mvn -version 4.2 ä¿®æ”¹æœ¬åœ°ä»“åº“é…ç½® è¿™é‡Œè¿˜éœ€è¦æ›´æ”¹ä¸€ä¸‹setting.xmlä¸‹çš„é…ç½®ï¼Œç”¨æ¥æå‡ä½¿ç”¨æ•ˆç‡ Questionï¼šä¸ºä»€ä¹ˆéœ€è¦ä¿®æ”¹æœ¬åœ°mavenä»“åº“å‘¢ï¼Ÿ answer;å› ä¸º Maven é»˜è®¤çš„æœ¬åœ°ä»“åº“åœ¨C/ç”¨æˆ·/.m2 æ–‡ä»¶å¤¹é‡Œï¼Œéšç€ä¸‹è½½çš„ jar åŒ…è¶Šæ¥è¶Šå¤šï¼Œç³»ç»Ÿç›˜ä¼šè¶Šæ¥è¶Šæ»¡ï¼Œç”µè„‘ä¼šè¶Šæ¥è¶Šå¡ï¼Œæ‰€ä»¥å»ºè®®åœ¨ C ç›˜ä¹‹å¤–å»ºä¸€ä¸ªæœ¬åœ°ä»“åº“ã€‚ 1.æ–°å»ºä¸€ä¸ªç›®å½• 2.æ‰“å¼€mavenä¸‹setting.xmlæ–‡ä»¶ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶ 3.éœ€è¦æ·»åŠ çš„æ ‡ç­¾å¦‚ä¸‹ï¼š respository åœ°å€ ä½ çš„repositoryç›®å½• ä¾‹å¦‚ï¼šD:\\CodeSoftware\\Maven\\repository 4.é…ç½®é˜¿é‡Œäº‘é•œåƒä¸‹è½½åœ°å€ åœ¨ setting.xml æ–‡ä»¶é‡Œé¢æ·»åŠ ï¼š alimaven aliyun maven http://maven.aliyun.com/nexus/content/groups/public/; central å› ä¸ºå›½å¤–è¿œç¨‹ä»“åº“ä¸‹è½½ jar åŒ…é€Ÿåº¦æ…¢ï¼Œå›½å†…é˜¿é‡Œäº‘ä¸‹è½½é€Ÿåº¦å¿« æœ€åè´´ä¸€ä¸‹å®Œæ•´çš„setting.xml D:\\CodeSoftware\\maven\\repository alimaven aliyun maven http://maven.aliyun.com/nexus/content/groups/public/ central 5.ä¾èµ–ç®¡ç† â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚Sample Projectâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â–¼ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ abc â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â–¼ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ xyz â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Qï¼šå¦‚ä¸Šé¢æ‰€æè¿°çš„ï¼Œå¦‚æœé¡¹ç›®ä¾èµ–äº†abcåº“ï¼Œè€Œabcåº“åˆä¾èµ–äº†xyzåº“ï¼Œé‚£ä¹ˆæ˜¯å¦åœ¨é¡¹ç›®ä¸­éœ€è¦åœ¨ç”³è¯·abcåº“çš„åŒæ—¶åˆç”³è¯·xyzåº“å—ï¼Ÿ answerï¼šåœ¨mavenç¯å¢ƒä¸‹ä¸éœ€è¦ï¼Œå½“å·²ç»é…ç½®abcçš„ä¾èµ–æ—¶ï¼Œxyzä¼šä¸€èµ·è¢«ä¾èµ– 5.1ä¾èµ–å…³ç³» Mavenå®šä¹‰äº†å‡ ç§ä¾èµ–å…³ç³»ï¼Œåˆ†åˆ«æ˜¯compileã€testã€runtimeå’Œprovidedï¼š scope è¯´æ˜ ç¤ºä¾‹ compile ç¼–è¯‘æ—¶éœ€è¦ç”¨åˆ°è¯¥jaråŒ…ï¼ˆé»˜è®¤ï¼‰ commons-logging test ç¼–è¯‘Testæ—¶éœ€è¦ç”¨åˆ°è¯¥jaråŒ… junit runtime ç¼–è¯‘æ—¶ä¸éœ€è¦ï¼Œä½†è¿è¡Œæ—¶éœ€è¦ç”¨åˆ° mysql provided ç¼–è¯‘æ—¶éœ€è¦ç”¨åˆ°ï¼Œä½†è¿è¡Œæ—¶ç”±JDKæˆ–æŸä¸ªæœåŠ¡å™¨æä¾› servlet-api compileæ˜¯æœ€å¸¸ç”¨çš„ï¼ŒMavenä¼šæŠŠè¿™ç§ç±»å‹çš„ä¾èµ–ç›´æ¥æ”¾å…¥classpathä¸­ testä¾èµ–è¡¨ç¤ºä»…åœ¨æµ‹è¯•æ—¶ä½¿ç”¨ï¼Œæ­£å¸¸è¿è¡Œæ—¶å¹¶ä¸éœ€è¦ runtimeä¾èµ–è¡¨ç¤ºç¼–è¯‘æ—¶ä¸éœ€è¦ï¼Œä½†è¿è¡Œæ—¶éœ€è¦ providedä¾èµ–è¡¨ç¤ºç¼–è¯‘æ—¶éœ€è¦ï¼Œä½†è¿è¡Œæ—¶ä¸éœ€è¦ã€‚ Q:mavenä»å“ªé‡Œä¸‹è½½æ‰€éœ€ä¾èµ–ï¼Ÿ Answerï¼šhttps://repo1.maven.org/ è¿™ä¸ªæ˜¯mavençš„ä¸­å¿ƒä»“åº“ï¼Œç„¶åå°†æ‰€æœ‰çš„ç¬¬ä¸‰å‘åº“å’Œè‡ªèº«çš„jaråº“æ‰˜ç®¡åœ¨ä¸­å¤®ä»“åº“ï¼Œæœ¬åœ°ä»“åº“ï¼ˆå‰é¢é…ç½®çš„åœ°å€ï¼Œè‹¥æ²¡æœ‰ï¼Œå°±åœ¨ç”¨æˆ·ç›®å½•çš„ .mç›®å½•ä¸‹ï¼‰åªè¦ä¸‹è½½ä¸€æ¬¡ï¼Œä¸‹æ¬¡ä½¿ç”¨å¯ç›´æ¥ä½¿ç”¨æœ¬åœ°ä»“åº“ã€‚ 5.2å”¯ä¸€ID é‚£ä¹ˆæ˜¯å¦‚ä½•å®šä½ä¸€ä¸ªä¾èµ–çš„ groupIdï¼šå±äºç»„ç»‡çš„åç§°ï¼Œç±»ä¼¼Javaçš„åŒ…åï¼› artifactIdï¼šè¯¥jaråŒ…è‡ªèº«çš„åç§°ï¼Œç±»ä¼¼Javaçš„ç±»åï¼› versionï¼šè¯¥jaråŒ…çš„ç‰ˆæœ¬ã€‚ Mavené€šè¿‡å¯¹jaråŒ…è¿›è¡ŒPGPç­¾åç¡®ä¿ä»»ä½•ä¸€ä¸ªjaråŒ…ä¸€ç»å‘å¸ƒå°±æ— æ³•ä¿®æ”¹ã€‚ä¿®æ”¹å·²å‘å¸ƒjaråŒ…çš„å”¯ä¸€æ–¹æ³•æ˜¯å‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚ 5.3é•œåƒä»“åº“ ç”±äºmavenä¸­å¤®ä»“åº“åœ¨å¤–ç½‘ä¸Šï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®é•œåƒä»“åº“åŠ é€Ÿä¾èµ–æ„å»º slow â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚Maven Central Repo.â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚sync â”‚ â–¼ â”Œâ”€â”€â”€â”€â”€â”€â”€â” fast â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ User â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚Maven Mirror Repo. â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ä¸Šé¢ä¸ºé…ç½®é•œåƒåçš„ä¾èµ–è·¯å¾„ aliyun aliyun central https://maven.aliyun.com/repository/central ä¸Šé¢ä¸ºé˜¿é‡Œäº‘çš„é•œåƒmavenä»“åº“ 5.4 å¦‚ä½•å¯»æ‰¾ç¬¬ä¸‰æ–¹åº“ 1.https://search.maven.org/ å¥½ç”¨å°±æ˜¯æ¯æ¬¡éƒ½éœ€è¦äººæœºæ ¡éªŒ 2ã€https://u.tools/ utools ä¸€ä¸ªå·¥å…·éå¸¸å¥½ç”¨ï¼ŒåŠ è½½mavenæ’ä»¶å¾ˆå¥½ç”¨ å…¶ä»–å·¥å…· 5.5 å¸¸ç”¨å‘½ä»¤è¡Œ æœ¬åœ°å‘å¸ƒ mvn clean install -DskipTests å¹³å°å‘å¸ƒ mvn clean deploy -Dmaven.test.skip å‘½ä»¤è¡Œç¼–è¯‘ mvn clean package å…¶ä¸­-D ä¼ å…¥å±æ€§å‚æ•° ä¾‹å¦‚ï¼šmvn package -Dmaven.test.skip=true å…¶ä¸­maven.test.skipä»£è¡¨è·³è¿‡æ˜¯å¦è·³è¿‡å•å…ƒæµ‹è¯• å…¶ä¸­-Pä½¿ç”¨æŒ‡å®šçš„Profileé…ç½® 6.mavenæ„å»ºæµç¨‹ Mavençš„ç”Ÿå‘½å‘¨æœŸ(lifecycleï¼‰ç”±ä¸€ç³»åˆ—é˜¶æ®µï¼ˆphaseï¼‰æ„æˆï¼Œä»¥å†…ç½®çš„ç”Ÿå‘½å‘¨æœŸdefaultä¸ºä¾‹ï¼Œå®ƒå…·å¤‡ä»¥ä¸‹phaseï¼š validate initialize generate-sources process-sources generate-resources process-resources compile process-classes generate-test-sources process-test-sources generate-test-resources process-test-resources test-compile process-test-classes test prepare-package package pre-integration-test integration-test post-integration-test verify install deploy ä¾‹å¦‚ï¼Œè¿è¡Œ mvn package,mavenæ‰§è¡Œé¡ºåºå¦‚ä¸‹ validate ... package è¿è¡Œmvn compile,mavenæ‰§è¡Œé¡ºåºå¦‚ä¸‹ validate ... compile mavenå¦ä¸€ä¸ªå£°æ˜å‘¨æœŸæ˜¯clean pre-clean clean ï¼ˆæ³¨æ„è¿™ä¸ªcleanä¸æ˜¯lifecycleè€Œæ˜¯phaseï¼‰ post-clean æ›´é«˜çº§çš„ä¾‹å­æ˜¯åŒæ—¶ä½¿ç”¨å¤šä¸ªphaseï¼Œä¾‹å¦‚ï¼šmvn clean package; Mavenå…ˆæ‰§è¡Œcleanç”Ÿå‘½å‘¨æœŸå¹¶è¿è¡Œåˆ°cleanè¿™ä¸ªphaseï¼Œç„¶åæ‰§è¡Œdefaultç”Ÿå‘½å‘¨æœŸå¹¶è¿è¡Œåˆ°packageè¿™ä¸ªphaseï¼Œå®é™…æ‰§è¡Œçš„phaseå¦‚ä¸‹ï¼š pre-clean clean ï¼ˆæ³¨æ„è¿™ä¸ªcleanæ˜¯phaseï¼‰ validate ... package 6.1å¸¸ç”¨çš„å‘½ä»¤ mvn cleanï¼šæ¸…ç†æ‰€æœ‰ç”Ÿæˆçš„classå’Œjarï¼› mvn clean compileï¼šå…ˆæ¸…ç†ï¼Œå†æ‰§è¡Œåˆ°compileï¼› mvn clean testï¼šå…ˆæ¸…ç†ï¼Œå†æ‰§è¡Œåˆ°testï¼Œå› ä¸ºæ‰§è¡Œtestå‰å¿…é¡»æ‰§è¡Œcompileï¼Œæ‰€ä»¥è¿™é‡Œä¸å¿…æŒ‡å®šcompileï¼› mvn clean packageï¼šå…ˆæ¸…ç†ï¼Œå†æ‰§è¡Œåˆ°packageã€‚ 6.2 Goal æ‰§è¡Œä¸€ä¸ªphaseåˆä¼šè§¦å‘ä¸€ä¸ªæˆ–å¤šä¸ªgoalï¼š æ‰§è¡Œçš„Phase å¯¹åº”æ‰§è¡Œçš„Goal compile compiler:compile test compiler:testCompile surefire:test goalçš„å‘½åæ€»æ˜¯abc:xyzè¿™ç§å½¢å¼ã€‚ æ€»ç»“ lifecycleç›¸å½“äºJavaçš„packageï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªphaseï¼› phaseç›¸å½“äºJavaçš„classï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªgoalï¼› goalç›¸å½“äºclassçš„methodï¼Œå®ƒå…¶å®æ‰æ˜¯çœŸæ­£å¹²æ´»çš„ã€‚ 7.Mavenæ’ä»¶ è‡ªå®šä¹‰æ’ä»¶ ... org.apache.maven.plugins maven-shade-plugin 3.2.1 package shade ... è‡ªå®šä¹‰æ’ä»¶å¾€å¾€éœ€è¦ä¸€äº›é…ç½®ï¼Œä¾‹å¦‚ï¼Œmaven-shade-pluginéœ€è¦æŒ‡å®šJavaç¨‹åºçš„å…¥å£ï¼Œå®ƒçš„é…ç½®æ˜¯ï¼š com.itranswarp.learnjava.Main tips:Mavenè‡ªå¸¦çš„æ ‡å‡†æ’ä»¶ä¾‹å¦‚compileræ˜¯æ— éœ€å£°æ˜çš„ï¼Œåªæœ‰å¼•å…¥å…¶å®ƒçš„æ’ä»¶æ‰éœ€è¦å£°æ˜ å¸¸ç”¨çš„æ’ä»¶ï¼š maven-shade-pluginï¼šæ‰“åŒ…æ‰€æœ‰ä¾èµ–åŒ…å¹¶ç”Ÿæˆå¯æ‰§è¡Œjarï¼› cobertura-maven-pluginï¼šç”Ÿæˆå•å…ƒæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šï¼› findbugs-maven-pluginï¼šå¯¹Javaæºç è¿›è¡Œé™æ€åˆ†æä»¥æ‰¾å‡ºæ½œåœ¨é—®é¢˜ã€‚ 8.æ¨¡å—ç®¡ç† åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œç»å¸¸æŠŠä¸€ä¸ªè¾ƒå¤§é¡¹ç›®æ‹†åˆ†æˆå¤šä¸ªæ¨¡å—ï¼Œç”¨æ¥é™ä½è½¯ä»¶çš„å¤æ‚åº¦ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚Module A â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” split â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚Single Projectâ”‚â”€â”€â”€â”€â”€â”€â”€> â”‚Module B â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚Module C â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”” â”€ â”€ â”€ â”€ â”€ â”€ â”˜ ä¸Šé¢è¿™ä¸ªç»“æ„çš„é¡¹ç›®å°±å¯ä»¥è¢«æ‹†åˆ†æˆä¸€ä¸‹ç»“æ„ï¼š åŸå§‹ç»“æ„ single-project â”œâ”€â”€ pom.xml â””â”€â”€ src æ‹†åˆ†åçš„ç»“æ„ mutiple-project â”œâ”€â”€ module-a â”‚ â”œâ”€â”€ pom.xml â”‚ â””â”€â”€ src â”œâ”€â”€ module-b â”‚ â”œâ”€â”€ pom.xml â”‚ â””â”€â”€ src â””â”€â”€ module-c â”œâ”€â”€ pom.xml â””â”€â”€ src è¿™é‡Œå¯ä»¥ä½¿ç”¨Mavenç®¡ç†å¤šä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ¯ä¸ªæ¨¡å—å½“åšä¸€ä¸ªç‹¬ç«‹çš„Mavené¡¹ç›®ï¼Œå®ƒä»¬æœ‰å„è‡ªç‹¬ç«‹çš„pom.xmlã€‚ä¾‹å¦‚module Aï¼š 4.0.0 com.itranswarp.learnjava module-a 1.0 jar module-a UTF-8 UTF-8 11 11 11 org.slf4j slf4j-api 1.7.28 ch.qos.logback logback-classic 1.2.3 runtime org.junit.jupiter junit-jupiter-engine 5.5.2 test module Bçš„ 4.0.0 com.itranswarp.learnjava module-b 1.0 jar module-b UTF-8 UTF-8 11 11 11 org.slf4j slf4j-api 1.7.28 ch.qos.logback logback-classic 1.2.3 runtime org.junit.jupiter junit-jupiter-engine 5.5.2 test å¦‚æœåœ¨Aå’ŒBä¸­å­˜åœ¨å…±åŒçš„éƒ¨åˆ†ä½œä¸ºparent 4.0.0 com.itranswarp.learnjava parent 1.0 pom parent UTF-8 UTF-8 11 11 11 org.slf4j slf4j-api 1.7.28 ch.qos.logback logback-classic 1.2.3 runtime org.junit.jupiter junit-jupiter-engine 5.5.2 test è¿™æ ·ä¿®æ”¹åçš„é¡¹ç›®ç»“æ„ä¸º multiple-project â”œâ”€â”€ pom.xml â”œâ”€â”€ parent â”‚ â””â”€â”€ pom.xml â”œâ”€â”€ module-a â”‚ â”œâ”€â”€ pom.xml â”‚ â””â”€â”€ src â”œâ”€â”€ module-b â”‚ â”œâ”€â”€ pom.xml â”‚ â””â”€â”€ src â””â”€â”€ module-c â”œâ”€â”€ pom.xml â””â”€â”€ src è¿™æ ·module Aå¯ä»¥ç®€åŒ–ä¸º 4.0.0 com.itranswarp.learnjava parent 1.0 ../parent/pom.xml module-a jar module-a å¦‚æœmodule A ä¾èµ–module Bï¼Œé‚£ä¹ˆmodule Aéœ€è¦module Bçš„jaråŒ…æ‰èƒ½æ­£å¸¸ç¼–è¯‘ï¼Œæˆ‘ä»¬éœ€è¦åœ¨module Aä¸­å¼•å…¥ module B ... com.itranswarp.learnjava module-b 1.0 åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªpom.xmlç»Ÿä¸€ç¼–è¯‘ 4.0.0 com.itranswarp.learnjava build 1.0 pom build parent module-a module-b module-c è¿™æ ·ï¼Œåœ¨æ ¹ç›®å½•æ‰§è¡Œmvn clean packageæ—¶ï¼ŒMavenæ ¹æ®æ ¹ç›®å½•çš„pom.xmlæ‰¾åˆ°åŒ…æ‹¬parentåœ¨å†…çš„å…±4ä¸ªï¼Œä¸€æ¬¡æ€§å…¨éƒ¨ç¼–è¯‘ã€‚ 8.1 ä¸­å¤®ä»“åº“ å…¶å®æˆ‘ä»¬ä½¿ç”¨çš„å¤§å¤šæ•°ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½æ˜¯è¿™ä¸ªç”¨æ³•ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨commons loggingã€log4jè¿™äº›ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå°±æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—çš„å¼€å‘è€…è‡ªå·±æŠŠç¼–è¯‘å¥½çš„jaråŒ…å‘å¸ƒåˆ°Mavençš„ä¸­å¤®ä»“åº“ä¸­ã€‚ 8.2 ç§æœ‰ä»“åº“ ç§æœ‰ä»“åº“æ˜¯æŒ‡å…¬å¸å†…éƒ¨å¦‚æœä¸å¸Œæœ›æŠŠæºç å’ŒjaråŒ…æ”¾åˆ°å…¬ç½‘ä¸Šï¼Œé‚£ä¹ˆå¯ä»¥æ­å»ºç§æœ‰ä»“åº“ã€‚ç§æœ‰ä»“åº“æ€»æ˜¯åœ¨å…¬å¸å†…éƒ¨ä½¿ç”¨ï¼Œå®ƒåªéœ€è¦åœ¨æœ¬åœ°çš„~/.m2/settings.xmlä¸­é…ç½®å¥½ï¼Œä½¿ç”¨æ–¹å¼å’Œä¸­å¤®ä»“ä½æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚ 8.3 æœ¬åœ°ä»“åº“ æœ¬åœ°ä»“åº“æ˜¯æŒ‡æŠŠæœ¬åœ°å¼€å‘çš„é¡¹ç›®â€œå‘å¸ƒâ€åœ¨æœ¬åœ°ï¼Œè¿™æ ·å…¶ä»–é¡¹ç›®å¯ä»¥é€šè¿‡æœ¬åœ°ä»“åº“å¼•ç”¨å®ƒã€‚ä½†æ˜¯æˆ‘ä»¬ä¸æ¨èæŠŠè‡ªå·±çš„æ¨¡å—å®‰è£…åˆ°Mavençš„æœ¬åœ°ä»“åº“ï¼Œå› ä¸ºæ¯æ¬¡ä¿®æ”¹æŸä¸ªæ¨¡å—çš„æºç ï¼Œéƒ½éœ€è¦é‡æ–°å®‰è£…ï¼Œéå¸¸å®¹æ˜“å‡ºç°ç‰ˆæœ¬ä¸ä¸€è‡´çš„æƒ…å†µã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨æ¨¡å—åŒ–ç¼–è¯‘ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå‘Šè¯‰Mavenå‡ ä¸ªæ¨¡å—ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œéœ€è¦ä¸€å—ç¼–è¯‘ï¼ŒMavenå°±ä¼šè‡ªåŠ¨æŒ‰ä¾èµ–é¡ºåºç¼–è¯‘è¿™äº›æ¨¡å—ã€‚ 9.ä½¿ç”¨mvnw ä¸€èˆ¬æƒ…å†µmavenä½¿ç”¨mvnè¿™ä¸€ä¸ªå‘½ä»¤ã€‚ä½†æ˜¯å…¶å®è¿˜æœ‰ä¸€ä¸ªå‘½ä»¤è¡Œmvnw mvnwæ˜¯Maven Wrapperçš„ç¼©å†™ã€‚å› ä¸ºæˆ‘ä»¬å®‰è£…mavenæ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ‰€æœ‰é¡¹ç›®éƒ½ä¼šä½¿ç”¨å…¨å±€å®‰è£…çš„è¿™ä¸ªMavenç‰ˆæœ¬ã€‚ä½†æ˜¯ï¼Œå¯¹äºæŸäº›é¡¹ç›®æ¥è¯´ï¼Œå®ƒå¯èƒ½å¿…é¡»ä½¿ç”¨æŸä¸ªç‰¹å®šçš„Mavenç‰ˆæœ¬ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨Maven Wrapperï¼Œå®ƒå¯ä»¥è´Ÿè´£ç»™è¿™ä¸ªç‰¹å®šçš„é¡¹ç›®å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Mavenï¼Œè€Œå…¶ä»–é¡¹ç›®ä¸å—å½±å“ã€‚ ç®€å•åœ°è¯´ï¼ŒMaven Wrapperå°±æ˜¯ç»™ä¸€ä¸ªé¡¹ç›®æä¾›ä¸€ä¸ªç‹¬ç«‹çš„ï¼ŒæŒ‡å®šç‰ˆæœ¬çš„Mavenç»™å®ƒä½¿ç”¨ã€‚ 9.1 å®‰è£…Maven Wrapper å®‰è£…Maven Wrapperæœ€ç®€å•çš„æ–¹å¼æ˜¯åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼ˆå³pom.xmlæ‰€åœ¨çš„ç›®å½•ï¼‰ä¸‹è¿è¡Œå®‰è£…å‘½ä»¤ï¼š mvn -N io.takari:maven:0.7.6:wrapper æœè¦æŒ‡å®šä½¿ç”¨çš„Mavenç‰ˆæœ¬ï¼Œä½¿ç”¨ä¸‹é¢çš„å®‰è£…å‘½ä»¤æŒ‡å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚3.3.3ï¼š mvn -N io.takari:maven:0.7.6:wrapper -Dmaven=3.3.3 å®‰è£…åï¼ŒæŸ¥çœ‹é¡¹ç›®ç»“æ„ï¼š my-project â”œâ”€â”€ .mvn â”‚ â””â”€â”€ wrapper â”‚ â”œâ”€â”€ MavenWrapperDownloader.java â”‚ â”œâ”€â”€ maven-wrapper.jar â”‚ â””â”€â”€ maven-wrapper.properties â”œâ”€â”€ mvnw â”œâ”€â”€ mvnw.cmd â”œâ”€â”€ pom.xml â””â”€â”€ src â”œâ”€â”€ main â”‚ â”œâ”€â”€ java â”‚ â””â”€â”€ resources â””â”€â”€ test â”œâ”€â”€ java â””â”€â”€ resources å‘ç°å¤šäº†mvnwã€mvnw.cmdå’Œ.mvnç›®å½•ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠmvnå‘½ä»¤æ”¹æˆmvnwå°±å¯ä»¥ä½¿ç”¨è·Ÿé¡¹ç›®å…³è”çš„Mavenã€‚ä¾‹å¦‚ï¼š mvnw clean package åœ¨Linuxæˆ–macOsä¸‹è¿è¡Œæ—¶éœ€è¦åŠ ä¸Š./ ./mvnw clean package Maven Wrapperçš„å¦ä¸€ä¸ªä½œç”¨æ˜¯æŠŠé¡¹ç›®çš„mvnwã€mvnw.cmdå’Œ.mvnæäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œå¯ä»¥ä½¿æ‰€æœ‰å¼€å‘äººå‘˜ä½¿ç”¨ç»Ÿä¸€çš„Mavenç‰ˆæœ¬ã€‚ 10.å‘å¸ƒè‡ªå·±Artifact è¿™ä¸€ç« è§£å†³äº†ä¸€ä¸ªé—®é¢˜;é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šå½“æˆ‘ä»¬è‡ªå·±å†™äº†ä¸€ä¸ªç‰›é€¼çš„å¼€æºåº“æ—¶ï¼Œéå¸¸å¸Œæœ›åˆ«äººä¹Ÿèƒ½ä½¿ç”¨ï¼Œæ€»ä¸èƒ½ç›´æ¥æ”¾ä¸ªjaråŒ…çš„é“¾æ¥è®©åˆ«äººä¸‹è½½å§ï¼Ÿ(ä¹Ÿä¸çŸ¥é“æœ‰æœ¨æœ‰) æŠŠè‡ªå·±çš„åº“å‘å¸ƒåˆ°Mavençš„repoä¸­æœ‰å¥½å‡ ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä»‹ç»3ç§æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚ 10.1 ä»¥é™æ€æ–‡ä»¶å‘å¸ƒ å®ä¾‹ï¼šå¼€æºé¡¹ç›®how-to-become-rich å·¥ç¨‹ç›®å½• how-to-become-rich â”œâ”€â”€ maven-repo pom.xmlä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š ... local-repo-release GitHub Release file://${project.basedir}/maven-repo maven-source-plugin attach-sources package jar-no-fork maven-javadoc-plugin attach-javadocs package jar æ‰“åŒ…å‘½ä»¤è¡Œ mvn clean package deploy å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨maven-repoç›®å½•ä¸‹æ‰¾åˆ°éƒ¨ç½²åçš„æ‰€æœ‰æ–‡ä»¶å¦‚ä¸‹ï¼š maven-repo â””â”€â”€ com â””â”€â”€ itranswarp â””â”€â”€ rich â””â”€â”€ how-to-become-rich â”œâ”€â”€ 1.0.0 â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0-javadoc.jar â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0-javadoc.jar.md5 â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0-javadoc.jar.sha1 â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0-sources.jar â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0-sources.jar.md5 â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0-sources.jar.sha1 â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0.jar â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0.jar.md5 â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0.jar.sha1 â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0.pom â”‚ â”œâ”€â”€ how-to-become-rich-1.0.0.pom.md5 â”‚ â””â”€â”€ how-to-become-rich-1.0.0.pom.sha1 â”œâ”€â”€ maven-metadata.xml â”œâ”€â”€ maven-metadata.xml.md5 â””â”€â”€ maven-metadata.xml.sha1 æœ€åä¸€æ­¥ï¼Œæ˜¯æŠŠè¿™ä¸ªå·¥ç¨‹æ¨åˆ°GitHubä¸Šï¼Œå¹¶é€‰æ‹©Settings-GitHub Pagesï¼Œé€‰æ‹©master branchå¯ç”¨PagesæœåŠ¡ï¼š è¿™æ ·ï¼ŒæŠŠå…¨éƒ¨å†…å®¹æ¨é€è‡³GitHubåï¼Œå³å¯ä½œä¸ºé™æ€ç½‘ç«™è®¿é—®Mavençš„repoï¼Œå®ƒçš„åœ°å€æ˜¯https://michaelliao.github.io/how-to-become-rich/maven-repo/ã€‚ç‰ˆæœ¬`1.0.0`å¯¹åº”çš„jaråŒ…åœ°å€æ˜¯ï¼š https://michaelliao.github.io/how-to-become-rich/maven-repo/com/itranswarp/rich/how-to-become-rich/1.0.0/how-to-become-rich-1.0.0.jar å…¶ä»–äººä½¿ç”¨mavenåŒ…çš„æ–¹å¼ com.itranswarp.rich how-to-become-rich 1.0.0 ä¸æ­¤åŒæ—¶æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªçš„å£°æ˜ 4.0.0 example how-to-become-rich-usage 1.0-SNAPSHOT jar 11 11 11 github-rich-repo The Maven Repository on Github https://michaelliao.github.io/how-to-become-rich/maven-repo/ com.itranswarp.rich how-to-become-rich 1.0.0 10.2 é€šè¿‡Nexuså‘å¸ƒåˆ°ä¸­å¤®ä»“åº“ æˆ‘ä»¬ä¸èƒ½ç›´æ¥å‘å¸ƒåˆ°Mavenä¸­å¤®ä»“åº“ï¼Œè€Œæ˜¯é€šè¿‡æ›²çº¿æ•‘å›½çš„æ–¹å¼ï¼Œå‘å¸ƒåˆ°central.sonatype.orgï¼Œå®ƒä¼šå®šæœŸè‡ªåŠ¨åŒæ­¥åˆ°Mavençš„ä¸­å¤®ä»“åº“ã€‚Nexusæ˜¯ä¸€ä¸ªæ”¯æŒMavenä»“åº“çš„è½¯ä»¶ï¼Œç”±Sonatypeå¼€å‘ï¼Œæœ‰å…è´¹ç‰ˆå’Œä¸“ä¸šç‰ˆä¸¤ä¸ªç‰ˆæœ¬ï¼Œå¾ˆå¤šå¤§å…¬å¸å†…éƒ¨éƒ½ä½¿ç”¨Nexusä½œä¸ºè‡ªå·±çš„ç§æœ‰Mavenä»“åº“ï¼Œè€Œè¿™ä¸ªcentral.sonatype.orgç›¸å½“äºé¢å‘å¼€æºçš„ä¸€ä¸ªNexuså…¬å…±æœåŠ¡ ç¬¬ä¸€æ­¥æ˜¯åœ¨central.sonatype.orgä¸Šæ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œæ³¨å†Œé“¾æ¥éå¸¸éšè”½ï¼Œå¯ä»¥è‡ªå·±å…ˆæ‰¾æ‰¾ï¼Œæ‰¾åŠå°æ—¶æ²¡æ‰¾åˆ°ç‚¹è¿™é‡Œ)æŸ¥çœ‹æ”»ç•¥ã€‚ è¿™é‡Œç®€å•æä¸€ä¸‹å‘å¸ƒé‡ç‚¹ä¸éš¾ç‚¹ï¼š å¿…é¡»æ­£ç¡®åˆ›å»ºGPGç­¾åï¼ŒLinuxå’ŒMacä¸‹æ¨èä½¿ç”¨gnupg2ï¼› å¿…é¡»åœ¨~/.m2/settings.xmlä¸­é…ç½®å¥½ç™»å½•ç”¨æˆ·åå’Œå£ä»¤ï¼Œä»¥åŠGPGå£ä»¤ï¼š ... ossrh OSSRH-USERNAME OSSRH-PASSWORD ossrh true gpg2 GPG-PASSWORD åœ¨å¾…å‘å¸ƒçš„Artifactçš„pom.xmlä¸­æ·»åŠ OSSçš„Maven repoåœ°å€ï¼Œä»¥åŠmaven-jar-pluginã€maven-source-pluginã€maven-javadoc-pluginã€maven-gpg-pluginã€nexus-staging-maven-pluginï¼š ... ossrh https://oss.sonatype.org/content/repositories/snapshots ossrh Nexus Release Repository http://oss.sonatype.org/service/local/staging/deploy/maven2/ org.apache.maven.plugins maven-jar-plugin jar test-jar org.apache.maven.plugins maven-source-plugin attach-sources jar-no-fork org.apache.maven.plugins maven-javadoc-plugin attach-javadocs jar -Xdoclint:none org.apache.maven.plugins maven-gpg-plugin sign-artifacts verify sign org.sonatype.plugins nexus-staging-maven-plugin 1.6.3 true ossrh https://oss.sonatype.org/ true æœ€åæ‰§è¡Œå‘½ä»¤ mvn clean package deploy å®Œæˆå‘å¸ƒ 10.3 å‘å¸ƒåˆ°ç§æœ‰ä»“åº“ é€šè¿‡nexus-staging-maven-pluginé™¤äº†å¯ä»¥å‘å¸ƒåˆ°central.sonatype.orgå¤–ï¼Œä¹Ÿå¯ä»¥å‘å¸ƒåˆ°ç§æœ‰ä»“åº“ï¼Œä¾‹å¦‚ï¼Œå…¬å¸å†…éƒ¨è‡ªå·±æ­å»ºçš„NexusæœåŠ¡å™¨ã€‚ å¦‚æœæ²¡æœ‰ç§æœ‰NexusæœåŠ¡å™¨ï¼Œè¿˜å¯ä»¥å‘å¸ƒåˆ°GitHub Packagesã€‚GitHub Packagesæ˜¯GitHubæä¾›çš„ä»“åº“æœåŠ¡ï¼Œæ”¯æŒMavenã€NPMã€Dockerç­‰ã€‚ä½¿ç”¨GitHub Packagesæ—¶ï¼Œæ— è®ºæ˜¯å‘å¸ƒArtifactï¼Œè¿˜æ˜¯å¼•ç”¨å·²å‘å¸ƒçš„Artifactï¼Œéƒ½éœ€è¦æ˜ç¡®çš„æˆæƒTokenï¼Œå› æ­¤ï¼ŒGitHub Packagesåªèƒ½ä½œä¸ºç§æœ‰ä»“åº“ä½¿ç”¨ã€‚ åœ¨å‘å¸ƒå‰ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆç™»å½•ååœ¨ç”¨æˆ·çš„Settings-Developer settings-Personal access tokensä¸­åˆ›å»ºä¸¤ä¸ªTokenï¼Œä¸€ä¸ªç”¨äºå‘å¸ƒï¼Œä¸€ä¸ªç”¨äºä½¿ç”¨ã€‚å‘å¸ƒArtifactçš„Tokenå¿…é¡»æœ‰repoã€write:packageså’Œread:packagesæƒé™ï¼š åœ¨å‘å¸ƒç«¯ï¼ŒæŠŠGitHubçš„ç”¨æˆ·åå’Œå‘å¸ƒTokenå†™å…¥~/.m2/settings.xmlé…ç½®ä¸­ï¼š ... github-release GITHUB-USERNAME f052...c21f ç„¶åï¼Œåœ¨éœ€è¦å‘å¸ƒçš„Artifactçš„pom.xmlä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå£°æ˜ï¼š ... github-release GitHub Release https://maven.pkg.github.com/michaelliao/complex æ³¨æ„åˆ°å’Œ~/.m2/settings.xmlé…ç½®ä¸­çš„è¦ä¿æŒä¸€è‡´ï¼Œå› ä¸ºå‘å¸ƒæ—¶Mavenæ ¹æ®idæ‰¾åˆ°ç”¨äºç™»å½•çš„ç”¨æˆ·åå’ŒTokenï¼Œæ‰èƒ½æˆåŠŸä¸Šä¼ æ–‡ä»¶åˆ°GitHubã€‚æˆ‘ä»¬ç›´æ¥é€šè¿‡å‘½ä»¤mvn clean package deployéƒ¨ç½²ï¼ŒæˆåŠŸåï¼Œåœ¨GitHubç”¨æˆ·é¡µé¢å¯ä»¥çœ‹åˆ°è¯¥Artifactï¼š ä½¿ç”¨è¯¥Artifactæ—¶ï¼Œå› ä¸ºGitHubçš„Packageåªèƒ½ä½œä¸ºç§æœ‰ä»“åº“ä½¿ç”¨ï¼Œæ‰€ä»¥é™¤äº†åœ¨ä½¿ç”¨æ–¹çš„pom.xmlä¸­å£°æ˜å¤–ï¼š ... github-release GitHub Release https://maven.pkg.github.com/michaelliao/complex com.itranswarp complex 1.0.0 ... è¿˜éœ€è¦æŠŠæœ‰è¯»æƒé™çš„Tokené…ç½®åˆ°~/.m2/settings.xmlæ–‡ä»¶ä¸­ã€‚ 11.idea é›†æˆmavenç¯å¢ƒ 11.1 é…ç½®maven 11.2 åˆ›å»ºmavené¡¹ç›® 11.2.1 javaé¡¹ç›® è®¾ç½®groupidå’Œartifactid å¦‚ä½•é…ç½®ç¼–è¯‘ï¼Ÿ é€‰æ‹©æŒ‡ä»¤å’Œç¼–è¯‘çš„ç›®å½• ä¹Ÿå¯ä»¥ç”¨å³ä¾§çš„maven plugin 11.2.2 åˆ›å»ºwebé¡¹ç›® å…¶ä»–é…ç½®å’Œjavaé¡¹ç›®ä¸€æ · è¡¥å……ï¼šTomcaté…ç½® å…ˆä¸‹è½½Tomcatï¼Œå®Œæˆå®‰è£…ï¼Œå¹¶å¯åŠ¨ Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-04-12 15:58:13 "},"javaweb/MySQLå­¦ä¹ .html":{"url":"javaweb/MySQLå­¦ä¹ .html","title":"Mysqlå­¦ä¹ ","keywords":"","body":"MySQl(è€æœ) 1.åˆè¯†MySQL Qï¼šä»€ä¹ˆæ˜¯æ•°æ®åº“ï¼Ÿä»€ä¹ˆæ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Ÿä»€ä¹ˆæ˜¯SQLï¼Ÿ æ•°æ®åº“ï¼š è‹±æ–‡å•è¯ï¼šdatabaseï¼Œç®€ç§°DBã€‚æŒ‰ç…§ä¸€å®šæ ¼å¼å­˜å‚¨æ•°æ®çš„ä¸€äº›æ–‡ä»¶ç»„åˆã€‚é¡¾åæ€ä¹‰ï¼Œå­˜å‚¨æ•°æ®çš„ä»“åº“ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€å †æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å­˜å‚¨äº†å…·æœ‰ç‰¹å®šæ ¼å¼çš„æ•°æ® æ•°æ®åº“ç®¡ç† DataBaseManagement:ç®€ç§°DMBMS æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæœ¯ä¸“é—¨ç”¨æ¥ç®¡ç†æ•°æ®åº“æ±‡æ€»çš„æ•°æ®çš„ï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿå¯ä»¥å¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥ å¸¸è§çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼šMysqlã€Orcleã€Ms SqlServerã€DB2ç­‰ SQL:ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ ç¨‹åºå‘˜éœ€è¦å­¦ä¹ SQLè¯­å¥ï¼Œå®ç°å¢åˆ æ”¹æŸ¥ ä¸‰è€…å…³ç³»ï¼šDMBMS->æ‰§è¡Œ->SQL->æ“ä½œ->DB 2.å®‰è£…Mysql ç½‘è·¯æ•™ç¨‹å³å¯ï¼Œå‚»ç“œå¼å®‰è£… 2.1 é…ç½®ç¯å¢ƒå˜é‡ Windowsé…ç½®æ–¹å¼ä¸Javaç¯å¢ƒé…ç½®ç›¸åŒï¼› mac é…ç½®ç¯å¢ƒå˜é‡ æœªé…ç½®æ—¶çš„çŠ¶æ€ åˆ‡æ¢åˆ°zshå‘½ä»¤ï¼ˆæ–°çš„macç³»ç»Ÿå¤§éƒ¨åˆ†æ˜¯è¿™ä¸ªå‘½ä»¤è¡Œï¼‰ chsh -s /bin/zsh é¦–å…ˆé…ç½®ç¯å¢ƒå˜é‡æ–‡ä»¶ vim ~/.zshrc åœ¨æ‰“å¼€çš„æ–‡ä»¶é‡Œè¿½åŠ ä»¥ä¸‹å†…å®¹ export PATH=$PATH:/usr/local/mysql/bin alias mysqlstart='sudo /usr/local/mysql/support-files/mysql.server start' alias mysqlstop='sudo /usr/local/mysql/support-files/mysql.server stop' ä¹‹åï¼ŒæŒ‰escé€€å‡ºæ’å…¥æ¨¡å¼ï¼Œå¹¶è¾“å…¥:wq ( æœ‰:å“¦ ) ä½¿ç”¨vimå‘½ä»¤ä¿å­˜æ–‡ä»¶å†…å®¹ source ~/.zshrc æŸ¥çœ‹æ˜¯å¦æˆåŠŸ echo $PATH å¦‚æœæ·»åŠ æˆåŠŸï¼Œä¼šå‡ºç°/usr/local/mysql/binè¿™ä¸€å¥ï¼Œå°±è¯´æ˜é…ç½®æˆåŠŸäº† éœ€è¦æ³¨æ„ç«¯å£ä¸å¯ä»¥å†²çª 3.æ•°æ®åº“å¸¸ç”¨å‘½ä»¤è¡Œ ç™»å½•æ•°æ®åº“ mysql -uroot -p [å¯†ç ] é€€å‡ºæ•°æ®åº“ exit æŸ¥çœ‹mysqlä¸­æœ‰å“ªäº›æ•°æ®åº“ show databases; è¿™å››ä¸ªæ˜¯é»˜è®¤æ•°æ®åº“ æ‰“å¼€æŒ‡å®šçš„æ•°æ®åº“ use [æ•°æ®åº“åå­—]; åˆ›å»ºæ•°æ®åº“ create database [æ•°æ®åº“å]; 4.è¡¨å¸¸ç”¨å‘½ä»¤è¡Œ è¡¨ï¼šæ•°æ®ä¸­æœ€åŸºæœ¬çš„å•ä½tableï¼Œæ•°æ®åº“ä¸­æ˜¯ä»¥è¡¨æ ¼çš„å½¢å¼æ¥è¡¨ç¤ºæ•°æ®çš„ï¼Œä»»ä½•ä¸€å¼ è¡¨éƒ½æœ‰è¡Œå’Œåˆ— è¡Œï¼šrowï¼Œè¢«ç§°ä¸ºæ•°æ®æˆ–è®°å½• åˆ—ï¼šcolumnï¼Œè¢«ç§°ä¸ºå­—æ®µ psï¼šæ¯ä¸€ä¸ªå­—æ®µéƒ½æœ‰ï¼šå­—æ®µåã€æ•°æ®ç±»å‹ã€çº¦æŸç­‰å±æ€§ å­—æ®µåï¼šè§åçŸ¥æ„ æ•°æ®ç±»å‹ï¼šå­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œæ—¥æœŸç­‰ çº¦æŸï¼šè¢«çº¦æŸçš„å­—æ®µå…·å¤‡å”¯ä¸€æ€§ æŸ¥çœ‹è¡¨ show tables; æŸ¥çœ‹mysqlæ•°æ®åº“çš„ç‰ˆæœ¬å· select verison(); æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ˜¯å“ªä¸ªæ•°æ®åº“ select database(); æ³¨æ„ï¼š\\cç”¨æ¥ç»ˆæ­¢ä¸€æ¡å‘½ä»¤çš„è¾“å…¥ã€‚ 5.å¸¸ç”¨SQLè¯­å¥çš„åˆ†ç±» DQLï¼šæ•°æ®æŸ¥è¯¢è¯­è¨€ (DQL-Data Query Language) å‡¡æ˜¯å¸¦æœ‰selectå…³é”®å­—çš„éƒ½æ˜¯æŸ¥è¯¢è¯­å¥ DMLï¼šæ•°æ®æ“ä½œè¯­è¨€ (DML-Data Manipulation Language) å‡¡æ˜¯å¯¹è¡¨å½“ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„éƒ½æ˜¯DML insert å¢ delete åˆ  update æ”¹ æ³¨æ„ï¼šè¿™ä¸ªä¸»è¦æ˜¯æ“ä½œè¡¨ä¸­çš„æ•°æ®dataã€‚ DDLï¼šæ•°æ®å®šä¹‰è¯­è¨€ (DDL-Data Definition Language) DDLä¸»è¦æ“ä½œçš„æ˜¯è¡¨çš„ç»“æ„ï¼Œä¸æ˜¯è¡¨ä¸­çš„æ•°æ®ã€‚ createï¼šæ–°å»ºï¼Œç­‰åŒäºå¢ dropï¼šåˆ é™¤ alterï¼šä¿®æ”¹ æ³¨æ„ï¼šè¿™ä¸ªå¢åˆ æ”¹å’ŒDMLä¸åŒï¼Œè¿™ä¸ªä¸»è¦æ˜¯å¯¹è¡¨ç»“æ„è¿›è¡Œæ“ä½œã€‚ TCLï¼šäº‹åŠ¡æ§åˆ¶è¯­è¨€ (TCL-Transactional Control Language) â€‹ äº‹åŠ¡æäº¤ï¼šcommit; â€‹ äº‹åŠ¡å›æ»šï¼šrollback, DCLï¼šæ˜¯æ•°æ®æ§åˆ¶è¯­è¨€ (DCL-Data Control Language) æˆæƒï¼šgrant æ’¤é”€æƒé™ï¼šrevoke 6.å¯¼å…¥å‡†å¤‡çš„è¡¨ å¯¼å…¥sqlæ–‡ä»¶ resource [sqlè·¯å¾„å] æ³¨æ„ï¼šè·¯å¾„ä¸­ä¸è¦æœ‰ä¸­æ–‡ï¼ï¼ï¼ï¼è¿™é‡Œä½¿ç”¨åˆ°çš„èµ„æºhttps://pan.baidu.com/share/init?surl=kW7V3yLaxDJxCaZ2yp019g å¯†ç ï¼šy346 æœ€ç»ˆè¡¨å¦‚ä¸‹ å…¶ä¸­ï¼šDEPT éƒ¨é—¨è¡¨ EMPå‘˜å·¥è¡¨ SALGRADE å·¥èµ„ç­‰çº§è¡¨ åˆ é™¤è¡¨ï¼ˆè¿™é‡Œä¸å»ºè®®æµ‹è¯•ï¼‰ drop database [è¡¨å] æŸ¥çœ‹è¡¨ä¸­æ‰€æœ‰æ•°æ® select * from è¡¨å; ä¸çœ‹è¡¨ä¸­çš„æ•°æ®ï¼Œåªçœ‹è¡¨çš„ç»“æ„ desc è¡¨å; æ•ˆæœå¦‚ä¸‹ï¼š 7.æŸ¥è¯¢æ“ä½œ 7.1 æ™®é€šæŸ¥è¯¢æ–¹å¼ æŸ¥è¯¢è¡¨ä¸­æŸå‡ ä¸ªå­—æ®µ select [å­—æ®µï¼Œä¸­é—´ç”¨â€œ,â€éš”å¼€] from ã€è¡¨åã€‘ mysql> select deptno,dname from dept; +--------+------------+ | deptno | dname | +--------+------------+ | 10 | ACCOUNTING | | 20 | RESEARCH | | 30 | SALES | | 40 | OPERATIONS | +--------+------------+ 4 rows in set (0.00 sec) æŸ¥è¯¢å…¨éƒ¨å­—æ®µ #ç¬¬ä¸€ç§æ–¹å¼ï¼šå¯ä»¥æŠŠæ¯ä¸ªå­—æ®µéƒ½å†™ä¸Š select a,b,c,d,e,fâ€¦ from tablename; #ç¬¬äºŒç§æ–¹å¼ï¼šå¯ä»¥ä½¿ç”¨* select * from tablename; æ³¨æ„ï¼šè¿™ç§æ–¹å¼çš„ç¼ºç‚¹ï¼š 1ã€æ•ˆç‡ä½ 2ã€å¯è¯»æ€§å·®ã€‚ åœ¨å®é™…å¼€å‘ä¸­ä¸å»ºè®®ï¼Œå¯ä»¥è‡ªå·±ç©æ²¡é—®é¢˜ã€‚ ä½ å¯ä»¥åœ¨DOSå‘½ä»¤çª—å£ä¸­æƒ³å¿«é€Ÿçš„çœ‹ä¸€çœ‹å…¨è¡¨æ•°æ®å¯ä»¥é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚ ç»™æŸ¥è¯¢çš„ç±»èµ·åˆ«å select deptno,dname as deptname from dept; +--------+------------+ | deptno | deptname | +--------+------------+ | 10 | ACCOUNTING | | 20 | RESEARCH | | 30 | SALES | | 40 | OPERATIONS | +--------+------------+ 4 rows in set (0.00 sec) å…¶ä¸­as ä¸ºèµ·åˆ«åçš„å…³é”®å­— æ³¨æ„ï¼šåªæ˜¯å°†æ˜¾ç¤ºçš„æŸ¥è¯¢ç»“æœåˆ—åæ˜¾ç¤ºä¸ºdeptnameï¼ŒåŸè¡¨åˆ—åè¿˜æ˜¯å«ï¼šdname è®°ä½ï¼šselectè¯­å¥æ˜¯æ°¸è¿œéƒ½ä¸ä¼šè¿›è¡Œä¿®æ”¹æ“ä½œçš„ã€‚ï¼ˆå› ä¸ºåªè´Ÿè´£æŸ¥è¯¢ï¼‰ å¹¶ä¸”ï¼Œaså…³é”®å­—æ˜¯å¯ä»¥è¢«çœç•¥çš„ mysql> select deptno,dname deptname from dept; +--------+------------+ | deptno | deptname | +--------+------------+ | 10 | ACCOUNTING | | 20 | RESEARCH | | 30 | SALES | | 40 | OPERATIONS | +--------+------------+ 4 rows in set (0.00 sec) Q:å¦‚æœåˆ«åé‡Œé¢æœ‰ç©ºæ ¼è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ select deptno,dname 'dept name' from dept; //åŠ å•å¼•å· select deptno,dname \"dept name\" from dept; //åŠ åŒå¼•å· +--------+------------+ | deptno | dept name | +--------+------------+ | 10 | ACCOUNTING | | 20 | RESEARCH | | 30 | SALES | | 40 | OPERATIONS | +--------+------------+ æ³¨æ„ï¼š åœ¨æ‰€æœ‰çš„æ•°æ®åº“å½“ä¸­ï¼Œå­—ç¬¦ä¸²ç»Ÿä¸€ä½¿ç”¨å•å¼•å·æ‹¬èµ·æ¥ï¼Œ å•å¼•å·æ˜¯æ ‡å‡†ï¼ŒåŒå¼•å·åœ¨oracleæ•°æ®åº“ä¸­ç”¨ä¸äº†ã€‚ä½†æ˜¯åœ¨mysqlä¸­å¯ä»¥ä½¿ç”¨ã€‚ æŸ¥è¯¢ä¸­å¸¦å…¬å¼ mysql> select ename,sal*12 as yearsal from emp; +--------+----------+ | ename | yearsal | +--------+----------+ | SMITH | 9600.00 | | ALLEN | 19200.00 | | WARD | 15000.00 | | JONES | 35700.00 | | MARTIN | 15000.00 | | BLAKE | 34200.00 | | CLARK | 29400.00 | | SCOTT | 36000.00 | | KING | 60000.00 | | TURNER | 18000.00 | | ADAMS | 13200.00 | | JAMES | 11400.00 | | FORD | 36000.00 | | MILLER | 15600.00 | +--------+----------+ 14 rows in set (0.00 sec) ## åˆ«åä¸ºä¸­æ–‡ï¼Œéœ€è¦å¸¦ â€˜â€™ +--------+----------+ | ename | å¹´è–ª | +--------+----------+ | SMITH | 9600.00 | | ALLEN | 19200.00 | | WARD | 15000.00 | | JONES | 35700.00 | | MARTIN | 15000.00 | | BLAKE | 34200.00 | | CLARK | 29400.00 | | SCOTT | 36000.00 | | KING | 60000.00 | | TURNER | 18000.00 | | ADAMS | 13200.00 | | JAMES | 11400.00 | | FORD | 36000.00 | | MILLER | 15600.00 | +--------+----------+ 14 rows in set (0.00 sec) 7.2æ¡ä»¶æŸ¥è¯¢ è¿ç®—ç¬¦ è¯´æ˜ = ç­‰äº <>æˆ–è€…!=bu ä¸ç­‰äº å°äº å°äºç­‰äº > å¤§äº >= å¤§äºç­‰äº between ... and ... åœ¨ä¸¤ä¸ªå€¼ä¹‹é—´ is null ä¸ºç©º and å¹¶ä¸” or æˆ–è€… in åŒ…å« not é like æ¨¡ç³ŠæŸ¥è¯¢æ”¯æŒ%æˆ–_,å…¶ä¸­%åŒ¹é…ä»»æ„é•¿çš„å­—ç¬¦ï¼Œä¸€ä¸ª_åŒ¹é…ä¸€ä¸ªå­—ç¬¦ å…³é”®å­—whereå…·ä½“çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ select å­—æ®µ1,å­—æ®µ2,å­—æ®µ3â€¦ from è¡¨å where æ¡ä»¶; =ç­‰äº æŸ¥è¯¢è–ªèµ„ç­‰äº800çš„å‘˜å·¥å§“åå’Œç¼–å·ï¼š mysql> select empno,ename from emp where sal = 800; +-------+-------+ | empno | ename | +-------+-------+ | 7369 | SMITH | +-------+-------+ 1 row in set (0.00 sec) æŸ¥è¯¢SMITHçš„ç¼–å·å’Œè–ªèµ„ mysql> select empno,sal from emp where ename = 'SMITH' ; +-------+--------+ | empno | sal | +-------+--------+ | 7369 | 800.00 | +-------+--------+ 1 row in set (0.00 sec) <>!=ä¸ç­‰äº è–ªèµ„ä¸æ˜¯800çš„å‘˜å·¥ç¼–å·å’Œå§“å mysql> select empno,ename from emp where sal !=800; +-------+--------+ | empno | ename | +-------+--------+ | 7499 | ALLEN | | 7521 | WARD | | 7566 | JONES | | 7654 | MARTIN | | 7698 | BLAKE | | 7782 | CLARK | | 7788 | SCOTT | | 7839 | KING | | 7844 | TURNER | | 7876 | ADAMS | | 7900 | JAMES | | 7902 | FORD | | 7934 | MILLER | +-------+--------+ 13 rows in set (0.00 sec) # ä¸ä¸Šé¢æ•ˆæœä¸€æ · mysql> select empno,ename from emp where sal <>800; +-------+--------+ | empno | ename | +-------+--------+ | 7499 | ALLEN | | 7521 | WARD | | 7566 | JONES | | 7654 | MARTIN | | 7698 | BLAKE | | 7782 | CLARK | | 7788 | SCOTT | | 7839 | KING | | 7844 | TURNER | | 7876 | ADAMS | | 7900 | JAMES | | 7902 | FORD | | 7934 | MILLER | +-------+--------+ 13 rows in set (0.00 sec) between ... and ... ä¸¤ä¸ªå€¼ä¹‹é—´ï¼Œç­‰äº >= and æŸ¥è¯¢è–ªèµ„åœ¨2450å’Œ3000ä¹‹é—´çš„å‘˜å·¥ä¿¡æ¯ï¼ŒåŒ…æ‹¬2450å’Œ3000 mysql> select empno,ename,sal from emp where sal>=2450 and sal select empno,ename,sal from emp where sal between 2450 and 3000; +-------+-------+---------+ | empno | ename | sal | +-------+-------+---------+ | 7566 | JONES | 2975.00 | | 7698 | BLAKE | 2850.00 | | 7782 | CLARK | 2450.00 | | 7788 | SCOTT | 3000.00 | | 7902 | FORD | 3000.00 | +-------+-------+---------+ 5 rows in set (0.00 sec) æ³¨æ„ï¼šbetwwen and å¿…é¡»éµå¾ªå·¦å°å³å¤§ï¼Œbetween and æ˜¯é—­åŒºé—´ï¼ŒåŒ…æ‹¬ä¸¤ç«¯çš„å€¼ã€‚ is null ä¸º nullï¼ˆis not null ä¸ä¸ºç©ºï¼‰ æŸ¥è¯¢è¡¥åŠ©ä¸ºnullçš„å‘˜å·¥ mysql> select empno,ename,sal,comm from emp where comm is null; +-------+--------+---------+------+ | empno | ename | sal | comm | +-------+--------+---------+------+ | 7369 | SMITH | 800.00 | NULL | | 7566 | JONES | 2975.00 | NULL | | 7698 | BLAKE | 2850.00 | NULL | | 7782 | CLARK | 2450.00 | NULL | | 7788 | SCOTT | 3000.00 | NULL | | 7839 | KING | 5000.00 | NULL | | 7876 | ADAMS | 1100.00 | NULL | | 7900 | JAMES | 950.00 | NULL | | 7902 | FORD | 3000.00 | NULL | | 7934 | MILLER | 1300.00 | NULL | +-------+--------+---------+------+ 10 rows in set (0.00 sec) æŸ¥è¯¢è¡¥åŠ©ä¸ä¸ºnullçš„å‘˜å·¥ mysql> select empno,ename,sal,comm from emp where comm is not null; +-------+--------+---------+---------+ | empno | ename | sal | comm | +-------+--------+---------+---------+ | 7499 | ALLEN | 1600.00 | 300.00 | | 7521 | WARD | 1250.00 | 500.00 | | 7654 | MARTIN | 1250.00 | 1400.00 | | 7844 | TURNER | 1500.00 | 0.00 | +-------+--------+---------+---------+ 4 rows in set (0.00 sec) and å¹¶ä¸”ï¼ˆå¤šæ¡ä»¶ç»“åˆï¼‰ æŸ¥è¯¢å·¥ä½œå²—ä½æ˜¯MANAGER å¹¶ä¸”å·¥èµ„å¤§äº2500çš„å‘˜å·¥ mysql> select empno,job from emp where job = 'MANAGER' and sal>2500; +-------+---------+ | empno | job | +-------+---------+ | 7566 | MANAGER | | 7698 | MANAGER | +-------+---------+ 2 rows in set (0.00 sec) or æˆ–è€…ï¼ˆä¸¤è€…æ»¡è¶³å…¶ä¸€å³å¯ï¼‰ æŸ¥è¯¢å·¥ä½œå²—ä½æ˜¯MANAGERæˆ–SALESMANçš„å‘˜å·¥ mysql> select empno,job from emp where job = 'MANAGER' or job='SALESMAN'; +-------+----------+ | empno | job | +-------+----------+ | 7499 | SALESMAN | | 7521 | SALESMAN | | 7566 | MANAGER | | 7654 | SALESMAN | | 7698 | MANAGER | | 7782 | MANAGER | | 7844 | SALESMAN | +-------+----------+ 7 rows in set (0.00 sec) andå’ŒoråŒæ—¶å‡ºç°ï¼Œè¦è€ƒè™‘ä¼˜å…ˆçº§åˆ°çš„é—®é¢˜ æŸ¥è¯¢å·¥èµ„å¤§äº2500ï¼Œå¹¶ä¸”éƒ¨é—¨ç¼–å·ä¸º10æˆ–20éƒ¨é—¨çš„å‘˜å·¥ mysql> select * from emp where sal > 2500 and (deptno = 10 or deptno = 20); +-------+-------+-----------+------+------------+---------+------+--------+ | EMPNO | ENAME | JOB | MGR | HIREDATE | SAL | COMM | DEPTNO | +-------+-------+-----------+------+------------+---------+------+--------+ | 7566 | JONES | MANAGER | 7839 | 1981-04-02 | 2975.00 | NULL | 20 | | 7788 | SCOTT | ANALYST | 7566 | 1987-04-19 | 3000.00 | NULL | 20 | | 7839 | KING | PRESIDENT | NULL | 1981-11-17 | 5000.00 | NULL | 10 | | 7902 | FORD | ANALYST | 7566 | 1981-12-03 | 3000.00 | NULL | 20 | +-------+-------+-----------+------+------------+---------+------+--------+ 4 rows in set (0.00 sec) æ³¨æ„ï¼šand å’ŒoråŒæ—¶å‡ºç°ï¼Œandä¼˜å…ˆçº§é«˜ã€‚å¦‚æœæƒ³è®©orå…ˆæ‰§è¡Œï¼Œéœ€è¦åŠ æ‹¬å·ã€‚ä»¥åå¼€å‘ä¸­ï¼Œå¦‚æœä¸ç¡®å®šä¼˜å…ˆçº§ï¼Œå°±åŠ æ‹¬å·ã€‚ in åŒ…å«ï¼Œç›¸å½“äºå¤šä¸ª orï¼ˆnot in ä¸åœ¨è¿™ä¸ªèŒƒå›´ä¸­ï¼‰ æŸ¥è¯¢å·¥ä½œå²—ä½æ˜¯MANAGERå’ŒSALESMANçš„å‘˜å·¥ï¼š select empno,ename,job from emp where job = 'MANAGER' or job = 'SALESMAN'; select empno,ename,job from emp where job in('MANAGER', 'SALESMAN'); ä¸Šé¢ä¸¤ä¸ªæŸ¥è¯¢è¯­å¥æ˜¯ä¸€æ ·çš„æ•ˆæœ æ³¨æ„ï¼šinä¸æ˜¯ä¸€ä¸ªåŒºé—´ï¼Œinåé¢è·Ÿçš„æ˜¯å…·ä½“çš„å€¼ã€‚ æŸ¥è¯¢è–ªèµ„æ˜¯800å’Œ5000çš„å‘˜å·¥ä¿¡æ¯ï¼š mysql> select ename,sal from emp where sal in(800,5000); +-------+---------+ | ename | sal | +-------+---------+ | SMITH | 800.00 | | KING | 5000.00 | +-------+---------+ 2 rows in set (0.00 sec) not å¯ä»¥å–éï¼Œä¸»è¦ç”¨åœ¨isæˆ–inä¸­ is nullã€is not nullã€inã€not in mysql> select ename,sal from emp where sal not in(800,5000,3000); +--------+---------+ | ename | sal | +--------+---------+ | ALLEN | 1600.00 | | WARD | 1250.00 | | JONES | 2975.00 | | MARTIN | 1250.00 | | BLAKE | 2850.00 | | CLARK | 2450.00 | | TURNER | 1500.00 | | ADAMS | 1100.00 | | JAMES | 950.00 | | MILLER | 1300.00 | +--------+---------+ 10 rows in set (0.00 sec) like ä¸ºæ¨¡ç³ŠæŸ¥è¯¢ï¼Œæ”¯æŒ%æˆ–ä¸‹åˆ’çº¿åŒ¹é… %åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦ ä¸‹åˆ’çº¿ï¼Œä¸€ä¸ªä¸‹åˆ’çº¿åªåŒ¹é…ä¸€ä¸ªå­—ç¬¦ æ‰¾å‡ºåå­—é‡Œå«æœ‰Oå­—ç¬¦çš„å‘˜å·¥ mysql> select ename from emp where ename like '%o%'; +-------+ | ename | +-------+ | JONES | | SCOTT | | FORD | +-------+ 3 rows in set (0.00 sec) æ‰¾å‡ºç¬¬äºŒä¸ªå­—æ¯æ˜¯Açš„ mysql> select ename from emp where ename like '_A%'; +--------+ | ename | +--------+ | WARD | | MARTIN | | JAMES | +--------+ 3 rows in set (0.00 sec) 7.3 æ’åº é»˜è®¤æ’åºæ–¹å¼æ˜¯å‡åº mysql> select ename,sal from emp order by sal; +--------+---------+ | ename | sal | +--------+---------+ | SMITH | 800.00 | | JAMES | 950.00 | | ADAMS | 1100.00 | | WARD | 1250.00 | | MARTIN | 1250.00 | | MILLER | 1300.00 | | TURNER | 1500.00 | | ALLEN | 1600.00 | | CLARK | 2450.00 | | BLAKE | 2850.00 | | JONES | 2975.00 | | SCOTT | 3000.00 | | FORD | 3000.00 | | KING | 5000.00 | +--------+---------+ 14 rows in set (0.00 sec) æŒ‡å®šä¸ºé™åº mysql> select ename,sal from emp order by sal desc; +--------+---------+ | ename | sal | +--------+---------+ | KING | 5000.00 | | SCOTT | 3000.00 | | FORD | 3000.00 | | JONES | 2975.00 | | BLAKE | 2850.00 | | CLARK | 2450.00 | | ALLEN | 1600.00 | | TURNER | 1500.00 | | MILLER | 1300.00 | | WARD | 1250.00 | | MARTIN | 1250.00 | | ADAMS | 1100.00 | | JAMES | 950.00 | | SMITH | 800.00 | +--------+---------+ 14 rows in set (0.00 sec) æŒ‡å®šä¸ºå‡åº mysql> select ename,sal from emp order by sal asc; +--------+---------+ | ename | sal | +--------+---------+ | SMITH | 800.00 | | JAMES | 950.00 | | ADAMS | 1100.00 | | WARD | 1250.00 | | MARTIN | 1250.00 | | MILLER | 1300.00 | | TURNER | 1500.00 | | ALLEN | 1600.00 | | CLARK | 2450.00 | | BLAKE | 2850.00 | | JONES | 2975.00 | | SCOTT | 3000.00 | | FORD | 3000.00 | | KING | 5000.00 | +--------+---------+ 14 rows in set (0.00 sec) å¤šå­—æ®µæ’åº æŸ¥è¯¢å‘˜å·¥åå­—å’Œè–ªèµ„ï¼Œè¦æ±‚æŒ‰ç…§è–ªèµ„å‡åºï¼Œå¦‚æœè–ªèµ„ä¸€æ ·çš„è¯ï¼Œå†æŒ‰ç…§åå­—å‡åºæ’åˆ—ã€‚ mysql> select ename,sal from emp order by sal asc,ename asc; +--------+---------+ | ename | sal | +--------+---------+ | SMITH | 800.00 | | JAMES | 950.00 | | ADAMS | 1100.00 | | MARTIN | 1250.00 | | WARD | 1250.00 | | MILLER | 1300.00 | | TURNER | 1500.00 | | ALLEN | 1600.00 | | CLARK | 2450.00 | | BLAKE | 2850.00 | | JONES | 2975.00 | | FORD | 3000.00 | | SCOTT | 3000.00 | | KING | 5000.00 | +--------+---------+ 14 rows in set (0.00 sec) ç»¼åˆä¸€ç‚¹çš„æ¡ˆä¾‹ mysql> select ename,sal from emp where sal between 1250 and 3000 order by sal desc; +--------+---------+ | ename | sal | +--------+---------+ | SCOTT | 3000.00 | | FORD | 3000.00 | | JONES | 2975.00 | | BLAKE | 2850.00 | | CLARK | 2450.00 | | ALLEN | 1600.00 | | TURNER | 1500.00 | | MILLER | 1300.00 | | WARD | 1250.00 | | MARTIN | 1250.00 | +--------+---------+ 10 rows in set (0.00 sec) æ³¨æ„ï¼šå…³é”®å­—çš„é¡ºåºç§»åŠ¨ä¸èƒ½æ”¹å˜ select â€¦ from â€¦ where â€¦ order by â€¦ï¼ˆæ’åºæ€»æ˜¯åœ¨æœ€åæ‰§è¡Œï¼‰ 7.4 åˆ†ç»„æŸ¥è¯¢ åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œå¯èƒ½æœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œéœ€è¦å…ˆè¿›è¡Œåˆ†ç»„ï¼Œç„¶åå¯¹æ¯ä¸€ç»„çš„æ•°æ®è¿›è¡Œæ“ä½œï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ†ç»„æŸ¥è¯¢ï¼Œå°†ä»–ä»¬ä¹‹é—´çš„å…³é”®å­—å…¨éƒ¨ç»„åˆåœ¨ä¸€èµ·ï¼š select â€¦ from â€¦ where â€¦ group by â€¦ order byâ€¦ æ‰§è¡Œé¡ºåºï¼šfromã€whereã€group byã€selectã€order by æ³¨æ„ï¼šåˆ†ç»„å‡½æ•°ä¸èƒ½ç›´æ¥åœ¨whereåä½¿ç”¨ æ³¨æ„ï¼šåˆ†ç»„å‡½æ•°ä¸èƒ½ç›´æ¥ä½¿ç”¨åœ¨whereåé¢ mysql> select ename,sal from emp where sal > min(sal); ERROR 1111 (HY000): Invalid use of group function select ename,sal from emp where sal > min(sal); é”™è¯¯å†™æ³•ï¼Œå› ä¸ºåˆ†ç»„å‡½æ•°åœ¨ä½¿ç”¨çš„æ—¶å€™å¿…é¡»å…ˆåˆ†ç»„ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚whereæ‰§è¡Œçš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰åˆ†ç»„ã€‚æ‰€ä»¥whereåé¢ä¸èƒ½å‡ºç°åˆ†ç»„å‡½æ•°ã€‚ mysql> select sum(sal) from emp; +----------+ | sum(sal) | +----------+ | 29025.00 | +----------+ 1 row in set (0.00 sec) select sum(sal) from emp; å¯ä»¥ä½¿ç”¨ï¼Œå› ä¸ºselectåœ¨ group by ä¹‹åæ‰§è¡Œï¼Œgroup by é»˜è®¤æ•´å¼ è¡¨æ˜¯ä¸€ç»„ã€‚ï¼ˆè¦å……åˆ†ç†è§£SQLçš„æ‰§è¡Œé¡ºåºï¼‰ group å…³é”®å­— æ‰¾å‡ºæ¯ä¸ªå·¥ä½œå²—ä½çš„å·¥èµ„å’Œ æ€è·¯ï¼šæŒ‰ç…§å·¥ä½œå²—ä½åˆ†ç»„ï¼Œç„¶åå¯¹å·¥èµ„æ±‚å’Œã€‚ mysql> select job,sum(sal) from emp group by job; +-----------+----------+ | job | sum(sal) | +-----------+----------+ | CLERK | 4150.00 | | SALESMAN | 5600.00 | | MANAGER | 8275.00 | | ANALYST | 6000.00 | | PRESIDENT | 5000.00 | +-----------+----------+ 5 rows in set (0.00 sec) åˆ†æä¸€ä¸‹ä»¥ä¸Šè¯­å¥çš„æ‰§è¡Œé¡ºåºï¼šå…ˆä»empè¡¨ä¸­æŸ¥è¯¢æ•°æ®ï¼Œæ ¹æ®jobå­—æ®µè¿›è¡Œåˆ†ç»„ï¼Œç„¶åå¯¹æ¯ä¸€ç»„çš„æ•°æ®è¿›è¡Œsumï¼ˆsalï¼‰ æ³¨æ„ï¼šä»¥ä¸‹æƒ…å†µçš„sqlè¯­å¥æ˜¯é”™è¯¯çš„ select ename,job,sum(sal) from emp group by job;ï¼Œä¸è¦è¿™æ ·å†™ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚åœ¨mysqlä¸­å¯ä»¥æ‰§è¡Œï¼Œå…¶ä»–æ•°æ®åº“å°±æŠ¥é”™äº†ã€‚å› ä¸ºenameæœ‰14æ¡è®°å½•ï¼Œè€Œjobåªæœ‰5æ¡ã€‚ é‡è¦ç»“è®ºï¼šåœ¨ä¸€æ¡selectè¯­å¥ä¸­ï¼Œå¦‚æœæœ‰group byè¯­å¥çš„è¯ï¼Œselectåé¢åªèƒ½è·Ÿï¼šå‚åŠ åˆ†ç»„çš„å­—æ®µï¼Œä»¥åŠåˆ†ç»„å‡½æ•°ã€‚å…¶ä»–çš„ä¸€å¾‹ä¸èƒ½è·Ÿï¼ï¼ï¼ ç»ƒä¹ ï¼šæ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨çš„æœ€é«˜è–ªèµ„ å®ç°æ€è·¯ï¼šæŒ‰ç…§éƒ¨é—¨ç¼–å·åˆ†ç»„ï¼Œæ±‚æ¯ä¸€ç»„çš„æœ€å¤§å€¼ã€‚ mysql> select deptno,max(sal) from emp group by deptno; +--------+----------+ | deptno | max(sal) | +--------+----------+ | 20 | 3000.00 | | 30 | 2850.00 | | 10 | 5000.00 | +--------+----------+ 3 rows in set (0.00 sec) ä¸¤ä¸ªå­—æ®µè”åˆåˆ†ç»„ Q:æ‰¾å‡ºâ€œæ¯ä¸ªéƒ¨é—¨ï¼Œä¸åŒå·¥ä½œå²—ä½â€çš„æœ€é«˜è–ªèµ„ï¼š mysql> select deptno,job,max(sal) from emp group by deptno,job; +--------+-----------+----------+ | deptno | job | max(sal) | +--------+-----------+----------+ | 20 | CLERK | 1100.00 | | 30 | SALESMAN | 1600.00 | | 20 | MANAGER | 2975.00 | | 30 | MANAGER | 2850.00 | | 10 | MANAGER | 2450.00 | | 20 | ANALYST | 3000.00 | | 10 | PRESIDENT | 5000.00 | | 30 | CLERK | 950.00 | | 10 | CLERK | 1300.00 | +--------+-----------+----------+ 9 rows in set (0.00 sec) æ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨æœ€é«˜è–ªèµ„ï¼Œè¦æ±‚æ˜¾ç¤ºæœ€é«˜è–ªèµ„å¤§äº3000çš„ æ–¹æ³•ä¸€ï¼šæ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨æœ€é«˜è–ªèµ„ï¼Œç„¶åæ˜¾ç¤ºæœ€é«˜è–ªèµ„å¤§äº3000çš„ mysql> select deptno,max(sal) from emp group by deptno having max(sal)>3000; +--------+----------+ | deptno | max(sal) | +--------+----------+ | 10 | 5000.00 | +--------+----------+ 1 row in set (0.00 sec) æ³¨æ„ï¼šä½¿ç”¨havingå¯ä»¥å¯¹åˆ†å®Œç»„ä¹‹åçš„æ•°æ®è¿›ä¸€æ­¥è¿‡æ»¤ï¼Œæ³¨æ„havingä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œhavingä¸èƒ½ä»£æ›¿whereï¼Œhavingå¿…é¡»å’Œgroup byè”åˆä½¿ç”¨ã€‚ æ–¹æ³•äºŒï¼šå…ˆå°†å¤§äº3000çš„éƒ½æ‰¾å‡ºæ¥ï¼Œç„¶åè¿›è¡Œåˆ†ç»„ã€‚ mysql> select deptno,max(sal) from emp where sal>3000 group by deptno; +--------+----------+ | deptno | max(sal) | +--------+----------+ | 10 | 5000.00 | +--------+----------+ 1 row in set (0.00 sec) ä¼˜åŒ–ç­–ç•¥whereå’Œhavingï¼Œä¼˜å…ˆé€‰æ‹©whereï¼Œwhereå®åœ¨å®Œæˆä¸äº†äº†ï¼Œå†é€‰æ‹©havingã€‚ æ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡è–ªèµ„ï¼Œè¦æ±‚æ˜¾ç¤ºå¹³å‡è–ªèµ„é«˜äº2500çš„ mysql> select deptno,avg(sal) from emp group by deptno having avg(sal)>2500; +--------+-------------+ | deptno | avg(sal) | +--------+-------------+ | 10 | 2916.666667 | +--------+-------------+ 1 row in set (0.00 sec) 7.5 æ€»ç»“ select ... from ... where ... group by ... having ... order by ... ä»¥ä¸Šå…³é”®å­—åªèƒ½æŒ‰ç…§è¿™ä¸ªé¡ºåºæ¥ï¼Œä¸èƒ½é¢ å€’ã€‚ æ‰§è¡Œé¡ºåºï¼š1. from 2. where 3. group by 4. having 5. select 6. order by 8.å‡½æ•° 8.1 å•è¡Œå¤„ç†å‡½æ•° ç‰¹ç‚¹ï¼šä¸€ä¸ªè¾“å…¥å¯¹åº”ä¸€ä¸ªè¾“å‡º 8.1.1å­—ç¬¦ä¸²å‡½æ•°(JAVA Stringå‡½æ•°ç±»ä¼¼) upperã€lowerå‡½æ•°æ”¹å˜å¤§å°å†™ select lower(ename) from emp; å˜æˆå°å†™ mysql> select lower(ename) from emp; +--------------+ | lower(ename) | +--------------+ | smith | | allen | | ward | | jones | | martin | | blake | | clark | | scott | | king | | turner | | adams | | james | | ford | | miller | +--------------+ 14 rows in set (0.00 sec) substr,substringå‡½æ•°æˆªå–ï¼Œç´¢å¼•ä»1å¼€å§‹ï¼ˆæ²¡æœ‰0ï¼‰ mysql> select substr(ename,1,1) from emp; +-------------------+ | substr(ename,1,1) | +-------------------+ | S | | A | | W | | J | | M | | B | | C | | S | | K | | T | | A | | J | | F | | M | +-------------------+ 14 rows in set (0.00 sec) ç»ƒä¹ ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªå­—æ¯ä»¥Aå¼€å¤´çš„å‘˜å·¥ä¿¡æ¯ï¼š # æ–¹æ³•1ï¼šæ¨¡ç³ŠæŸ¥è¯¢1 mysql> select ename from emp where ename like 'A%'; +-------+ | ename | +-------+ | ALLEN | | ADAMS | +-------+ 2 rows in set (0.00 sec) # æ–¹æ³•2ï¼šsubstrå‡½æ•° mysql> select ename from emp where substr(ename,1,1) = 'A'; +-------+ | ename | +-------+ | ALLEN | | ADAMS | +-------+ 2 rows in set (0.00 sec) concatå‡½æ•°ï¼šæ‹¼æ¥å­—ç¬¦ä¸² lengthå‡½æ•°ç”¨äºè·å–å‚æ•°å€¼çš„å­—èŠ‚ä¸ªæ•° # è·å–å¯¹åº”å­—æ®µçš„é•¿åº¦ mysql> select length(ename) enamelength from emp; +-------------+ | enamelength | +-------------+ | 5 | | 5 | | 4 | | 5 | | 6 | | 5 | | 5 | | 5 | | 4 | | 6 | | 5 | | 5 | | 4 | | 6 | +-------------+ 14 rows in set (0.00 sec) # é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä»–å­—æ¯å°å†™ mysql> select concat(upper(substr(ename,1,1)),lower(substr(ename,2,length(ename) - 1 ))) as result from emp; +--------+ | result | +--------+ | Smith | | Allen | | Ward | | Jones | | Martin | | Blake | | Clark | | Scott | | King | | Turner | | Adams | | James | | Ford | | Miller | +--------+ 14 rows in set (0.00 sec) instrå‡½æ•°è¿”å›å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œè‹¥æ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å›0 trimå‡½æ•°å»å‰åç©ºæ ¼ mysql> select * from emp where ename = trim(' KING'); +-------+-------+-----------+------+------------+---------+------+--------+ | EMPNO | ENAME | JOB | MGR | HIREDATE | SAL | COMM | DEPTNO | +-------+-------+-----------+------+------------+---------+------+--------+ | 7839 | KING | PRESIDENT | NULL | 1981-11-17 | 5000.00 | NULL | 10 | +-------+-------+-----------+------+------------+---------+------+--------+ 1 row in set (0.00 sec) lpadå‡½æ•°ç”¨æŒ‡å®šå­—ç¬¦å®ç°å·¦å¡«å……æŒ‡å®šé•¿åº¦ rpadå‡½æ•°åŒä¸Š replaceå‡½æ•°æ›¿æ¢ 8.1.2 æ•°å­¦å‡½æ•° round()å‡½æ•°å››èˆäº”å…¥ï¼ˆå‰ä¸€ä¸ªå‚æ•°ä¸ºè¾“å…¥å€¼ï¼Œåä¸€ä¸ªå‚æ•°ä¸ºä¿ç•™å°æ•°ç‚¹ä½æ•°ï¼Œè´Ÿæ•°ä»£è¡¨æ­£æ•°ä½æ•°ï¼‰ å¦‚ï¼š select round(1236.567, -1) as result from emp; 1240ï¼Œä¿ç•™åˆ°åä½ select round(1236.567, -2) as result from emp; 1200ï¼Œä¿ç•™åˆ°ç™¾ä½ rand()ç”Ÿæˆéšæœºæ•° #ç”Ÿæˆ100ä»¥å†…çš„éšæœºæ•° mysql> select round(rand()*100,0) from emp; +---------------------+ | round(rand()*100,0) | +---------------------+ | 31 | | 16 | | 88 | | 93 | | 100 | | 20 | | 2 | | 51 | | 46 | | 77 | | 47 | | 3 | | 77 | | 75 | +---------------------+ 14 rows in set (0.00 sec) ifnullæ ‡è®°nullçš„ä½¿ç”¨å–ä»£å€¼ # æ±‚è§£å¹´åº¦å·¥èµ„ mysql> select ename,(sal+comm)*12 as yearsal from emp; +--------+----------+ | ename | yearsal | +--------+----------+ | SMITH | NULL | | ALLEN | 22800.00 | | WARD | 21000.00 | | JONES | NULL | | MARTIN | 31800.00 | | BLAKE | NULL | | CLARK | NULL | | SCOTT | NULL | | KING | NULL | | TURNER | 18000.00 | | ADAMS | NULL | | JAMES | NULL | | FORD | NULL | | MILLER | NULL | +--------+----------+ 14 rows in set (0.00 sec) # é˜²æ­¢nullå‡ºç° mysql> select ename,(sal+ifnull(comm,0))*12 as yearsal from emp; +--------+----------+ | ename | yearsal | +--------+----------+ | SMITH | 9600.00 | | ALLEN | 22800.00 | | WARD | 21000.00 | | JONES | 35700.00 | | MARTIN | 31800.00 | | BLAKE | 34200.00 | | CLARK | 29400.00 | | SCOTT | 36000.00 | | KING | 60000.00 | | TURNER | 18000.00 | | ADAMS | 13200.00 | | JAMES | 11400.00 | | FORD | 36000.00 | | MILLER | 15600.00 | +--------+----------+ 14 rows in set (0.00 sec) æ³¨æ„ï¼šNullåªè¦å‚ä¸äº†è¿ç®—ï¼Œç»“æœä¸ºNullã€‚ä¸ºäº†é¿å…è¿™ä¸ªæƒ³è±¡ï¼Œéœ€è¦ä½¿ç”¨ifnullå‡½æ•°ã€‚ç”¨æ³•ï¼šifnull(æ•°æ®ï¼Œè¢«å½“åšå“ªä¸ªå€¼) select ename, (sal+ifnull(comm,0)) * 12 as yearsal from emp; commå¦‚æœä¸ºnullï¼Œå½“åš0å¤„ç†ã€‚ ceilå‡½æ•°å‘ä¸Šå–æ•´ floorå‡½æ•°å‘ä¸‹å–æ•´ truncateå‡½æ•°æˆªæ–­ modå‡½æ•°å–ä½™ 8.1.3 æ—¥æœŸå‡½æ•° nowå‡½æ•° è·å–å½“å‰æ—¶é—´ï¼Œè·å–çš„æ—¶é—´å¸¦æœ‰ï¼šæ—¶åˆ†ç§’ä¿¡æ¯ï¼æ˜¯datetimeç±»å‹çš„ã€‚ curdateå‡½æ•°è¿”å›å½“å‰æ—¥æœŸï¼Œä¸åŒ…å«æ—¶é—´ curtimeå‡½æ•°è¿”å›å½“å‰æ—¶é—´ï¼Œä¸åŒ…å«æ—¥æœŸ str_to_dateå‡½æ•° å°†å­—ç¬¦ä¸²è½¬åŒ–æˆæ—¥æœŸç±»å‹ è¯­æ³•æ ¼å¼ï¼šstr_to_date(â€˜å­—ç¬¦ä¸²æ—¥æœŸâ€™, â€˜æ—¥æœŸæ ¼å¼â€™)ã€‚ str_to_dateå‡½æ•°å¯ä»¥æŠŠå­—ç¬¦ä¸²varcharè½¬æ¢æˆæ—¥æœŸdateç±»å‹æ•°æ®ï¼Œé€šå¸¸ä½¿ç”¨åœ¨æ’å…¥insertæ–¹é¢ï¼Œå› ä¸ºæ’å…¥çš„æ—¶å€™éœ€è¦ä¸€ä¸ªæ—¥æœŸç±»å‹çš„æ•°æ®ï¼Œéœ€è¦é€šè¿‡è¯¥å‡½æ•°å°†å­—ç¬¦ä¸²è½¬æ¢æˆdateã€‚ date_formatå‡½æ•° 1.å°†æ—¥æœŸç±»å‹è½¬æ¢æˆç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚ date_format(birth, '%Y/%d/%m') mysqlé»˜è®¤æ ¼å¼ï¼š%Y-%d-%mã€‚ å°†æ—¥æœŸè½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ ¼å¼ timestampdiff(intervalï¼Œdatetime1ï¼Œdatetime2)å‡½æ•° æ¯”è¾ƒçš„å•ä½intervalå¯ä»¥ä¸ºä»¥ä¸‹æ•°å€¼ FRAC_SECONDã€‚è¡¨ç¤ºé—´éš”æ˜¯æ¯«ç§’ 8.1.4 å…¶ä»–å‡½æ•° case â€¦ when â€¦ then â€¦ when â€¦ then â€¦ else â€¦ end ä¾‹å¦‚ï¼šå½“å‘˜å·¥çš„å·¥ä½œå²—ä½æ˜¯MANAGERçš„æ—¶å€™ï¼Œå·¥èµ„ä¸Šè°ƒ10%ï¼Œå½“å·¥ä½œå²—ä½æ˜¯SALESMANçš„æ—¶å€™ï¼Œå·¥èµ„ä¸Šè°ƒ50%ï¼Œå…¶ä»–æ­£å¸¸ã€‚ï¼ˆä¸æ˜¯ä¿®æ”¹æ•°æ®åº“ï¼Œåªæ˜¯æŸ¥è¯¢ç»“æœæ˜¾ç¤ºä¸ºå·¥èµ„ä¸Šè°ƒï¼‰ mysql> select -> ename, -> job, -> sal as oldsal, -> (case job when 'MANAGER' then sal*1.1 when 'SALESMAN' then sal*1.5 else sal end) as newsal -> from -> emp; +--------+-----------+---------+---------+ | ename | job | oldsal | newsal | +--------+-----------+---------+---------+ | SMITH | CLERK | 800.00 | 800.00 | | ALLEN | SALESMAN | 1600.00 | 2400.00 | | WARD | SALESMAN | 1250.00 | 1875.00 | | JONES | MANAGER | 2975.00 | 3272.50 | | MARTIN | SALESMAN | 1250.00 | 1875.00 | | BLAKE | MANAGER | 2850.00 | 3135.00 | | CLARK | MANAGER | 2450.00 | 2695.00 | | SCOTT | ANALYST | 3000.00 | 3000.00 | | KING | PRESIDENT | 5000.00 | 5000.00 | | TURNER | SALESMAN | 1500.00 | 2250.00 | | ADAMS | CLERK | 1100.00 | 1100.00 | | JAMES | CLERK | 950.00 | 950.00 | | FORD | ANALYST | 3000.00 | 3000.00 | | MILLER | CLERK | 1300.00 | 1300.00 | +--------+-----------+---------+---------+ 14 rows in set (0.00 sec) version() database() user() format() 8.2 åˆ†ç»„å‡½æ•° ä¹Ÿå«å¤šè¡Œå¤„ç†å‡½æ•°ï¼Œå¤šä¸ªè¾“å…¥å¯¹åº”ä¸€ä¸ªè¾“å‡º Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-05-11 16:11:40 "},"javaweb/MyBatis.html":{"url":"javaweb/MyBatis.html","title":"MyBatis","keywords":"","body":"MyBatiså­¦ä¹  ç¯å¢ƒé…ç½®ï¼š JDK1.8 MySql maven ideaå¼€å‘å·¥å…· å›é¡¾ï¼š JDBC MySql javaåŸºç¡€ MavençŸ¥è¯† Junit SSMæ¡†æ¶ï¼šé…ç½®æ–‡ä»¶ï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹å¼æ˜¯æŸ¥é˜…å®˜ç½‘æ–‡æ¡£ç‚¹å‡»è¿™é‡Œ ç®€ä»‹ ä»€ä¹ˆæ˜¯MyBatis? Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-04-12 15:58:13 "},"javaweb/Spring.html":{"url":"javaweb/Spring.html","title":"Spring","keywords":"","body":"Spring 1.ç®€ä»‹ Springï¼šç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥æ˜¥å¤© interface21ï¼šSpring å‰èº«ã€‚ä¹Ÿæ˜¯æ—©æœŸç‰ˆæœ¬ Rod Johnsonï¼šåˆ›å§‹äºº Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-04-12 15:58:13 "},"javaweb/SpringBootå­¦ä¹ 1.html":{"url":"javaweb/SpringBootå­¦ä¹ 1.html","title":"SpringBoot1","keywords":"","body":"SpringBootå­¦ä¹ (kuangshen) 1.å¾®æœåŠ¡é˜¶æ®µå­¦ä¹  javaseï¼šOOP mysqlï¼šæ•°æ®æŒä¹…åŒ– html+css+js+jquery+æ¡†æ¶ï¼šè§†å›¾ï¼Œæ¡†æ¶ä¸ç†Ÿç»ƒï¼Œcssä¸å¥½ç”¨ javawebï¼šç‹¬ç«‹å¼€å‘MVCä¸‰å±‚æ¶æ„çš„ç½‘ç«™ï¼ˆåŸå§‹æ¡†æ¶ï¼‰ ssmï¼šï¼ˆSpring+SpringMVC+MyBatisï¼‰æ¡†æ¶ï¼šç®€åŒ–äº†æˆ‘ä»¬çš„å¼€å‘æµç¨‹ï¼Œé…ç½®å¼€å§‹ä¹Ÿæ¯”è¾ƒå¤æ‚ warï¼štomcatçš„è¿è¡Œ springç®€åŒ–ï¼šSpringBoot -jar å†…åµŒtomcatï¼Œå¾®æœåŠ¡æ¶æ„ æœåŠ¡ä¼šè¶Šæ¥è¶Šå¤šï¼šå¦‚springcloud 1.1 å­¦ä¹ è·¯å¾„ springboot ä»€ä¹ˆæ˜¯springboot é…ç½®å¦‚ä½•ç¼–å†™ yaml è‡ªåŠ¨è£…é…åŸç†ï¼ˆéå¸¸é‡è¦ï¼‰ é›†æˆwebå¼€å‘ é›†æˆæ•°æ®åº“ åˆ†å¸ƒå¼å¼€å‘ï¼šDUbbo+zookeeper swaggeræ¥å£æ–‡æ¡£ ä»»åŠ¡è°ƒåº¦ SpringSerurty:Shiro linuxå­¦ä¹  springcloud å¾®æœåŠ¡ springcloudå…¥é—¨ Restful Eureka Ngnix Ribbon Feign Hystrix Zuul:è·¯ç”±ç½‘å…³ SpringCloud configï¼šgit JVMæœºåˆ¶ 2.ä»€ä¹ˆæ˜¯SpringBoot Spring Bootçš„ä¸»è¦ä¼˜ç‚¹ï¼š ä¸ºæ‰€æœ‰Springå¼€å‘è€…æ›´å¿«çš„å…¥é—¨ å¼€ç®±å³ç”¨ï¼Œæä¾›å„ç§é»˜è®¤é…ç½®æ¥ç®€åŒ–é¡¹ç›®é…ç½® å†…åµŒå¼å®¹å™¨ç®€åŒ–Webé¡¹ç›® æ²¡æœ‰å†—ä½™ä»£ç ç”Ÿæˆå’ŒXMLé…ç½®çš„è¦æ±‚ é‡ç‚¹æ€æƒ³ï¼šSpring Boot ä»¥çº¦å®šå¤§äºé…ç½®çš„æ ¸å¿ƒæ€æƒ³ï¼Œé»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†å¾ˆå¤šè®¾ç½®ï¼Œå¤šæ•° Spring Boot åº”ç”¨åªéœ€è¦å¾ˆå°‘çš„ Spring é…ç½® 3.ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ MVC ä¸‰å±‚æ¶æ„ MVVM å¾®æœåŠ¡æ¶æ„ DUbboï¼šhttps://dubbo.apache.org/zh/docs/ åŸæ–‡æ–‡ç« åœ°å€ï¼šhttps://martinfowler.com/articles/microservices.html ï¼ˆä½œè€…ï¼šMartin Fowlerï¼‰ ç¿»è¯‘ç‰ˆæœ¬ï¼šhttps://www.cnblogs.com/liuning8023/p/4493156.html 4.æ–°æ‰‹ä¸Šè·¯ ç¯å¢ƒï¼š jdk 1.8 maven springboot idea å®˜æ–¹ï¼šæä¾›ä¸€ä¸ªå¿«é€Ÿç”Ÿäº§çš„ç½‘ç«™ï¼Œä½†æ˜¯IDEAæœ¬èº«è‡ªå¸¦ 4.1 ç½‘ç«™åˆå§‹åŒ– ç½‘å€ï¼šhttps://start.spring.io/ 4.2 IDEAåˆ›å»º é€‰æ‹©ä¾èµ–ç¯å¢ƒ å¦‚æœæƒ³æ›´æ”¹bannerï¼Œå¯ä»¥åœ¨resourceåˆ›å»ºä¸€ä¸ªbanner.txtæ–‡ä»¶https://www.bootschool.net/ascii å¦‚ä½›ç¥–æ•ˆæœå¦‚ä¸‹ï¼š //////////////////////////////////////////////////////////////////// // _ooOoo_ // // o8888888o // // 88\" . \"88 // // (| ^_^ |) // // O\\ = /O // // ____/`---'\\____ // // .' \\\\| |// `. // // / \\\\||| : |||// \\ // // / _||||| -:- |||||- \\ // // | | \\\\\\ - /// | | // // | \\_| ''\\---/'' | | // // \\ .-\\__ `-` ___/-. / // // ___`. .' /--.--\\ `. . ___ // // .\"\" '_/___.' >'\"\". // // | | : `- \\`.;`\\ _ /`;.`/ - ` : | | // // \\ \\ `-. \\_ __\\ /__ _/ .-` / / // // ========`-.____`-.___\\_____/___.-`____.-'======== // // `=---=' // // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ // // ä½›ç¥–ä¿ä½‘ æ°¸ä¸å®•æœº æ°¸æ— BUG // //////////////////////////////////////////////////////////////////// 5.è‡ªåŠ¨è£…é…åŸç†åˆæ¢ 5.1 porm.xmlæ–‡ä»¶ spring-boot-dependencesï¼šæ ¸å¿ƒä¾èµ–åœ¨çˆ¶å·¥ç¨‹ä¸­ springbootå¼•å…¥æ—¶æ— éœ€å¼•å…¥ç‰ˆæœ¬ï¼ŒåŸå› åœ¨äºçˆ¶å·¥ç¨‹å·²ç»å¼•å…¥ç‰ˆæœ¬ org.springframework.boot spring-boot-starter-parent 2.6.4 å…¶ä¸­å…·å¤‡ä¸€ä¸ªçˆ¶çº§ä¾èµ– org.springframework.boot spring-boot-dependencies 2.6.4 è¿™é‡Œæ‰æ˜¯çœŸæ­£ç®¡ç†SpringBootåº”ç”¨é‡Œé¢æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬çš„åœ°æ–¹ï¼ŒSpringBootçš„ç‰ˆæœ¬æ§åˆ¶ä¸­å¿ƒï¼› ä»¥åæˆ‘ä»¬å¯¼å…¥ä¾èµ–é»˜è®¤æ˜¯ä¸éœ€è¦å†™ç‰ˆæœ¬ï¼›ä½†æ˜¯å¦‚æœå¯¼å…¥çš„åŒ…æ²¡æœ‰åœ¨ä¾èµ–ä¸­ç®¡ç†ç€å°±éœ€è¦æ‰‹åŠ¨é…ç½®ç‰ˆæœ¬äº†ï¼› å¯åŠ¨å™¨ å¯ä»¥ç†è§£ä¸ºspringbootçš„ä¸€ä¸ªåœºæ™¯ spring-boot-starters å¯ä»¥å¼•å…¥æ‰€æœ‰çš„ä¾èµ– springbootçš„ä½œç”¨åœ¨äºæŠŠåœºæ™¯å˜æˆå¯åŠ¨å™¨ org.springframework.boot spring-boot-starters springboot-boot-starter-xxxï¼šå°±æ˜¯spring-bootçš„åœºæ™¯å¯åŠ¨å™¨ spring-boot-starter-webï¼šå¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶ï¼› org.springframework.boot spring-boot-starter-web 5.2ä¸»å¯åŠ¨æ–‡ä»¶ 5.2.1 é»˜è®¤ä¸»å¯åŠ¨æ–‡ä»¶ /ç¨‹åºä¸»å…¥å£ //@SpringBootApplication ç”¨æ¥æ ‡æ³¨ @SpringBootApplication public class DemoApplication { public static void main(String[] args) { //ä»¥ä¸ºæ˜¯å¯åŠ¨äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå…¶å®æ˜¯å¯åŠ¨äº†ä¸€ä¸ªæœåŠ¡ SpringApplication.run(DemoApplication.class, args); } } 5.2.2 @SpringBootApplication ä½œç”¨ï¼šæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±» ï¼Œ SpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨SpringBootåº”ç”¨ï¼› @SpringBootConfiguration @EnableAutoConfiguration @ComponentScan( excludeFilters = {@Filter( type = FilterType.CUSTOM, classes = {TypeExcludeFilter.class} ), @Filter( type = FilterType.CUSTOM, classes = {AutoConfigurationExcludeFilter.class} )} ) public @interface SpringBootApplication { ... } @ComponentScan: è¿™ä¸ªæ³¨è§£åœ¨Springä¸­å¾ˆé‡è¦ ,å®ƒå¯¹åº”XMLé…ç½®ä¸­çš„å…ƒç´  ä½œç”¨ï¼šè‡ªåŠ¨æ‰«æå¹¶åŠ è½½ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶æˆ–è€…bean ï¼Œ å°†è¿™ä¸ªbeanå®šä¹‰åŠ è½½åˆ°IOCå®¹å™¨ä¸­ @SpringBootConfiguration ä½œç”¨ï¼šSpringBootçš„é…ç½®ç±» ï¼Œæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Š ï¼Œ è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpringBootçš„é…ç½®ç±»ï¼› @EnableAutoConfiguration @EnableAutoConfiguration ï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ @EnableAutoConfigurationå‘Šè¯‰SpringBootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œè¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆï¼› @Import({AutoConfigurationImportSelector.class}) public @interface EnableAutoConfiguration { ... } @import ï¼šSpringåº•å±‚æ³¨è§£@import ï¼Œ ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶ @Import({AutoConfigurationImportSelector.class}) ï¼šç»™å®¹å™¨å¯¼å…¥ç»„ä»¶ ï¼› AutoConfigurationImportSelector ï¼šè‡ªåŠ¨é…ç½®å¯¼å…¥é€‰æ‹©å™¨ï¼Œé‚£ä¹ˆå®ƒä¼šå¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨å‘¢ï¼Ÿæˆ‘ä»¬ç‚¹å‡»å»è¿™ä¸ªç±»çœ‹æºç ï¼š protected List getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) { List configurations = SpringFactoriesLoader.loadFactoryNames(this.getSpringFactoriesLoaderFactoryClass(), this.getBeanClassLoader()); Assert.notEmpty(configurations, \"No auto configuration classes found in META-INF/spring.factories. If you are using a custom packaging, make sure that file is correct.\"); return configurations; } è¿™ä¸ªæ–¹æ³•åˆè°ƒç”¨äº† SpringFactoriesLoader ç±»çš„é™æ€æ–¹æ³•ï¼æˆ‘ä»¬è¿›å…¥SpringFactoriesLoaderç±»loadFactoryNames() æ–¹æ³• public static List loadFactoryNames(Class factoryType, @Nullable ClassLoader classLoader) { ClassLoader classLoaderToUse = classLoader; if (classLoader == null) { classLoaderToUse = SpringFactoriesLoader.class.getClassLoader(); } String factoryTypeName = factoryType.getName(); //è¿™é‡Œå®ƒåˆè°ƒç”¨äº† loadSpringFactories æ–¹æ³• return (List)loadSpringFactories(classLoaderToUse).getOrDefault(factoryTypeName, Collections.emptyList()); } æˆ‘ä»¬ç»§ç»­ç‚¹å‡»æŸ¥çœ‹ loadSpringFactories æ–¹æ³• private static Map> loadSpringFactories(ClassLoader classLoader) { Map> result = (Map)cache.get(classLoader); if (result != null) { return result; } else { HashMap result = new HashMap(); try { Enumeration urls = classLoader.getResources(\"META-INF/spring.factories\"); while(urls.hasMoreElements()) { URL url = (URL)urls.nextElement(); UrlResource resource = new UrlResource(url); Properties properties = PropertiesLoaderUtils.loadProperties(resource); Iterator var6 = properties.entrySet().iterator(); while(var6.hasNext()) { Entry entry = (Entry)var6.next(); String factoryTypeName = ((String)entry.getKey()).trim(); String[] factoryImplementationNames = StringUtils.commaDelimitedListToStringArray((String)entry.getValue()); String[] var10 = factoryImplementationNames; int var11 = factoryImplementationNames.length; for(int var12 = 0; var12 { return new ArrayList(); })).add(factoryImplementationName.trim()); } } } result.replaceAll((factoryType, implementations) -> { return (List)implementations.stream().distinct().collect(Collectors.collectingAndThen(Collectors.toList(), Collections::unmodifiableList)); }); cache.put(classLoader, result); return result; } catch (IOException var14) { throw new IllegalArgumentException(\"Unable to load factories from location [META-INF/spring.factories]\", var14); } } } å…¶ä¸­META-INF/spring.factoriesè¿™ä¸ªæ–‡ä»¶å¤šæ¬¡å‡ºç° æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ WebMvcAutoConfigurationç»“æ„ æ‰€ä»¥ï¼Œè‡ªåŠ¨é…ç½®çœŸæ­£å®ç°æ˜¯ä»classpathä¸­æœå¯»æ‰€æœ‰çš„META-INF/spring.factoriesé…ç½®æ–‡ä»¶ ï¼Œå¹¶å°†å…¶ä¸­å¯¹åº”çš„ org.springframework.boot.autoconfigure. åŒ…ä¸‹çš„é…ç½®é¡¹ï¼Œé€šè¿‡åå°„å®ä¾‹åŒ–ä¸ºå¯¹åº”æ ‡æ³¨äº† @Configurationçš„JavaConfigå½¢å¼çš„IOCå®¹å™¨é…ç½®ç±» ï¼Œ ç„¶åå°†è¿™äº›éƒ½æ±‡æ€»æˆä¸ºä¸€ä¸ªå®ä¾‹å¹¶åŠ è½½åˆ°IOCå®¹å™¨ä¸­ã€‚ 5.2.3 SpringApplication æˆ‘æœ€åˆä»¥ä¸ºå°±æ˜¯è¿è¡Œäº†ä¸€ä¸ªmainæ–¹æ³•ï¼Œæ²¡æƒ³åˆ°å´å¼€å¯äº†ä¸€ä¸ªæœåŠ¡ï¼› @SpringBootApplication public class SpringbootApplication { public static void main(String[] args) { SpringApplication.run(SpringbootApplication.class, args); } } SpringApplication.runåˆ†æ åˆ†æè¯¥æ–¹æ³•ä¸»è¦åˆ†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯SpringApplicationçš„å®ä¾‹åŒ–ï¼ŒäºŒæ˜¯runæ–¹æ³•çš„æ‰§è¡Œï¼› è¿™ä¸ªç±»ä¸»è¦åšäº†ä»¥ä¸‹å››ä»¶äº‹æƒ…ï¼š æ–­å®šåº”ç”¨æ˜¯æ™®é€šåº”ç”¨è¿˜æ˜¯webåº”ç”¨ æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨åˆå§‹åŒ–å™¨ ï¼Œ è®¾ç½®åˆ°initializerså±æ€§ä¸­ æ‰¾å‡ºæ‰€æœ‰çš„åº”ç”¨ç¨‹åºç›‘å¬å™¨ï¼Œè®¾ç½®åˆ°listenerså±æ€§ä¸­ æ¨æ–­å¹¶è®¾ç½®mainæ–¹æ³•çš„å®šä¹‰ç±»ï¼Œæ‰¾åˆ°è¿è¡Œçš„ä¸»ç±» æŸ¥çœ‹æ„é€ å™¨ï¼š public SpringApplication(ResourceLoader resourceLoader, Class... primarySources) { // ...... this.webApplicationType = WebApplicationType.deduceFromClasspath(); this.setInitializers(this.getSpringFactoriesInstances(); this.setListeners(this.getSpringFactoriesInstances(ApplicationListener.class)); this.mainApplicationClass = this.deduceMainApplicationClass(); } runæ–¹æ³•æ ¸å¿ƒæµç¨‹ æ ¸å¿ƒä»£ç éƒ¨åˆ† public ConfigurableApplicationContext run(String... args) { long startTime = System.nanoTime(); DefaultBootstrapContext bootstrapContext = this.createBootstrapContext(); ConfigurableApplicationContext context = null; this.configureHeadlessProperty(); SpringApplicationRunListeners listeners = this.getRunListeners(args); listeners.starting(bootstrapContext, this.mainApplicationClass); try { ApplicationArguments applicationArguments = new DefaultApplicationArguments(args); ConfigurableEnvironment environment = this.prepareEnvironment(listeners, bootstrapContext, applicationArguments); this.configureIgnoreBeanInfo(environment); Banner printedBanner = this.printBanner(environment); context = this.createApplicationContext(); context.setApplicationStartup(this.applicationStartup); this.prepareContext(bootstrapContext, context, environment, listeners, applicationArguments, printedBanner); this.refreshContext(context); this.afterRefresh(context, applicationArguments); Duration timeTakenToStartup = Duration.ofNanos(System.nanoTime() - startTime); if (this.logStartupInfo) { (new StartupInfoLogger(this.mainApplicationClass)).logStarted(this.getApplicationLog(), timeTakenToStartup); } listeners.started(context, timeTakenToStartup); this.callRunners(context, applicationArguments); } catch (Throwable var12) { this.handleRunFailure(context, var12, listeners); throw new IllegalStateException(var12); } try { Duration timeTakenToReady = Duration.ofNanos(System.nanoTime() - startTime); listeners.ready(context, timeTakenToReady); return context; } catch (Throwable var11) { this.handleRunFailure(context, var11, (SpringApplicationRunListeners)null); throw new IllegalStateException(var11); } } 6.yamlé…ç½®æ³¨å…¥ SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ ï¼Œ é…ç½®æ–‡ä»¶åç§°æ˜¯å›ºå®šçš„ application.properties è¯­æ³•ç»“æ„ ï¼škey=value application.yaml è¯­æ³•ç»“æ„ ï¼škeyï¼šç©ºæ ¼ value é…ç½®æ–‡ä»¶çš„ä½œç”¨ ï¼šä¿®æ”¹SpringBootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼Œå› ä¸ºSpringBootåœ¨åº•å±‚éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†ï¼› ä¾‹å¦‚ï¼šserver.port=8081 6.1 yamlæ¦‚è¿° YAMLæ˜¯ \"YAML Ain't a Markup Language\" ï¼ˆYAMLä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼š\"Yet Another Markup Language\"ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ è¿™ç§è¯­è¨€ä»¥æ•°æ®ä½œä¸ºä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»¥æ ‡è®°è¯­è¨€ä¸ºé‡ç‚¹ï¼ ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ä½¿ç”¨xmlæ¥é…ç½®ï¼›æ¯”å¦‚ä¸€ä¸ªç®€å•çš„ç«¯å£é…ç½®ï¼Œæˆ‘ä»¬æ¥å¯¹æ¯”ä¸‹yamlå’Œxml ä¼ ç»Ÿxmlé…ç½®ï¼š 8081 yamlé…ç½®ï¼š server: port: 8081(æ³¨æ„ä¸­é—´ä¸€å®šè¦æœ‰ç©ºæ ¼a) 6.2 åŸºæœ¬è¯­æ³• è¯´æ˜ï¼šè¯­æ³•è¦æ±‚ä¸¥æ ¼ï¼ 1ã€ç©ºæ ¼ä¸èƒ½çœç•¥ 2ã€ä»¥ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦æ˜¯å·¦è¾¹å¯¹é½çš„ä¸€åˆ—æ•°æ®éƒ½æ˜¯åŒä¸€ä¸ªå±‚çº§çš„ã€‚ 3ã€å±æ€§å’Œå€¼çš„å¤§å°å†™éƒ½æ˜¯ååˆ†æ•æ„Ÿçš„ã€‚ å­—é¢é‡ï¼šæ™®é€šçš„å€¼ [ æ•°å­—ï¼Œå¸ƒå°”å€¼ï¼Œå­—ç¬¦ä¸² ] k: v æ³¨æ„ï¼š â€œ â€ åŒå¼•å·ï¼Œä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ ï¼Œ ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€ï¼› æ¯”å¦‚ ï¼šname: \"kuang \\n shen\" è¾“å‡º ï¼škuang æ¢è¡Œ shen '' å•å¼•å·ï¼Œä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ ï¼Œ ç‰¹æ®Šå­—ç¬¦æœ€ç»ˆä¼šå˜æˆå’Œæ™®é€šå­—ç¬¦ä¸€æ ·è¾“å‡º æ¯”å¦‚ ï¼šname: â€˜kuang \\n shenâ€™ è¾“å‡º ï¼škuang \\n shen 6.2.1 å¯¹è±¡ã€Mapï¼ˆé”®å€¼å¯¹) #å¯¹è±¡ã€Mapæ ¼å¼ k: v1: å¦‚ student: name: qinjiang age: 3 å…¶è¡Œå†…å†™æ³• student: {name: qinjiang,age: 3} 6.2.2 æ•°ç»„ pets: - cat - dog - snake - pig pets1: [dog,cat,pig,snake] 6.2.3 ä¿®æ”¹SpringBootçš„é»˜è®¤ç«¯å£å· server: port: 8081 6.3æ³¨å…¥é…ç½®æ–‡ä»¶ 6.3.1 åŸæœ‰çš„æ–¹æ³• @Component //æ³¨å†Œbeanåˆ°å®¹å™¨ä¸­ public class Dog { private String name; private Integer age; //æœ‰å‚æ— å‚æ„é€ ã€getã€setæ–¹æ³•ã€toString()æ–¹æ³• } åŠ å…¥æ³¨è§£@Vaulueåï¼š @Component //æ³¨å†Œbean public class Dog { @Value(\"é˜¿é»„\") private String name; @Value(\"18\") private Integer age; ... } åœ¨SpringBootçš„æµ‹è¯•ç±»ä¸‹æ³¨å…¥ç‹—ç‹—è¾“å‡ºä¸€ä¸‹ï¼› @SpringBootTest class DemoApplicationTests { @Autowired //å°†ç‹—ç‹—è‡ªåŠ¨æ³¨å…¥è¿›æ¥ Dog dog; @Test public void contextLoads() { System.out.println(dog); //æ‰“å°çœ‹ä¸‹ç‹—ç‹—å¯¹è±¡ } } è¿è¡Œæµ‹è¯•ï¼š Dog{name='é˜¿é»„', age=18} 6.3.2 yamlæ³¨å…¥é…ç½® Personç±»æ–‡ä»¶ @Component //æ³¨å†Œbeanåˆ°å®¹å™¨ä¸­ @ConfigurationProperties(prefix = \"person\") public class Person { private String name; private Integer age; private Boolean happy; private Date birth; private Map maps; private List lists; private Dog dog; ... } yamlé…ç½®æ–‡ä»¶ person: name: qinjiang age: 3 happy: false birth: 2000/01/01 maps: {k1: v1,k2: v2} lists: - code - girl - music dog: name: æ—ºè´¢ age: 1 åœ¨æµ‹è¯•æ–‡ä»¶æ·»åŠ é…ç½® @SpringBootTest class DemoApplicationTests { @Autowired Person person; //å°†personè‡ªåŠ¨æ³¨å…¥è¿›æ¥ @Test public void contextLoads() { System.out.println(person); //æ‰“å°personä¿¡æ¯ } } è¿è¡Œç»“æœ Person{name='qinjiang', age=3, happy=false, birth=Sat Jan 01 00:00:00 CST 2000, maps={k1=v1, k2=v2}, lists=[code, girl, music], dog=Dog{name='æ—ºè´¢', age=1}} 6.3.3 å¦‚ä½•æŒ‡å®šé…ç½®æ–‡ä»¶ @PropertySource ï¼šåŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼› @configurationPropertiesï¼šé»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼ï¼› å®ä¾‹ @PropertySource(value = \"classpath:person.properties\") @Component //æ³¨å†Œbean public class Person { @Value(\"${name}\") private String name; ...... } è¿è¡Œç»“æœï¼š Person{name='jiaoery', age=null, happy=null, birth=null, maps=null, lists=null, dog=null} 6.3.4 ä½¿ç”¨å ä½ç¬¦ ç”šè‡³éƒ¨åˆ†å…ƒç´ å¯ç”¨å ä½ç¬¦ç”Ÿæˆéšæœºæ•° person: name: qinjiang${random.uuid} # éšæœºuuid age: ${random.int} # éšæœºint happy: false birth: 2000/01/01 maps: {k1: v1,k2: v2} lists: - code - girl - music dog: name: ${person.hello:other}_æ—ºè´¢ age: 1 è¿è¡Œç»“æœ Person{name='qinjiang2d991a32-8626-4455-b277-38a1ffce25d2', age=1576338666, happy=false, birth=Sat Jan 01 00:00:00 CST 2000, maps={k1=v1, k2=v2}, lists=[code, girl, music], dog=Dog{name='other_æ—ºè´¢', age=1}} 6.3.5å›é¡¾propertiesé…ç½® ã€æ³¨æ„ã€‘propertiesé…ç½®æ–‡ä»¶åœ¨å†™ä¸­æ–‡çš„æ—¶å€™ï¼Œä¼šæœ‰ä¹±ç  ï¼Œ æˆ‘ä»¬éœ€è¦å»IDEAä¸­è®¾ç½®ç¼–ç æ ¼å¼ä¸ºUTF-8ï¼› settings-->FileEncodings ä¸­é…ç½®ï¼› é™¤äº†yamlæ–‡ä»¶ï¼Œå…¶å®propertiesæ–‡ä»¶ä¹Ÿå¯å®ç°å¯¹åº”çš„æ•ˆæœ å®ä¾‹ 1.æ–°å»ºç¼–è¾‘é…ç½®æ–‡ä»¶ user.properties 2.é…ç½®æ–‡ä»¶ user1.name=kuangshen user1.age=18 user1.sex=ç”· 3.æˆ‘ä»¬åœ¨Userç±»ä¸Šä½¿ç”¨@Valueæ¥è¿›è¡Œæ³¨å…¥ @Component //æ³¨å†Œbean @PropertySource(value = \"classpath:user.properties\") public class User { //ç›´æ¥ä½¿ç”¨@value @Value(\"${user.name}\") //ä»é…ç½®æ–‡ä»¶ä¸­å–å€¼ private String name; @Value(\"#{9*2}\") // #{SPEL} Springè¡¨è¾¾å¼ private int age; @Value(\"ç”·\") // å­—é¢é‡ private String sex; } 4.Springbootæµ‹è¯• @SpringBootTest class DemoApplicationTests { @Autowired User user; @Test public void contextLoads() { System.out.println(user); } } è¿è¡Œç»“æœ User{name='jixiang', age=18, sex='ç”·'} 6.3.6 å¯¹æ¯”@Value å’Œ@ConfigurationProperties 1.@ConfigurationPropertiesåªéœ€è¦å†™ä¸€æ¬¡å³å¯ ï¼Œ @Valueåˆ™éœ€è¦æ¯ä¸ªå­—æ®µéƒ½æ·»åŠ  2.æ¾æ•£ç»‘å®šï¼šè¿™ä¸ªä»€ä¹ˆæ„æ€å‘¢? æ¯”å¦‚æˆ‘çš„ymlä¸­å†™çš„last-nameï¼Œè¿™ä¸ªå’ŒlastNameæ˜¯ä¸€æ ·çš„ï¼Œ - åé¢è·Ÿç€çš„å­—æ¯é»˜è®¤æ˜¯å¤§å†™çš„ã€‚è¿™å°±æ˜¯æ¾æ•£ç»‘å®šã€‚å¯ä»¥æµ‹è¯•ä¸€ä¸‹ 3.JSR303æ•°æ®æ ¡éªŒ ï¼Œ è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å­—æ®µæ˜¯å¢åŠ ä¸€å±‚è¿‡æ»¤å™¨éªŒè¯ ï¼Œ å¯ä»¥ä¿è¯æ•°æ®çš„åˆæ³•æ€§ 4.å¤æ‚ç±»å‹å°è£…ï¼Œymlä¸­å¯ä»¥å°è£…å¯¹è±¡ ï¼Œ ä½¿ç”¨valueå°±ä¸æ”¯æŒ æ€»ç»“ é…ç½®ymlå’Œé…ç½®propertieséƒ½å¯ä»¥è·å–åˆ°å€¼ ï¼Œ å¼ºçƒˆæ¨è ymlï¼› å¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªä¸šåŠ¡ä¸­ï¼Œåªéœ€è¦è·å–é…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹ @valueï¼› å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªJavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œä¸€ä¸€æ˜ å°„ï¼Œå°±ç›´æ¥@configurationPropertiesï¼Œä¸è¦çŠ¹è±«ï¼ 7.JSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢ 7.1 å¦‚ä½•ä½¿ç”¨ @Component //æ³¨å†Œbean @ConfigurationProperties(prefix = \"person\") @Validated //æ•°æ®æ ¡éªŒ public class Person { @Email(message=\"é‚®ç®±æ ¼å¼é”™è¯¯\") //nameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼ private String name; } ä½¿ç”¨æ•°æ®æ ¡éªŒï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ï¼› Ps:å‰åç«¯éƒ½éœ€è¦åšæ ¡éªŒ 7.2 å¸¸è§å‚æ•° @NotNull(message=\"åå­—ä¸èƒ½ä¸ºç©º\") private String userName; @Max(value=120,message=\"å¹´é¾„æœ€å¤§ä¸èƒ½æŸ¥è¿‡120\") private int age; @Email(message=\"é‚®ç®±æ ¼å¼é”™è¯¯\") private String email; ç©ºæ£€æŸ¥ @Null éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ºnull @NotNull éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ä¸ºnull, æ— æ³•æŸ¥æ£€é•¿åº¦ä¸º0çš„å­—ç¬¦ä¸² @NotBlank æ£€æŸ¥çº¦æŸå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯Nullè¿˜æœ‰è¢«Trimçš„é•¿åº¦æ˜¯å¦å¤§äº0,åªå¯¹å­—ç¬¦ä¸²,ä¸”ä¼šå»æ‰å‰åç©ºæ ¼. @NotEmpty æ£€æŸ¥çº¦æŸå…ƒç´ æ˜¯å¦ä¸ºNULLæˆ–è€…æ˜¯EMPTY. Booelanæ£€æŸ¥ @AssertTrue éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º true @AssertFalse éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º false é•¿åº¦æ£€æŸ¥ @Size(min=, max=) éªŒè¯å¯¹è±¡ï¼ˆArray,Collection,Map,Stringï¼‰é•¿åº¦æ˜¯å¦åœ¨ç»™å®šçš„èŒƒå›´ä¹‹å†… @Length(min=, max=) string is between min and max included. æ—¥æœŸæ£€æŸ¥ @Past éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å‰ @Future éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å @Pattern éªŒè¯ String å¯¹è±¡æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™ .......ç­‰ç­‰ é™¤æ­¤ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ä¸€äº›æ•°æ®æ ¡éªŒè§„åˆ™ 7.3 å¤šç¯å¢ƒåˆ‡æ¢ profileæ˜¯Springå¯¹ä¸åŒç¯å¢ƒæä¾›ä¸åŒé…ç½®åŠŸèƒ½çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ¿€æ´»ä¸åŒçš„ç¯å¢ƒç‰ˆæœ¬ï¼Œå®ç°å¿«é€Ÿåˆ‡æ¢ç¯å¢ƒï¼› 7.3.1 å¤šé…ç½®æ–‡ä»¶(properties) æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯ application-{profile}.properties/yml , ç”¨æ¥æŒ‡å®šå¤šä¸ªç¯å¢ƒç‰ˆæœ¬ï¼› ä¾‹å¦‚ï¼š application-test.properties ä»£è¡¨æµ‹è¯•ç¯å¢ƒé…ç½® application-dev.properties ä»£è¡¨å¼€å‘ç¯å¢ƒé…ç½® ä½†æ˜¯Springbootå¹¶ä¸ä¼šç›´æ¥å¯åŠ¨è¿™äº›é…ç½®æ–‡ä»¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨application.propertiesä¸»é…ç½®æ–‡ä»¶ï¼› æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªé…ç½®æ¥é€‰æ‹©éœ€è¦æ¿€æ´»çš„ç¯å¢ƒï¼š #æ¯”å¦‚åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä½¿ç”¨devç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„ç«¯å£å·è¿›è¡Œæµ‹è¯•ï¼› #æˆ‘ä»¬å¯åŠ¨SpringBootï¼Œå°±å¯ä»¥çœ‹åˆ°å·²ç»åˆ‡æ¢åˆ°devä¸‹çš„é…ç½®äº†ï¼› spring.profiles.active=dev 7.3.2 å¤šé…ç½®æ–‡ä»¶(yaml) å’Œpropertiesé…ç½®æ–‡ä»¶ä¸­ä¸€æ ·ï¼Œä½†æ˜¯ä½¿ç”¨ymlå»å®ç°ä¸éœ€è¦åˆ›å»ºå¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œæ›´åŠ æ–¹ä¾¿äº† ! server: port: 8081 #é€‰æ‹©è¦æ¿€æ´»é‚£ä¸ªç¯å¢ƒå— spring: profiles: active: prod --- server: port: 8083 spring: profiles: dev #é…ç½®ç¯å¢ƒçš„åç§° --- server: port: 8084 spring: profiles: prod #é…ç½®ç¯å¢ƒçš„åç§° æ³¨æ„ï¼šå¦‚æœymlå’ŒpropertiesåŒæ—¶éƒ½é…ç½®äº†ç«¯å£ï¼Œå¹¶ä¸”æ²¡æœ‰æ¿€æ´»å…¶ä»–ç¯å¢ƒ ï¼Œ é»˜è®¤ä¼šä½¿ç”¨propertiesé…ç½®æ–‡ä»¶çš„ï¼ 7.3.3 é…ç½®æ–‡ä»¶åŠ è½½ä½ç½® åŸæ–‡é“¾æ¥ springboot å¯åŠ¨ä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„application.propertiesæˆ–è€…application.ymlæ–‡ä»¶ä½œä¸ºSpring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼š ä¼˜å…ˆçº§1ï¼šé¡¹ç›®è·¯å¾„ä¸‹çš„configæ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶ ä¼˜å…ˆçº§2ï¼šé¡¹ç›®è·¯å¾„ä¸‹é…ç½®æ–‡ä»¶ ä¼˜å…ˆçº§3ï¼šèµ„æºè·¯å¾„ä¸‹çš„configæ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶ ä¼˜å…ˆçº§4ï¼šèµ„æºè·¯å¾„ä¸‹é…ç½®æ–‡ä»¶ SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼›äº’è¡¥é…ç½®ï¼› Ps:å…·ä½“å¯ä»¥å‚è€ƒdemo 7.3.4 æ‹“å±•ï¼Œè¿ç»´å°æŠ€å·§ æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½® é¡¹ç›®æ‰“åŒ…å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›è¿™ç§æƒ…å†µï¼Œä¸€èˆ¬æ˜¯åæœŸè¿ç»´åšçš„å¤šï¼Œç›¸åŒé…ç½®ï¼Œå¤–éƒ¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§æœ€é«˜ java -jar spring-boot-config.jar --spring.config.location=F:/application.properties 8.è‡ªåŠ¨è£…é…åŸç†å†ç†è§£ 8.1 åˆ†æè‡ªåŠ¨é…ç½®åŸç† ä»¥HttpEncodingAutoConfigurationï¼ˆHttpç¼–ç è‡ªåŠ¨é…ç½®ï¼‰ä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†ï¼› //è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå’Œä»¥å‰ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼› @Configuration //å¯åŠ¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼› //è¿›å…¥è¿™ä¸ªHttpPropertiesæŸ¥çœ‹ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpPropertiesç»‘å®šèµ·æ¥ï¼› //å¹¶æŠŠHttpPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­ @EnableConfigurationProperties({HttpProperties.class}) //Springåº•å±‚@Conditionalæ³¨è§£ //æ ¹æ®ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼› //è¿™é‡Œçš„æ„æ€å°±æ˜¯åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œå½“å‰é…ç½®ç±»ç”Ÿæ•ˆ @ConditionalOnWebApplication( type = Type.SERVLET ) //åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±»CharacterEncodingFilterï¼›SpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ï¼› @ConditionalOnClass({CharacterEncodingFilter.class}) //åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®ï¼šspring.http.encoding.enabledï¼› //å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„ //å³ä½¿æˆ‘ä»¬é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®pring.http.encoding.enabled=trueï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ï¼› @ConditionalOnProperty( prefix = \"spring.http.encoding\", value = {\"enabled\"}, matchIfMissing = true ) public class HttpEncodingAutoConfiguration { //ä»–å·²ç»å’ŒSpringBootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº† private final Encoding properties; //åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‹¿ public HttpEncodingAutoConfiguration(HttpProperties properties) { this.properties = properties.getEncoding(); } //ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å– @Bean @ConditionalOnMissingBean //åˆ¤æ–­å®¹å™¨æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Ÿ public CharacterEncodingFilter characterEncodingFilter() { CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter(); filter.setEncoding(this.properties.getCharset().name()); filter.setForceRequestEncoding(this.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.REQUEST)); filter.setForceResponseEncoding(this.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.RESPONSE)); return filter; } //ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ } ä¸€å¥è¯æ€»ç»“ ï¼šæ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆï¼ ä¸€ä½†è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼›è¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼› è¿™äº›ç»„ä»¶çš„å±æ€§æ˜¯ä»å¯¹åº”çš„propertiesç±»ä¸­è·å–çš„ï¼Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ï¼› æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§éƒ½æ˜¯åœ¨xxxxPropertiesç±»ä¸­å°è£…ç€ï¼› é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªå±æ€§ç±» @ConditionalOnProperty( prefix = \"server.servlet.encoding\", value = {\"enabled\"}, matchIfMissing = true ) public class HttpEncodingAutoConfiguration { ... } è¿™å°±æ˜¯è‡ªåŠ¨è£…é…çš„åŸç†ï¼ 8.2 ç²¾é«“ 1ã€SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±» 2ã€æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰åœ¨SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»å½“ä¸­ï¼› 3ã€æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼›ï¼ˆåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶å­˜åœ¨åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ‰‹åŠ¨é…ç½®äº†ï¼‰ 4ã€ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–æŸäº›å±æ€§ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼å³å¯ï¼› xxxxAutoConfigurartionï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ xxxxProperties:å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼› 8.3 äº†è§£ï¼š@Conditional è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼› @Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰ ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®é…é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆï¼› é‚£ä¹ˆå¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åŠ è½½äº†è¿™ä¹ˆå¤šçš„é…ç½®ç±»ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„éƒ½ç”Ÿæ•ˆäº†ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯ç”¨ debug=trueå±æ€§ï¼›æ¥è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼› #å¼€å¯springbootçš„è°ƒè¯•ç±» debug=true Positive matches:ï¼ˆè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„ï¼šæ­£åŒ¹é…ï¼‰ Negative matches:ï¼ˆæ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰åŒ¹é…æˆåŠŸçš„è‡ªåŠ¨é…ç½®ç±»ï¼šè´ŸåŒ¹é…ï¼‰ Unconditional classes: ï¼ˆæ²¡æœ‰æ¡ä»¶çš„ç±»ï¼‰ 9.SpringBoot Webå¼€å‘ jarï¼šwebapp è‡ªåŠ¨è£…é… springbooté…ç½®äº†ä»€ä¹ˆï¼Ÿ xxxxAutoConfigurartionï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ xxxxProperties:å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼› éœ€è¦è§£å†³çš„é—®é¢˜ï¼š å¯¼å…¥é™æ€èµ„æº é¦–é¡µ jspï¼Œæ¨¡ç‰ˆå¼•æ“Thymeleaf è£…é…æ‹“å±•SpringMvc å¢åˆ æ”¹æŸ¥ æ‹¦æˆªå™¨ å›½é™…åŒ– 9.1 é™æ€èµ„æº æ–°å»ºé¡¹ç›®resourceä¸‹çš„ç»“æ„ staticå­˜å‚¨é™æ€å˜é‡ï¼Œæ¯”å¦‚è¯´ï¼Œå›¾ç‰‡ï¼Œæ–‡ä»¶ï¼Œhtmlï¼ˆä¸ä½¿ç”¨thymeleafè¿™ç±»åŠ¨æ€é…ç½®åº“ï¼‰ templateså­˜å‚¨æ¨¡ç‰ˆï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€é…ç½®åº“ï¼Œä¸€èˆ¬è¿™é‡Œç»“åˆthymeleafæ¡†æ¶ä½¿ç”¨ 9.1.1 é»˜è®¤é™æ€èµ„æºè·¯å¾„ classpath:/static, classpath:/public, classpath:/resources, classpath:/META-INF/resources classpath åœ¨é¡¹ç›®ä¸­å°±ç›¸å½“äºsrc/main/resourcesæ–‡ä»¶å¤¹. 9.1.2 è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„ spring: web: resources: static-locations: classpath:templates/ æˆ‘ä»¬é…ç½®äº†é™æ€èµ„æºè·¯å¾„æ˜ å°„ä¹‹åï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®è¿™ä¸ªè·¯å¾„ä¸‹é¢çš„èµ„æºï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºè‡ªå®šä¹‰äº†é™æ€èµ„æºè·¯å¾„ï¼Œå°±æ˜¯è¯´é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„éƒ½ä¼šå¤±æ•ˆã€‚ 9.2 é¦–é¡µå’Œå›¾æ ‡å®šåˆ¶ å›¾æ ‡ä¿®æ”¹éœ€è¦å…ˆå…³é—­é»˜è®¤å›¾æ ‡ å…³é—­é»˜è®¤å›¾æ ‡ spring.mvc.favicon.enabled=false è¾ƒæ–°ç‰ˆæœ¬ä¸­ï¼Œä¸éœ€è¦å…³é—­é»˜è®¤å›¾æ ‡ï¼Œåªéœ€è¦æŠŠå›¾æ ‡åç§°å’Œæ ¼å¼å†™ä¸ºï¼šfavicon.icoï¼Œæ”¾åˆ°é™æ€èµ„æºç›®å½•ä¸‹å°±å¯ä»¥äº† 10.thymeleafæ¨¡ç‰ˆå¼•æ“ Qï¼šä»€ä¹ˆæ˜¯æ¨¡ç‰ˆå¼•æ“ï¼Ÿ Thymeleaf å®˜ç½‘ï¼šhttps://www.thymeleaf.org/ Thymeleaf åœ¨Github çš„ä¸»é¡µï¼šhttps://github.com/thymeleaf/thymeleaf å®šä¹‰ï¼šThymeleaf æ˜¯ä¸€æ¬¾ç”¨äºæ¸²æŸ“ XML/XHTML/HTML5 å†…å®¹çš„æ¨¡æ¿å¼•æ“ã€‚å®ƒä¸ JSPï¼ŒVelocityï¼ŒFreeMaker ç­‰æ¨¡æ¿å¼•æ“ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥è½»æ˜“åœ°ä¸ Spring MVC ç­‰ Web æ¡†æ¶é›†æˆã€‚ä¸å…¶å®ƒæ¨¡æ¿å¼•æ“ç›¸æ¯”ï¼ŒThymeleaf æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ï¼Œå³ä½¿ä¸å¯åŠ¨ Web åº”ç”¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å¹¶æ­£ç¡®æ˜¾ç¤ºæ¨¡æ¿é¡µé¢ ã€‚ 10.1 å¼•å…¥Thymeleaf mavenå¼•å…¥ä¾èµ–åŒ… org.springframework.boot spring-boot-starter-thymeleaf mavenä¸‹è½½çš„åŒ… æ³¨æ„ï¼šï¼ˆç‰ˆæœ¬æœ‰ä¸åŒï¼‰ 10.2 å¦‚ä½•ä½¿ç”¨Thymeleaf é¡¹ç›®ç»“æ„ é¦–å…ˆæ˜¯controller package com.Thymeleaf.controller; import org.springframework.stereotype.Controller; import org.springframework.ui.Model; import org.springframework.web.bind.annotation.GetMapping; @Controller public class urlController { @GetMapping(\"index\")//é¡µé¢çš„urlåœ°å€ public String getindex(Model model)//å¯¹åº”å‡½æ•° { model.addAttribute(\"name\",\"jiaoery\"); return \"index\";//ä¸templatesä¸­index.htmlå¯¹åº” } } ä¸Šè¿°ä»£ç å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„controllerã€‚éƒ¨åˆ†å«ä¹‰å¦‚ä¸‹ï¼š @controller æ³¨è§£çš„æ„æ€å°±æ˜¯å£°æ˜è¿™ä¸ªjavaæ–‡ä»¶ä¸ºä¸€ä¸ªcontrolleræ§åˆ¶å™¨ã€‚ @GetMapping(\"index\") å…¶ä¸­@GetMappingçš„æ„æ€æ˜¯è¯·æ±‚çš„æ–¹å¼ä¸ºgetæ–¹å¼(å³å¯é€šè¿‡æµè§ˆå™¨ç›´æ¥è¯·æ±‚)ï¼Œè€Œé‡Œé¢çš„indexè¡¨ç¤ºè¿™ä¸ªé¡µé¢(æ¥å£)çš„urlåœ°å€(è·¯å¾„)ã€‚å³åœ¨æµè§ˆå™¨å¯¹é¡¹ç›®ç½‘é¡µè®¿é—®çš„åœ°å€ã€‚ getindex() æ˜¯@GetMapping(\"index\")æ³¨è§£å¯¹åº”çš„å‡½æ•°ï¼Œå…¶ç±»å‹ä¸ºStringç±»å‹è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå‚æ•°Modelç±»å‹å³ç”¨æ¥å‚¨å­˜æ•°æ®ä¾›æˆ‘ä»¬Thymeleafé¡µé¢ä½¿ç”¨ã€‚ model.addAttribute(\"name\",\"bigsai\") å°±æ˜¯Modelå­˜å…¥æ•°æ®çš„ä¹¦å†™æ–¹å¼ï¼ŒModelæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼Œç›¸å½“äºç»´æŠ¤ä¸€ä¸ªMapä¸€æ ·ï¼Œè€ŒModelä¸­çš„æ•°æ®é€šè¿‡controllerå±‚çš„å…³è”ç»‘å®šåœ¨viewå±‚(å³Thymeleafä¸­)å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ return \"index\"ï¼šè¿™ä¸ªindexå°±æ˜¯åœ¨templatesç›®å½•ä¸‹å¯¹åº”æ¨¡æ¿(æœ¬æ¬¡ä¸ºThymeleafæ¨¡æ¿)çš„åç§°ï¼Œå³åº”è¯¥å¯¹åº”hello.htmlè¿™ä¸ªThymeleafæ–‡ä»¶(ä¸é¡µé¢å…³è”é»˜è®¤è§„åˆ™ä¸ºï¼štemplatesç›®å½•ä¸‹è¿”å›å­—ç¬¦ä¸².html)ã€‚ å…¶æ¬¡æ˜¯index.htmlä¸­çš„ç½‘é¡µæ•°æ® title hello ç¬¬ä¸€ä¸ªThymeleafç¨‹åº nameæ˜¯jiaery(æˆ‘æ˜¯ç¦»çº¿æ•°æ®) è¿è¡Œç»“æœï¼š ä¸ä½¿ç”¨thymeleaf ä½¿ç”¨thymeleaf åŸºæœ¬åˆ°è¿™é‡Œç®—å…¥é—¨äº† 10.3 Thymeleafè§„åˆ™ Thymeleaf æ¨¡æ¿å¼•æ“å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š åŠ¨é™ç»“åˆï¼šThymeleaf æ—¢å¯ä»¥ç›´æ¥ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼ŒæŸ¥çœ‹é¡µé¢çš„é™æ€æ•ˆæœï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Web åº”ç”¨ç¨‹åºè¿›è¡Œè®¿é—®ï¼ŒæŸ¥çœ‹åŠ¨æ€é¡µé¢æ•ˆæœã€‚ å¼€ç®±å³ç”¨ï¼šThymeleaf æä¾›äº† Spring æ ‡å‡†æ–¹è¨€ä»¥åŠä¸€ä¸ªä¸ SpringMVC å®Œç¾é›†æˆçš„å¯é€‰æ¨¡å—ï¼Œå¯ä»¥å¿«é€Ÿçš„å®ç°è¡¨å•ç»‘å®šã€å±æ€§ç¼–è¾‘å™¨ã€å›½é™…åŒ–ç­‰åŠŸèƒ½ã€‚ å¤šæ–¹è¨€æ”¯æŒï¼šå®ƒæä¾›äº† Thymeleaf æ ‡å‡†å’Œ Spring æ ‡å‡†ä¸¤ç§æ–¹è¨€ï¼Œå¯ä»¥ç›´æ¥å¥—ç”¨æ¨¡æ¿å®ç° JSTLã€ OGNL è¡¨è¾¾å¼ï¼›å¿…è¦æ—¶ï¼Œå¼€å‘äººå‘˜ä¹Ÿå¯ä»¥æ‰©å±•å’Œåˆ›å»ºè‡ªå®šä¹‰çš„æ–¹è¨€ã€‚ ä¸ SpringBoot å®Œç¾æ•´åˆï¼šSpringBoot ä¸º Thymeleaf æä¾›äº†çš„é»˜è®¤é…ç½®ï¼Œå¹¶ä¸”è¿˜ä¸º T 10.4 Thymeleaf è¯­æ³• Springbootå®˜æ–¹æä¾›çš„é…ç½®å†…å®¹æœ‰ä»¥ä¸‹ï¼š # THYMELEAF (ThymeleafAutoConfiguration) spring.thymeleaf.cache=true # Whether to enable template caching. spring.thymeleaf.check-template=true # Whether to check that the template exists before rendering it. spring.thymeleaf.check-template-location=true # Whether to check that the templates location exists. spring.thymeleaf.enabled=true # Whether to enable Thymeleaf view resolution for Web frameworks. spring.thymeleaf.enable-spring-el-compiler=false # Enable the SpringEL compiler in SpringEL expressions. spring.thymeleaf.encoding=UTF-8 # Template files encoding. spring.thymeleaf.excluded-view-names= # Comma-separated list of view names (patterns allowed) that should be excluded from resolution. spring.thymeleaf.mode=HTML # Template mode to be applied to templates. See also Thymeleaf's TemplateMode enum. spring.thymeleaf.prefix=classpath:/templates/ # Prefix that gets prepended to view names when building a URL. spring.thymeleaf.reactive.chunked-mode-view-names= # Comma-separated list of view names (patterns allowed) that should be the only ones executed in CHUNKED mode when a max chunk size is set. spring.thymeleaf.reactive.full-mode-view-names= # Comma-separated list of view names (patterns allowed) that should be executed in FULL mode even if a max chunk size is set. spring.thymeleaf.reactive.max-chunk-size=0 # Maximum size of data buffers used for writing to the response, in bytes. spring.thymeleaf.reactive.media-types= # Media types supported by the view technology. spring.thymeleaf.servlet.content-type=text/html # Content-Type value written to HTTP responses. spring.thymeleaf.suffix=.html # Suffix that gets appended to view names when building a URL. spring.thymeleaf.template-resolver-order= # Order of the template resolver in the chain. spring.thymeleaf.view-names= # Comma-separated list of view names (patterns allowed) that can be resolved. ä¸Šé¢çš„é…ç½®æœ‰äº›æˆ‘ä»¬å¯èƒ½ä¸å¸¸ä½¿ç”¨ï¼Œå› ä¸ºSpringbootå®˜æ–¹åšäº†é»˜è®¤é…ç½®å¤§éƒ¨åˆ†èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„ä½¿ç”¨éœ€æ±‚ï¼Œä½†å¦‚æœä½ çš„é¡¹ç›®æœ‰ç‰¹æ®Šéœ€æ±‚ä¹Ÿéœ€è¦å¦¥å–„ä½¿ç”¨è¿™äº›é…ç½® å‡ ä¸ªç‰¹åˆ«é…ç½® æ¯”å¦‚spring.thymeleaf.cache=falseæ˜¯å¦å…è®¸é¡µé¢ç¼“å­˜çš„é…ç½®ï¼Œæˆ‘ä»¬åœ¨å¼€å‘æ—¶å€™è¦ç¡®ä¿é¡µé¢æ˜¯æœ€æ–°çš„æ‰€ä»¥éœ€è¦ç¦ç”¨ç¼“å­˜ï¼›è€Œåœ¨ä¸Šçº¿è¿è¥æ—¶å¯èƒ½é¡µé¢ä¸å¸¸æ”¹åŠ¨ä¸ºäº†å‡å°‘æœåŠ¡ç«¯å‹åŠ›ä»¥åŠæå‡å®¢æˆ·ç«¯å“åº”é€Ÿåº¦ä¼šå…è®¸é¡µé¢ç¼“å­˜çš„ä½¿ç”¨ã€‚ å†æ¯”å¦‚åœ¨å¼€å‘è™½ç„¶æˆ‘ä»¬å¤§éƒ¨åˆ†ä½¿ç”¨UTF-8å¤šä¸€äº›ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨spring.thymeleaf.encoding=UTF-8æ¥ç¡®å®šé¡µé¢çš„ç¼–ç ï¼Œä½†å¦‚æœä½ çš„é¡¹ç›®æ˜¯GBKç¼–ç å°±éœ€è¦å°†å®ƒæ”¹æˆGBKã€‚ å¦å¤–Springbooté»˜è®¤æ¨¡æ¿å¼•æ“æ–‡ä»¶æ˜¯æ”¾åœ¨templatesç›®å½•ä¸‹ï¼šspring.thymeleaf.prefix=classpath:/templates/,å¦‚æœä½ æœ‰éœ€æ±‚å°†æ¨¡æ¿å¼•æ“ä¹Ÿå¯ä¿®æ”¹é…ç½®ï¼Œå°†templatesæ”¹ä¸ºè‡ªå·±éœ€è¦çš„ç›®å½•ã€‚åŒç†å…¶ä»–çš„é…ç½®å¦‚æœéœ€è¦è‡ªå®šä¹‰åŒ–ä¹Ÿå¯å‚ç…§ä¸Šé¢é…ç½®è¿›è¡Œä¿®æ”¹ã€‚ 10.4.1 æ ‡ç­¾ å¸¸ç”¨çš„æ ‡ç­¾ æ ‡ç­¾ ä½œç”¨ ç¤ºä¾‹ th:id æ›¿æ¢id th:text æ–‡æœ¬æ›¿æ¢ bigsai th:utext æ”¯æŒhtmlçš„æ–‡æœ¬æ›¿æ¢ content th:object æ›¿æ¢å¯¹è±¡ th:value æ›¿æ¢å€¼ th:each è¿­ä»£ th:href æ›¿æ¢è¶…é“¾æ¥ è¶…é“¾æ¥ th:src æ›¿æ¢èµ„æº 10.4.2 é“¾å¼è¡¨è¾¾@{â€¦} ä¸Šé¢æˆ‘ä»¬å·²ç»å­¦ä¹ åˆ°Thymeleafæ˜¯ä¸€ä¸ªåŸºäºhtmlçš„æ¨¡æ¿å¼•æ“ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯éœ€è¦åŠ å…¥ç‰¹å®šæ ‡ç­¾æ¥å£°æ˜å’Œä½¿ç”¨Thymeleafçš„è¯­æ³•ã€‚æˆ‘ä»¬éœ€è¦åœ¨Thymeleafçš„å¤´éƒ¨åŠ Thymeleafæ ‡è¯†ï¼š åœ¨Thymeleaf ä¸­ï¼Œå¦‚æœæƒ³å¼•å…¥é“¾æ¥æ¯”å¦‚linkï¼Œhrefï¼Œsrcï¼Œéœ€è¦ä½¿ç”¨@{èµ„æºåœ°å€}å¼•å…¥èµ„æºã€‚å…¶ä¸­èµ„æºåœ°å€å¯ä»¥staticç›®å½•ä¸‹çš„é™æ€èµ„æºï¼Œä¹Ÿå¯ä»¥æ˜¯äº’è”ç½‘ä¸­çš„ç»å¯¹èµ„æºã€‚ å¼•å…¥css å¼•å…¥JavaScriptï¼š è¶…é“¾æ¥ï¼š è¶…é“¾æ¥ æœ€ç»ˆæ•ˆæœ 10.4.3 å˜é‡è¡¨è¾¾å¼: ${...} åœ¨Thymeleafä¸­å¯ä»¥é€šè¿‡${â€¦}è¿›è¡Œå–å€¼ï¼Œè¿™ç‚¹å’ŒONGLè¡¨è¾¾å¼è¯­æ³•ä¸€è‡´ã€‚ é¦–å…ˆå¼•å…¥ä¸€ä¸ªbeanç±»Child public class Child { private String name; private int age; private String detail; public Child(String name, int age, String detail) { this.name = name; this.age = age; this.detail = detail; } public String getName() { return name; } public void setName(String name) { this.name = name; } public int getAge() { return age; } public void setAge(int age) { this.age = age; } public String getDetail() { return detail; } public void setDetail(String detail) { this.detail = detail; } } ç„¶ååœ¨Modelä¸­æ·»åŠ ä¸€äº›æ•°æ® @GetMapping(\"index\") public String getIndex(Model model){ Child user1=new Child(\"bigsai\",22,\"ä¸€ä¸ªå¹½é»˜ä¸”çƒ­çˆ±javaçš„ç¤¾ä¼šé’å¹´\"); List userList=new ArrayList<>(); userList.add(\"zhang san 66\"); userList.add(\"li si 66\"); userList.add(\"wang wu 66\"); Map map=new HashMap<>(); map.put(\"place\",\"cloudwalk\"); map.put(\"feeling\",\"very well\"); //æ•°æ®æ·»åŠ åˆ°modelä¸­ model.addAttribute(\"name\",\"jiaoery\");//æ™®é€šå­—ç¬¦ä¸² model.addAttribute(\"user\",user1);//å‚¨å­˜javabean model.addAttribute(\"userlist\",userList);//å‚¨å­˜List model.addAttribute(\"map\",map);//å‚¨å­˜Map model.addAttribute(\"name\",\"jiaoery\"); return \"index\";//ä¸templatesä¸­index.htmlå¯¹åº” } ç„¶ååœ¨index.htmlæ–‡ä»¶ä¸‹ä½¿ç”¨æ•°æ® title hello ç¬¬ä¸€ä¸ªThymeleafç¨‹åº nameæ˜¯jiaoery(æˆ‘æ˜¯ç¦»çº¿æ•°æ®) è¶…é“¾æ¥ æ™®é€šå­—ç¬¦ä¸² JavaBeanå¯¹è±¡ ä»‹ç» å¹´é¾„ ä»‹ç» Listå–å€¼ Mapå–å€¼ place: feeling: Mapéå† è¿è¡Œç»“æœ 10.4.4 é€‰æ‹©å˜é‡è¡¨è¾¾å¼: *{...} å˜é‡è¡¨è¾¾å¼ä¸ä»…å¯ä»¥å†™æˆ${...}ï¼Œè€Œä¸”è¿˜å¯ä»¥å†™æˆ*{...}ã€‚ï¼ˆå¯ä»¥ç†è§£ä¸ºä¸¤è€…ç›¸ç­‰ï¼‰ 10.4.5 æ¶ˆæ¯è¡¨è¾¾: #{...} è¿™é‡Œæ˜¯ä½¿ç”¨é…ç½®å‚æ•°çš„æ–¹å¼å®ç°ï¼Œå¦‚yamlæˆ–proprietyæ–‡ä»¶é…ç½®ï¼›é€šä¿—æ˜“æ‡‚çš„æ¥è¯´#{â€¦}è¯­æ³•å°±æ˜¯ç”¨æ¥è¯»å–é…ç½®æ–‡ä»¶ä¸­æ•°æ®çš„ã€‚åœ¨Thymeleafä½ å¯ä»¥ä½¿ç”¨#{...}è¯­æ³•è·å–æ¶ˆæ¯ï¼Œ é¦–å…ˆåœ¨templatesç›®å½•ä¸‹å»ºç«‹home.propertiesä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š jiaoery.name=jiaoery jiaoery.age=22 province=chongqing åœ¨application.propertiesä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š spring.messages.basename=templates/home æˆ–è€…ä½¿ç”¨yamlæ–‡ä»¶ä¸‹æ·»åŠ (æ³¨æ„æ˜¯ä¸‰è¡Œï¼Œä¹Ÿæ³¨æ„ç©ºæ ¼) messages: basename: templates/home ç„¶åH5ä¸­æ·»åŠ å¯¹åº”çš„é…ç½®æ–‡ä»¶ æ¶ˆæ¯è¡¨è¾¾ name å¹´é¾„ province æœ€ç»ˆç»“æœ 11.è£…é…SpringMVC Spring Booté€šè¿‡WebMvcAutoConfigurationæ¥æä¾›ä¸€äº›é»˜è®¤é…ç½®ï¼›å¤§å¤šæ•°æ—¶å€™ä½¿ç”¨é»˜è®¤çš„é…ç½®å³å¯æ»¡è¶³è¦æ±‚ã€‚ä½†æœ‰æ—¶å¯èƒ½éœ€è¦åšä¸€äº›ä¸ªæ€§åŒ–å®šåˆ¶ï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ¥è¿›è¡Œã€‚ 11.1 ä½¿ç”¨EnableWebMvcæ³¨è§£ //åªæ˜¯æ³—æ´ªConfigurationçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å¯¹æŸäº›mvcé…ç½®åšä¸ªæ€§åŒ–è®¾ç½® @Configuration //æ³¨è§£ä¸èƒ½è½»æ˜“ä½¿ç”¨ï¼Œä¸€æ—¦ä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼Œå°±å¿…é¡»æŠŠæ‰€æœ‰mvcçš„é…ç½®éƒ½å®ç° @EnableWebMvc public class MyMvcConfig implements WebMvcConfigurer { /** * é…ç½®RequestMappingæ³¨è§£ä¸­æŒ‡å®šçš„è·¯å¾„æ¨¡å¼ä¸å®é™…è®¿é—®è·¯å¾„ä¹‹é—´æ˜ å°„çš„å¤„ç†è§„åˆ™ * @param configurer */ @Override public void configurePathMatch(PathMatchConfigurer configurer) { /** * è®¾ç½®è·¯å¾„åæ˜¯å¦åŒ…å«/ * å‡è®¾RequestMappingæ³¨è§£ä¸­æŒ‡å®šçš„è·¯å¾„æ˜¯/test * è®¾ç½®æˆTrueæ—¶ï¼Œä¼šåŒæ—¶å¤„ç†/test/å’Œ/testçš„è¯·æ±‚ * è®¾ç½®æˆFalseæ—¶ï¼Œåªä¼šå¤„ç†/testçš„è¯·æ±‚ * é»˜è®¤æ˜¯True */ configurer.setUseTrailingSlashMatch(false); /** * é…ç½®åç½®æ¨¡å¼åŒ¹é…æ˜¯å¦ä»…åœ¨é…ç½®å†…å®¹åå•†ä¸­æ˜ç¡®æŒ‡å®šçš„è·¯å¾„æ‰©å±•åç§°æ—¶ç”Ÿæ•ˆ * ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾WebMvcConfigurerä¸­è¦†ç›–äº†configureContentNegotiationæ–¹æ³•è¿›è¡Œä»¥ä¸‹å¤„ç†ï¼š * @Override * public void configureContentNegotiation(ContentNegotiationConfigurer configurer) { * configurer.mediaType(\"pdf\", MediaType.APPLICATION_PDF); *} * å½“setUseRegisteredSuffixPatternMatché…ç½®æˆTRUEæ—¶ï¼Œå³ä½¿setUseSuffixPatternMatchè®¾ç½®æˆTrueï¼Œ * åœ¨è®¿é—®/test.doæ—¶ä¹Ÿä¸ä¼šå‘½ä¸­è¢«RequestMappingæ³¨è§£å€¼ä¸º/testçš„Controllerï¼› * åªæœ‰åœ¨è®¿é—®/test.pdfæ—¶æ‰èƒ½æ­£å¸¸è®¿é—®ï¼Œå…¶å®ƒä»»ä½•çš„/test.txtæˆ–è€…/test.docç­‰å‡ä¼šæŠ¥404ï¼› * é»˜è®¤æƒ…å†µä¸‹è¯¥å€¼æ˜¯False */ configurer.setUseRegisteredSuffixPatternMatch(true); } /** * é…ç½®è·¯å¾„åç¼€ä¸è®¿é—®çš„å†…å®¹ç±»å‹çš„æ˜ å°„å…³ç³» * @param configurer */ @Override public void configureContentNegotiation(ContentNegotiationConfigurer configurer) { /** * è®¾ç½®åç¼€ä¸è®¿é—®çš„å†…å®¹ç±»å‹çš„æ˜ å°„å…³ç³»ï¼› * å¦‚ä»¥ä¸‹ç¤ºä¾‹ï¼Œé»˜è®¤æƒ…å†µä¸‹.txtè¡¨æ˜æ˜¯TXTç±»å‹ï¼Œç°åœ¨å°†å…¶æŒ‡å®šä¸ºPDFç±»å‹ï¼› * é‚£ä¹ˆåœ¨è®¿é—®http://localhost/test.txtæ—¶å°†ä¼šå°†å…¶å½“æˆPDFæ–‡ä»¶ç±»å‹ä½¿ç”¨PDFé˜…è¯»å·¥å…·æ‰“å¼€ã€‚ */ configurer.mediaType(\"txt\", MediaType.APPLICATION_PDF); /** * æ˜¯å¦å¿½ç•¥è¯·æ±‚æŠ¥æ–‡å¤´ä¸­çš„å†…å®¹ç±»å‹ * é»˜è®¤æƒ…å†µä¸‹æ˜¯Falseï¼Œå³ä»¥è¯·æ±‚æŠ¥æ–‡å¤´ä¸­çš„ç±»å‹ä¸ºå‡† */ configurer.ignoreAcceptHeader(true); /** * æ˜¯å¦é€šè¿‡ä¼ å…¥çš„å‚æ•°ï¼ˆé»˜è®¤åç§°æ˜¯formatï¼‰æ¥å†³å®šå†…å®¹ç±»å‹ * éœ€è¦ç»“åˆmediaTypeæ–¹æ³•ä¸€èµ·ä½¿ç”¨ï¼› * å¦‚é€šè¿‡mediaTypeæŒ‡å®štxtä¸ºPDFç±»å‹ï¼›åˆ™è®¿é—®è·¯å¾„http://localhost/test?format=txtæ—¶ä¼šå½“æˆPDFç±»å‹å¤„ç† * é»˜è®¤ä¸ºFalse */ configurer.favorParameter(true); /** * æ˜¯å¦ä¼˜å…ˆä½¿ç”¨åç¼€ä¸ºå†³å®šå†…å®¹ç±»å‹ * ä¸ºFalseæ—¶ä¼˜å…ˆä½¿ç”¨Headerä¸­çš„ç±»å‹ * ä¸ºTrueæ—¶ä¼˜å…ˆä½¿ç”¨.åé¢æŒ‡å®šçš„ç±»å‹ * é»˜è®¤ä¸ºTrue */ configurer.favorPathExtension(false); /** * æ˜¯å¦ä»…å¤„ç†æ˜ç¡®é€šè¿‡mediaTypeæ³¨å†Œçš„ç±»å‹è¯·æ±‚ */ configurer.useRegisteredExtensionsOnly(true); } /** * é…ç½®å½“é€šè¿‡DispatcherServletæ²¡æœ‰æŸ¥æ‰¾åˆ°å¯¹åº”çš„Handlerå¤„ç†æ—¶ï¼Œæ˜¯å¦ä½¿ç”¨é»˜è®¤çš„DefaultServletHttpRequestHandleræ¥è¿›è¡Œå¤„ç† * @param configurer */ @Override public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) { configurer.enable(); } /** * å¢åŠ å¯¹è±¡è½¬æ¢æ–¹æ³•å’Œæ ¼å¼åŒ–æ–¹æ³• * * @param registry */ @Override public void addFormatters(FormatterRegistry registry) { /** * å¤„ç†å‰å°ä¼ å…¥ç±»å‹ä¸ºStringä¸”Controllerä¸­æ¥å…¥å‚æ•°ä¹Ÿæ˜¯Stringçš„å‚æ•°è½¬æ¢ * å°†å‰å°ä¼ å…¥å‚æ•°å€¼é™„åŠ [converted]ååœ¨è°ƒç”¨Controlleræ—¶ä½¿ç”¨ï¼› * å¦‚å‰å°é€šè¿‡è®¿é—®http://localhost/test?a=bè°ƒç”¨Controllerï¼Œåœ¨Controllerè·å–åˆ°açš„å€¼æ—¶å°†ä¼šæ˜¯a[converted] */ registry.addConverter(new Converter() { @Nullable @Override public String convert(String source) { return null == source? null : source + \"[converted]\"; } }); /** * å¤„ç†å½“å‰å°ä¼ å…¥æ˜¯Stringç±»å‹è€Œåå°Controlleræ¥æ”¶çš„å‚æ•°æ˜¯Integerç±»å‹æ—¶çš„è½¬æ¢è§„åˆ™ */ registry.addConverter(new Converter() { @Nullable @Override public Integer convert(String source) { return null == source? null : Integer.valueOf(source) + 100; } }); } /** * é…ç½®é™æ€èµ„æºè®¿é—®çš„è·¯å¾„è§„åˆ™ä»¥åŠæŸ¥æ‰¾é™æ€èµ„æºçš„è·¯å¾„ * @param registry */ @Override public void addResourceHandlers(ResourceHandlerRegistry registry) { /** * å¤„ç†æ‰€æœ‰HTMLçš„è¯·æ±‚ï¼Œåˆ°staticç›®å½•ä¸‹æŸ¥æ‰¾å¯¹åº”çš„èµ„æº */ registry.addResourceHandler(\"/**.html\") //å¤„ç†çš„è·¯å¾„è§„åˆ™ .addResourceLocations(\"classpath:/static/\") //åˆ°å“ªäº›ç›®å½•ä¸‹å»æŸ¥æ‰¾é™æ€èµ„æº ; } /** * è¿›è¡Œè·¨åŸŸè®¿é—®ç›¸å…³é…ç½® * @param registry */ @Override public void addCorsMappings(CorsRegistry registry) { registry.addMapping(\"/test1/**\") //å¯ä»¥è·¨åŸŸè®¿é—®çš„URLè·¯è§„åˆ™ .allowedOrigins(\"http://localhost:8080/\") //å¯ä»¥è·¨åŸŸè®¿é—®çš„è®¿é—®è€… .allowedMethods(\"GET\", \"POST\", \"PUT\", \"DELETE\") //å¯ä»¥è·¨åŸŸè®¿é—®çš„æ–¹æ³• .allowedHeaders(\"\") //å¯ä»¥è·¨åŸŸè®¿é—®çš„Headers ; } @Override public void addViewControllers(ViewControllerRegistry registry) { /** * é…ç½®è·¯å¾„è·³è½¬ï¼›å°†æŸä¸ªè·¯å¾„çš„è¯·æ±‚æ˜ å°„åˆ°å¦å¤–ä¸€ä¸ªè·¯å¾„ * å¦‚å°†æ‰€æœ‰http://localhost/b/**çš„è¯·æ±‚å…¨éƒ¨è·³è½¬åˆ°http://localhost/testä¸Šå» */ registry.addRedirectViewController(\"/b/**\", \"/test\"); /** * å°†è·¯å¾„æ˜ å°„åˆ°æŸä¸ªåç§°ä¸ºæŒ‡å®šå€¼çš„è§†å›¾ä¸Š * è®¿é—®/cä¼šè¿”å›a.htmlçš„è§†å›¾ * ä¸€èˆ¬ä¸ViewResolverç»“åˆä½¿ç”¨ */ registry.addViewController(\"/c\").setViewName(\"a\"); /** * æŒ‡å®šæŸä¸ªè¯·æ±‚çš„çŠ¶æ€ç ï¼Œè€Œä¸è¿”å›ä»»ä½•çš„å†…å®¹ * å¦‚ä¸‹é¢å°†/badRequestè¯·æ±‚è¿”å›çŠ¶æ€ç ä¸º400ï¼Œè€Œæ²¡æœ‰è¿”å›å…¶å®ƒå†…å®¹ */ registry.addStatusController(\"/badRequest\", HttpStatus.BAD_REQUEST); } @Override public void configureViewResolvers(ViewResolverRegistry registry) { /** * æ·»åŠ HTMLçš„è§†å›¾è§£æå™¨ * æœ¬ç¤ºä¾‹å®Œæˆä»¥ä¸‹åŠŸèƒ½ï¼šå°†Controllerè¿”å›çš„Stringç±»å‹çš„è§†å›¾åç§°æ·»åŠ å‰ç¼€åŠåç¼€ï¼› * å¦‚è¿”å›çš„æ˜¯aï¼Œé‚£ä¹ˆå¤„ç†åå¯¹åº”çš„è§†å›¾å°†ä¼šæ˜¯/a.html */ registry.viewResolver(new InternalResourceViewResolver(\"/\", \".html\")); } } 12.é¡µé¢å›½é™…åŒ– 12.1 é…ç½®å‡†å¤‡å·¥ä½œ é¦–å…ˆï¼Œéœ€è¦é…ç½®æ–‡ä»¶ç¼–è¯‘æ ¼å¼å…¨éƒ¨ä¸ºï¼šUTF_8 ç„¶ååˆ›å»ºèµ„æºæ–‡ä»¶ è‹¥æ˜¯æ²¡æœ‰è¿™ä¸ªçª—å£ï¼Œå¯ä»¥å»ä¸‹è½½ä¸€ä¸ªæ’ä»¶plugin ï¼šResource Bundle Editor æœ€åç¼–è¾‘å¢åŠ ç›¸åº”çš„é…ç½® åˆ°è¿™é‡Œå·²ç»å®Œæˆå…¨éƒ¨é…ç½® 12.2 ä½¿ç”¨é…ç½® å…¶ä¸­ï¼Œæºç ä¸­çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š // è·å– properties ä¼ é€’è¿‡æ¥çš„å€¼è¿›è¡Œåˆ¤æ–­ @Bean public MessageSource messageSource(MessageSourceProperties properties) { ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource(); if (StringUtils.hasText(properties.getBasename())) { // è®¾ç½®å›½é™…åŒ–æ–‡ä»¶çš„åŸºç¡€åï¼ˆå»æ‰è¯­è¨€å›½å®¶ä»£ç çš„ï¼‰ messageSource.setBasenames(StringUtils .commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename()))); } if (properties.getEncoding() != null) { messageSource.setDefaultEncoding(properties.getEncoding().name()); } messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale()); Duration cacheDuration = properties.getCacheDuration(); if (cacheDuration != null) { messageSource.setCacheMillis(cacheDuration.toMillis()); } messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat()); messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage()); return messageSource; } é¦–å…ˆéœ€è¦åœ¨é…ç½®æ–‡ä»¶ application.yamlä¸‹æ·»åŠ é…ç½® propertiesæ–‡ä»¶ spring.messages.basename=i18n.login yamlæ–‡ä»¶ï¼ˆæ³¨æ„ç©ºæ ¼ï¼‰ spring: â€‹ messages: â€‹ basename: i18n.login ç½‘é¡µéƒ¨åˆ†ä¿®æ”¹æ•ˆæœå¦‚ä¸‹ï¼š è¿è¡Œå°±æ˜¯ä¸­æ–‡ç•Œé¢äº† ç„¶åå®ç°ä¸­è‹±æ–‡åˆ‡æ¢ åœ¨Springä¸­æœ‰ä¸€ä¸ªå›½é™…åŒ–çš„Locale ï¼ˆåŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼›é‡Œé¢æœ‰ä¸€ä¸ªå«åšLocaleResolver ï¼ˆè·å–åŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰çš„è§£æå™¨ï¼ æˆ‘ä»¬å»æˆ‘ä»¬webmvcè‡ªåŠ¨é…ç½®æ–‡ä»¶ï¼Œå¯»æ‰¾ä¸€ä¸‹ï¼çœ‹åˆ°SpringBooté»˜è®¤é…ç½®ï¼š @Override @Bean @ConditionalOnMissingBean(name = DispatcherServlet.LOCALE_RESOLVER_BEAN_NAME) public LocaleResolver localeResolver() { // å®¹å™¨ä¸­æ²¡æœ‰å°±è‡ªå·±é…ï¼Œæœ‰çš„è¯å°±ç”¨ç”¨æˆ·é…ç½®çš„ if (this.webProperties.getLocaleResolver() == WebProperties.LocaleResolver.FIXED) { return new FixedLocaleResolver(this.webProperties.getLocale()); } AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver(); localeResolver.setDefaultLocale(this.webProperties.getLocale()); return localeResolver; } è¿™é‡Œå†çœ‹ä¸€ä¸‹AcceptHeaderLocaleResolverè¿™ä¸ªç±»çš„å†…éƒ¨å®ç° public Locale resolveLocale(HttpServletRequest request) { Locale defaultLocale = this.getDefaultLocale(); // é»˜è®¤çš„å°±æ˜¯æ ¹æ®è¯·æ±‚å¤´å¸¦æ¥çš„åŒºåŸŸä¿¡æ¯è·å–Localeè¿›è¡Œå›½é™…åŒ– if (defaultLocale != null && request.getHeader(\"Accept-Language\") == null) { return defaultLocale; } else { Locale requestLocale = request.getLocale(); List supportedLocales = this.getSupportedLocales(); if (!supportedLocales.isEmpty() && !supportedLocales.contains(requestLocale)) { Locale supportedLocale = this.findSupportedLocale(request, supportedLocales); if (supportedLocale != null) { return supportedLocale; } else { return defaultLocale != null ? defaultLocale : requestLocale; } } else { return requestLocale; } } } ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é‡Œéœ€è¦æˆ‘ä»¬è‡ªå·±é…ç½®ä¸€ä¸ªlocaleResolver //å¯ä»¥åœ¨é“¾æ¥ä¸Šæºå¸¦åŒºåŸŸä¿¡æ¯ public class MyLocaleResolver implements LocaleResolver { @Override public Locale resolveLocale(HttpServletRequest request) { String language = request.getParameter(\"l\"); Locale locale = Locale.getDefault(); // å¦‚æœæ²¡æœ‰è·å–åˆ°å°±ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„ //å¦‚æœè¯·æ±‚é“¾æ¥ä¸ä¸ºç©º if (!StringUtils.isEmpty(language)){ //åˆ†å‰²è¯·æ±‚å‚æ•° String[] split = language.split(\"_\"); //å›½å®¶ï¼Œåœ°åŒº locale = new Locale(split[0],split[1]); } return locale; } @Override public void setLocale(HttpServletRequest request, HttpServletResponse response, Locale locale) { } } ç„¶ååœ¨mvcconfigè®©å®ƒç”Ÿæ•ˆ @Configuration public class MyMvcConfig implements WebMvcConfigurer { @Override public void addViewControllers(ViewControllerRegistry registry) { registry.addViewController(\"/\").setViewName(\"index\"); registry.addViewController(\"/index.html\").setViewName(\"index\"); } @Bean public LocaleResolver localeResolver(){ return new MyLocaleResolver(); } } åœ¨ç½‘é¡µä¸­æ·»åŠ é…ç½® ä¸­æ–‡ English éªŒè¯ç”Ÿæ•ˆäº† Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-05-06 19:15:43 "},"javaweb/SpringBootå­¦ä¹ 2.html":{"url":"javaweb/SpringBootå­¦ä¹ 2.html","title":"SpringBoot2","keywords":"","body":"SpringBootå­¦ä¹ 2ï¼ˆKuangshenï¼‰ 13.æ•°æ®åº“æœåŠ¡ JDBC MyBatis Druid Shiroï¼šå®‰å…¨ Spring Security å¼‚æ­¥ä»»åŠ¡ Swagger Dubbo+Zookeeper Copyright Â© jiaojiao52002.cn 2019 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2022-05-06 19:13:13 "}}